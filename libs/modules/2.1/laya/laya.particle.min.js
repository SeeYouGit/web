!function(t,e,i){i.un,i.uns;var r=i.static,a=i.class,n=i.getset,s=(i.__newvec,laya.webgl.canvas.BlendMode),o=(laya.webgl.utils.Buffer,laya.resource.Context,laya.display.cmd.DrawParticleCmd),l=laya.utils.Handler,h=(laya.net.Loader,laya.maths.MathUtil),m=laya.webgl.utils.MeshParticle2D,c=(laya.renders.Render,laya.webgl.utils.RenderState2D),u=laya.webgl.shader.Shader,d=(laya.webgl.shader.ShaderValue,laya.display.Sprite),_=laya.utils.Stat,f=(laya.resource.Texture,laya.webgl.shader.d2.value.Value2D),p=(laya.webgl.utils.VertexBuffer2D,laya.webgl.WebGL),v=(laya.webgl.WebGLContext,function(){function t(){this.settings=null,this.texture=null}return a(t,"laya.particle.ParticleTemplateBase"),t.prototype.addParticleArray=function(t,e){},t}()),y=function(){function t(){this._frameTime=0,this._emissionRate=60,this._emissionTime=0,this.minEmissionTime=1/60,this._particleTemplate=null}a(t,"laya.particle.emitter.EmitterBase");var e=t.prototype;return e.start=function(t){void 0===t&&(t=Number.MAX_VALUE),0!=this._emissionRate&&(this._emissionTime=t)},e.stop=function(){this._emissionTime=0},e.clear=function(){this._emissionTime=0},e.emit=function(){},e.advanceTime=function(t){if(void 0===t&&(t=1),this._emissionTime-=t,!(this._emissionTime<0||(this._frameTime+=t,this._frameTime<this.minEmissionTime)))for(;this._frameTime>this.minEmissionTime;)this._frameTime-=this.minEmissionTime,this.emit()},n(0,e,"particleTemplate",null,function(t){this._particleTemplate=t}),n(0,e,"emissionRate",function(){return this._emissionRate},function(t){t<=0||(this._emissionRate=t,t>0&&(this.minEmissionTime=1/t))}),t}(),g=(function(){function t(t,e,i){this._templet=null,this._timeBetweenParticles=NaN,this._previousPosition=null,this._timeLeftOver=0,this._tempVelocity=new Float32Array([0,0,0]),this._tempPosition=new Float32Array([0,0,0]),this._templet=t,this._timeBetweenParticles=1/e,this._previousPosition=i}a(t,"laya.particle.ParticleEmitter"),t.prototype.update=function(t,e){if((t/=1e3)>0){h.subtractVector3(e,this._previousPosition,this._tempVelocity),h.scaleVector3(this._tempVelocity,1/t,this._tempVelocity);for(var i=this._timeLeftOver+t,r=-this._timeLeftOver;i>this._timeBetweenParticles;)r+=this._timeBetweenParticles,i-=this._timeBetweenParticles,h.lerpVector3(this._previousPosition,e,r/t,this._tempPosition),this._templet.addParticleArray(this._tempPosition,this._tempVelocity);this._timeLeftOver=i}this._previousPosition[0]=e[0],this._previousPosition[1]=e[1],this._previousPosition[2]=e[2]}}(),function(){function t(){this.textureName=null,this.textureCount=1,this.maxPartices=100,this.duration=1,this.ageAddScale=0,this.emitterVelocitySensitivity=1,this.minStartSize=100,this.maxStartSize=100,this.minEndSize=100,this.maxEndSize=100,this.minHorizontalVelocity=0,this.maxHorizontalVelocity=0,this.minVerticalVelocity=0,this.maxVerticalVelocity=0,this.endVelocity=1,this.minRotateSpeed=0,this.maxRotateSpeed=0,this.minStartRadius=0,this.maxStartRadius=0,this.minEndRadius=0,this.maxEndRadius=0,this.minHorizontalStartRadian=0,this.maxHorizontalStartRadian=0,this.minVerticalStartRadian=0,this.maxVerticalStartRadian=0,this.useEndRadian=!0,this.minHorizontalEndRadian=0,this.maxHorizontalEndRadian=0,this.minVerticalEndRadian=0,this.maxVerticalEndRadian=0,this.colorComponentInter=!1,this.disableColor=!1,this.blendState=0,this.emitterType="null",this.emissionRate=0,this.sphereEmitterRadius=1,this.sphereEmitterVelocity=0,this.sphereEmitterVelocityAddVariance=0,this.ringEmitterRadius=30,this.ringEmitterVelocity=0,this.ringEmitterVelocityAddVariance=0,this.ringEmitterUp=2,this.gravity=new Float32Array([0,0,0]),this.minStartColor=new Float32Array([1,1,1,1]),this.maxStartColor=new Float32Array([1,1,1,1]),this.minEndColor=new Float32Array([1,1,1,1]),this.maxEndColor=new Float32Array([1,1,1,1]),this.pointEmitterPosition=new Float32Array([0,0,0]),this.pointEmitterPositionVariance=new Float32Array([0,0,0]),this.pointEmitterVelocity=new Float32Array([0,0,0]),this.pointEmitterVelocityAddVariance=new Float32Array([0,0,0]),this.boxEmitterCenterPosition=new Float32Array([0,0,0]),this.boxEmitterSize=new Float32Array([0,0,0]),this.boxEmitterVelocity=new Float32Array([0,0,0]),this.boxEmitterVelocityAddVariance=new Float32Array([0,0,0]),this.sphereEmitterCenterPosition=new Float32Array([0,0,0]),this.ringEmitterCenterPosition=new Float32Array([0,0,0]),this.positionVariance=new Float32Array([0,0,0])}return a(t,"laya.particle.ParticleSetting"),t.checkSetting=function(e){var i;for(i in t._defaultSetting)e.hasOwnProperty(i)||(e[i]=t._defaultSetting[i]);e.endVelocity=+e.endVelocity,e.gravity[0]=+e.gravity[0],e.gravity[1]=+e.gravity[1],e.gravity[2]=+e.gravity[2]},r(t,["_defaultSetting",function(){return this._defaultSetting=new t}]),t}()),E=function(){function t(){this.position=null,this.velocity=null,this.startColor=null,this.endColor=null,this.sizeRotation=null,this.radius=null,this.radian=null,this.durationAddScale=NaN,this.time=NaN}return a(t,"laya.particle.ParticleData"),t.Create=function(e,i,r,a){var n=new t;n.position=i,h.scaleVector3(r,e.emitterVelocitySensitivity,t._tempVelocity);var s=h.lerp(e.minHorizontalVelocity,e.maxHorizontalVelocity,Math.random()),o=Math.random()*Math.PI*2;t._tempVelocity[0]+=s*Math.cos(o),t._tempVelocity[2]+=s*Math.sin(o),t._tempVelocity[1]+=h.lerp(e.minVerticalVelocity,e.maxVerticalVelocity,Math.random()),n.velocity=t._tempVelocity,n.startColor=t._tempStartColor,n.endColor=t._tempEndColor;var l=0;if(e.disableColor){for(l=0;l<3;l++)n.startColor[l]=1,n.endColor[l]=1;n.startColor[l]=h.lerp(e.minStartColor[l],e.maxStartColor[l],Math.random()),n.endColor[l]=h.lerp(e.minEndColor[l],e.maxEndColor[l],Math.random())}else if(e.colorComponentInter)for(l=0;l<4;l++)n.startColor[l]=h.lerp(e.minStartColor[l],e.maxStartColor[l],Math.random()),n.endColor[l]=h.lerp(e.minEndColor[l],e.maxEndColor[l],Math.random());else h.lerpVector4(e.minStartColor,e.maxStartColor,Math.random(),n.startColor),h.lerpVector4(e.minEndColor,e.maxEndColor,Math.random(),n.endColor);n.sizeRotation=t._tempSizeRotation;var m=Math.random();n.sizeRotation[0]=h.lerp(e.minStartSize,e.maxStartSize,m),n.sizeRotation[1]=h.lerp(e.minEndSize,e.maxEndSize,m),n.sizeRotation[2]=h.lerp(e.minRotateSpeed,e.maxRotateSpeed,Math.random()),n.radius=t._tempRadius;var c=Math.random();n.radius[0]=h.lerp(e.minStartRadius,e.maxStartRadius,c),n.radius[1]=h.lerp(e.minEndRadius,e.maxEndRadius,c),n.radian=t._tempRadian,n.radian[0]=h.lerp(e.minHorizontalStartRadian,e.maxHorizontalStartRadian,Math.random()),n.radian[1]=h.lerp(e.minVerticalStartRadian,e.maxVerticalStartRadian,Math.random());var u=e.useEndRadian;return n.radian[2]=u?h.lerp(e.minHorizontalEndRadian,e.maxHorizontalEndRadian,Math.random()):n.radian[0],n.radian[3]=u?h.lerp(e.minVerticalEndRadian,e.maxVerticalEndRadian,Math.random()):n.radian[1],n.durationAddScale=e.ageAddScale*Math.random(),n.time=a,n},r(t,["_tempVelocity",function(){return this._tempVelocity=new Float32Array(3)},"_tempStartColor",function(){return this._tempStartColor=new Float32Array(4)},"_tempEndColor",function(){return this._tempEndColor=new Float32Array(4)},"_tempSizeRotation",function(){return this._tempSizeRotation=new Float32Array(3)},"_tempRadius",function(){return this._tempRadius=new Float32Array(2)},"_tempRadian",function(){return this._tempRadian=new Float32Array(4)}]),t}(),C=function(t){function e(){this.u_CurrentTime=NaN,this.u_Duration=NaN,this.u_Gravity=null,this.u_EndVelocity=NaN,this.u_texture=null,e.__super.call(this,0,0)}return a(e,"laya.particle.shader.value.ParticleShaderValue",f),e.prototype.upload=function(){var t=this.size;t[0]=c.width,t[1]=c.height,this.alpha=this.ALPHA*c.worldAlpha,e.pShader.upload(this)},r(e,["pShader",function(){return this.pShader=new V}]),e}(),x=function(t){function e(t){this._vertices=null,this._mesh=null,this._conchMesh=null,this._floatCountPerVertex=29,this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._currentTime=0,this._drawCounter=0,e.__super.call(this),this.settings=t}a(e,"laya.particle.ParticleTemplateWebGL",v);var i=e.prototype;return i.reUse=function(t,e){return 0},i.initialize=function(){var t;this._vertices=this._mesh._vb.getFloat32Array(),t=this._mesh._stride/4;for(var e=0,i=0,r=0;r<this.settings.maxPartices;r++){var a=Math.random(),n=this.settings.textureCount?1/this.settings.textureCount:1,s=NaN;for(s=0;s<this.settings.textureCount&&!(a<s+n);s+=n);this._vertices[e++]=-1,this._vertices[e++]=-1,this._vertices[e++]=0,this._vertices[e++]=s,e=i+=t,this._vertices[e++]=1,this._vertices[e++]=-1,this._vertices[e++]=1,this._vertices[e++]=s,e=i+=t,this._vertices[e++]=1,this._vertices[e++]=1,this._vertices[e++]=1,this._vertices[e++]=s+n,e=i+=t,this._vertices[e++]=-1,this._vertices[e++]=1,this._vertices[e++]=0,this._vertices[e++]=s+n,e=i+=t}},i.update=function(t){this._currentTime+=t/1e3,this.retireActiveParticles(),this.freeRetiredParticles(),this._firstActiveElement==this._firstFreeElement&&(this._currentTime=0),this._firstRetiredElement==this._firstActiveElement&&(this._drawCounter=0)},i.retireActiveParticles=function(){for(var t=this.settings.duration;this._firstActiveElement!=this._firstNewElement;){var e=this._firstActiveElement*this._floatCountPerVertex*4,i=e+28,r=this._currentTime-this._vertices[i];if((r*=1+this._vertices[e+27])+1e-4<t)break;this._vertices[i]=this._drawCounter,this._firstActiveElement++,this._firstActiveElement>=this.settings.maxPartices&&(this._firstActiveElement=0)}},i.freeRetiredParticles=function(){for(;this._firstRetiredElement!=this._firstActiveElement;){if(this._drawCounter-this._vertices[this._firstRetiredElement*this._floatCountPerVertex*4+28]<3)break;this._firstRetiredElement++,this._firstRetiredElement>=this.settings.maxPartices&&(this._firstRetiredElement=0)}},i.addNewParticlesToVertexBuffer=function(){},i.addParticleArray=function(t,e){var i=this._firstFreeElement+1;if(i>=this.settings.maxPartices&&(i=0),i!==this._firstRetiredElement){for(var r=E.Create(this.settings,t,e,this._currentTime),a=this._firstFreeElement*this._floatCountPerVertex*4,n=0;n<4;n++){var s=0,o=0;for(s=0,o=4;s<3;s++)this._vertices[a+n*this._floatCountPerVertex+o+s]=r.position[s];for(s=0,o=7;s<3;s++)this._vertices[a+n*this._floatCountPerVertex+o+s]=r.velocity[s];for(s=0,o=10;s<4;s++)this._vertices[a+n*this._floatCountPerVertex+o+s]=r.startColor[s];for(s=0,o=14;s<4;s++)this._vertices[a+n*this._floatCountPerVertex+o+s]=r.endColor[s];for(s=0,o=18;s<3;s++)this._vertices[a+n*this._floatCountPerVertex+o+s]=r.sizeRotation[s];for(s=0,o=21;s<2;s++)this._vertices[a+n*this._floatCountPerVertex+o+s]=r.radius[s];for(s=0,o=23;s<4;s++)this._vertices[a+n*this._floatCountPerVertex+o+s]=r.radian[s];this._vertices[a+n*this._floatCountPerVertex+27]=r.durationAddScale,this._vertices[a+n*this._floatCountPerVertex+28]=r.time}this._firstFreeElement=i}},e}(),P=function(t){function e(t){this.setting=null,this._posRange=null,this._canvasTemplate=null,this._emitFun=null,e.__super.call(this),this.template=t}a(e,"laya.particle.emitter.Emitter2D",t);var i=e.prototype;return i.emit=function(){t.prototype.emit.call(this),null!=this._emitFun&&this._emitFun()},i.getRandom=function(t){return(2*Math.random()-1)*t},i.webGLEmit=function(){var t=new Float32Array(3);t[0]=this.getRandom(this._posRange[0]),t[1]=this.getRandom(this._posRange[1]),t[2]=this.getRandom(this._posRange[2]);var e=new Float32Array(3);e[0]=0,e[1]=0,e[2]=0,this._particleTemplate.addParticleArray(t,e)},i.canvasEmit=function(){var t=new Float32Array(3);t[0]=this.getRandom(this._posRange[0]),t[1]=this.getRandom(this._posRange[1]),t[2]=this.getRandom(this._posRange[2]);var e=new Float32Array(3);e[0]=0,e[1]=0,e[2]=0,this._particleTemplate.addParticleArray(t,e)},n(0,i,"template",function(){return this._particleTemplate},function(t){this._particleTemplate=t,t||(this._emitFun=null,this.setting=null,this._posRange=null),this.setting=t.settings,this._posRange=this.setting.positionVariance,this._particleTemplate instanceof laya.particle.ParticleTemplate2D&&(this._emitFun=this.webGLEmit)}),e}(y),R=function(t){function e(t){this.x=0,this.y=0,this._blendFn=null,this._startTime=0,this._key={},this.sv=new C,e.__super.call(this,t);var r=this;i.loader.load(this.settings.textureName,l.create(null,function(t){r.texture=t})),this.sv.u_Duration=this.settings.duration,this.sv.u_Gravity=this.settings.gravity,this.sv.u_EndVelocity=this.settings.endVelocity,this._blendFn=s.fns[t.blendState],this._mesh=m.getAMesh(this.settings.maxPartices),this.initialize()}a(e,"laya.particle.ParticleTemplate2D",t);var r=e.prototype;return i.imps(r,{"laya.webgl.submit.ISubmit":!0}),r.getRenderType=function(){return-111},r.releaseRender=function(){},r.addParticleArray=function(e,i){e[0]+=this.x,e[1]+=this.y,t.prototype.addParticleArray.call(this,e,i)},r.addNewParticlesToVertexBuffer=function(){var t=this._mesh._vb;t.clear(),t.append(this._vertices);var e=0;this._firstNewElement<this._firstFreeElement?(e=4*this._firstNewElement*this._floatCountPerVertex*4,t.subUpload(e,e,e+4*(this._firstFreeElement-this._firstNewElement)*this._floatCountPerVertex*4)):(e=4*this._firstNewElement*this._floatCountPerVertex*4,t.subUpload(e,e,e+4*(this.settings.maxPartices-this._firstNewElement)*this._floatCountPerVertex*4),this._firstFreeElement>0&&(t.setNeedUpload(),t.subUpload(0,0,4*this._firstFreeElement*this._floatCountPerVertex*4))),this._firstNewElement=this._firstFreeElement},r.renderSubmit=function(){if(this.texture&&this.texture.getIsReady()){if(this.update(i.timer._delta),this.sv.u_CurrentTime=this._currentTime,this._firstNewElement!=this._firstFreeElement&&this.addNewParticlesToVertexBuffer(),this.blend(),this._firstActiveElement!=this._firstFreeElement){var t=p.mainContext;this._mesh.useMesh(t),this.sv.u_texture=this.texture._getSource(),this.sv.upload(),this._firstActiveElement<this._firstFreeElement?p.mainContext.drawElements(4,6*(this._firstFreeElement-this._firstActiveElement),5123,6*this._firstActiveElement*2):(p.mainContext.drawElements(4,6*(this.settings.maxPartices-this._firstActiveElement),5123,6*this._firstActiveElement*2),this._firstFreeElement>0&&p.mainContext.drawElements(4,6*this._firstFreeElement,5123,0)),_.renderBatches++}this._drawCounter++}return 1},r.updateParticleForNative=function(){this.texture&&this.texture.getIsReady()&&(this.update(i.timer._delta),this.sv.u_CurrentTime=this._currentTime,this._firstNewElement!=this._firstFreeElement&&(this._firstNewElement=this._firstFreeElement))},r.getMesh=function(){return this._mesh},r.getConchMesh=function(){return this._conchMesh},r.getFirstNewElement=function(){return this._firstNewElement},r.getFirstFreeElement=function(){return this._firstFreeElement},r.getFirstActiveElement=function(){return this._firstActiveElement},r.getFirstRetiredElement=function(){return this._firstRetiredElement},r.setFirstFreeElement=function(t){this._firstFreeElement=t},r.setFirstNewElement=function(t){this._firstNewElement=t},r.addDrawCounter=function(){this._drawCounter++},r.blend=function(){if(s.activeBlendFunction!==this._blendFn){var t=p.mainContext;t.enable(3042),this._blendFn(t),s.activeBlendFunction=this._blendFn}},r.dispose=function(){this._mesh.releaseMesh()},e.activeBlendType=-1,e}(x),V=(function(t){function e(t){this._particleTemplate=null,this._emitter=null,this.autoPlay=!0,this.tempCmd=null,e.__super.call(this),this._matrix4=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.customRenderEnable=!0,t&&this.setParticleSetting(t)}a(e,"laya.particle.Particle2D",t);var r=e.prototype;r.load=function(t){i.loader.load(t,l.create(this,this.setParticleSetting),null,"json")},r.setParticleSetting=function(t){if(!t)return this.stop();g.checkSetting(t),this.customRenderEnable=!0,this._particleTemplate=new R(t),this.graphics._saveToCmd(null,o.create(this._particleTemplate)),this._emitter?this._emitter.template=this._particleTemplate:this._emitter=new P(this._particleTemplate),this.autoPlay&&(this.emitter.start(),this.play())},r.play=function(){i.timer.frameLoop(1,this,this._loop)},r.stop=function(){i.timer.clear(this,this._loop)},r._loop=function(){this.advanceTime(1/60)},r.advanceTime=function(t){void 0===t&&(t=1),this._emitter&&this._emitter.advanceTime(t)},r.customRender=function(t,e,i){this._matrix4[0]=t._curMat.a,this._matrix4[1]=t._curMat.b,this._matrix4[4]=t._curMat.c,this._matrix4[5]=t._curMat.d,this._matrix4[12]=t._curMat.tx,this._matrix4[13]=t._curMat.ty,this._particleTemplate.sv.u_mmat=this._matrix4},r.destroy=function(e){void 0===e&&(e=!0),this._particleTemplate instanceof laya.particle.ParticleTemplate2D&&this._particleTemplate.dispose(),t.prototype.destroy.call(this,e)},n(0,r,"url",null,function(t){this.load(t)}),n(0,r,"emitter",function(){return this._emitter})}(d),function(t){function e(){e.__super.call(this,e.vs,e.ps,"ParticleShader",null,["a_CornerTextureCoordinate",0,"a_Position",1,"a_Velocity",2,"a_StartColor",3,"a_EndColor",4,"a_SizeRotation",5,"a_Radius",6,"a_Radian",7,"a_AgeAddScale",8,"a_Time",9])}return a(e,"laya.particle.shader.ParticleShader",u),r(e,["vs",function(){return this.vs="attribute vec4 a_CornerTextureCoordinate;\nattribute vec3 a_Position;\nattribute vec3 a_Velocity;\nattribute vec4 a_StartColor;\nattribute vec4 a_EndColor;\nattribute vec3 a_SizeRotation;\nattribute vec2 a_Radius;\nattribute vec4 a_Radian;\nattribute float a_AgeAddScale;\nattribute float a_Time;\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\n\nuniform float u_CurrentTime;\nuniform float u_Duration;\nuniform float u_EndVelocity;\nuniform vec3 u_Gravity;\n\nuniform vec2 size;\nuniform mat4 u_mmat;\n\nvec4 ComputeParticlePosition(in vec3 position, in vec3 velocity,in float age,in float normalizedAge)\n{\n\n   float startVelocity = length(velocity);//起始标量速度\n   float endVelocity = startVelocity * u_EndVelocity;//结束标量速度\n\n   float velocityIntegral = startVelocity * normalizedAge +(endVelocity - startVelocity) * normalizedAge *normalizedAge/2.0;//计算当前速度的标量（单位空间），vt=v0*t+(1/2)*a*(t^2)\n   \n   vec3 addPosition = normalize(velocity) * velocityIntegral * u_Duration;//计算受自身速度影响的位置，转换标量到矢量    \n   addPosition += u_Gravity * age * normalizedAge;//计算受重力影响的位置\n   \n   float radius=mix(a_Radius.x, a_Radius.y, normalizedAge); //计算粒子受半径和角度影响（无需计算角度和半径时，可用宏定义优化屏蔽此计算）\n   float radianHorizontal =mix(a_Radian.x,a_Radian.z,normalizedAge);\n   float radianVertical =mix(a_Radian.y,a_Radian.w,normalizedAge);\n   \n   float r =cos(radianVertical)* radius;\n   addPosition.y += sin(radianVertical) * radius;\n\t\n   addPosition.x += cos(radianHorizontal) *r;\n   addPosition.z += sin(radianHorizontal) *r;\n  \n   addPosition.y=-addPosition.y;//2D粒子位置更新需要取负，2D粒子坐标系Y轴正向朝上\n   position+=addPosition;\n   return  vec4(position,1.0);\n}\n\nfloat ComputeParticleSize(in float startSize,in float endSize, in float normalizedAge)\n{    \n    float size = mix(startSize, endSize, normalizedAge);\n    return size;\n}\n\nmat2 ComputeParticleRotation(in float rot,in float age)\n{    \n    float rotation =rot * age;\n    //计算2x2旋转矩阵.\n    float c = cos(rotation);\n    float s = sin(rotation);\n    return mat2(c, -s, s, c);\n}\n\nvec4 ComputeParticleColor(in vec4 startColor,in vec4 endColor,in float normalizedAge)\n{\n\tvec4 color=mix(startColor,endColor,normalizedAge);\n    //硬编码设置，使粒子淡入很快，淡出很慢,6.7的缩放因子把置归一在0到1之间，可以谷歌x*(1-x)*(1-x)*6.7的制图表\n    color.a *= normalizedAge * (1.0-normalizedAge) * (1.0-normalizedAge) * 6.7;\n   \n    return color;\n}\n\nvoid main()\n{\n   float age = u_CurrentTime - a_Time;\n   age *= 1.0 + a_AgeAddScale;\n   float normalizedAge = clamp(age / u_Duration,0.0,1.0);\n   gl_Position = ComputeParticlePosition(a_Position, a_Velocity, age, normalizedAge);//计算粒子位置\n   float pSize = ComputeParticleSize(a_SizeRotation.x,a_SizeRotation.y, normalizedAge);\n   mat2 rotation = ComputeParticleRotation(a_SizeRotation.z, age);\n\t\n    mat4 mat=u_mmat;\n    gl_Position=vec4((mat*gl_Position).xy,0.0,1.0);\n    gl_Position.xy += (rotation*a_CornerTextureCoordinate.xy) * pSize*vec2(mat[0][0],mat[1][1]);\n    gl_Position=vec4((gl_Position.x/size.x-0.5)*2.0,(0.5-gl_Position.y/size.y)*2.0,0.0,1.0);\n   \n   v_Color = ComputeParticleColor(a_StartColor,a_EndColor, normalizedAge);\n   v_TextureCoordinate =a_CornerTextureCoordinate.zw;\n}\n\n"},"ps",function(){return this.ps="#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\nuniform sampler2D u_texture;\n\nvoid main()\n{\t\n\tgl_FragColor=texture2D(u_texture,v_TextureCoordinate)*v_Color;\n\tgl_FragColor.xyz *= v_Color.w;\n}"}]),e}())}(window,document,Laya);