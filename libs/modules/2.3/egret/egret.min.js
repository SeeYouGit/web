"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},__reflect=function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i};if(void 0===global)var global=window;if(void 0===__global)var __global=global;var __define=function(t,e,i,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:r})};!function(t){t.$hashCount=1;var e=function(){function e(){this.$hashCode=t.$hashCount++}return Object.defineProperty(e.prototype,"hashCode",{get:function(){return this.$hashCode},enumerable:!0,configurable:!0}),e}();t.HashObject=e,__reflect(e.prototype,"egret.HashObject",["egret.IHashObject"])}(egret||(egret={})),function(t){var e=[],i=function(i){function r(t){void 0===t&&(t=null);var e=i.call(this)||this;return e.$EventDispatcher={0:t||e,1:{},2:{},3:0},e}return __extends(r,i),r.prototype.$getEventMap=function(t){var e=this.$EventDispatcher;return t?e[2]:e[1]},r.prototype.addEventListener=function(t,e,i,r,n){this.$addListener(t,e,i,r,n)},r.prototype.once=function(t,e,i,r,n){this.$addListener(t,e,i,r,n,!0)},r.prototype.$addListener=function(e,i,r,n,s,a){i||t.$error(1003,"listener");var o=this.$EventDispatcher,h=n?o[2]:o[1],c=h[e];c?0!==o[3]&&(h[e]=c=c.concat()):c=h[e]=[],this.$insertEventBin(c,e,i,r,n,s,a)},r.prototype.$insertEventBin=function(t,e,i,r,n,s,a){s=0|+s;for(var o=-1,h=t.length,c=0;c<h;c++){var l=t[c];if(l.listener==i&&l.thisObject==r&&l.target==this)return!1;-1==o&&l.priority<s&&(o=c)}var u={type:e,listener:i,thisObject:r,priority:s,target:this,useCapture:n,dispatchOnce:!!a};return-1!==o?t.splice(o,0,u):t.push(u),!0},r.prototype.removeEventListener=function(t,e,i,r){var n=this.$EventDispatcher,s=r?n[2]:n[1],a=s[t];a&&(0!==n[3]&&(s[t]=a=a.concat()),this.$removeEventBin(a,e,i),0==a.length&&(s[t]=null))},r.prototype.$removeEventBin=function(t,e,i){for(var r=t.length,n=0;n<r;n++){var s=t[n];if(s.listener==e&&s.thisObject==i&&s.target==this)return t.splice(n,1),!0}return!1},r.prototype.hasEventListener=function(t){var e=this.$EventDispatcher;return!(!e[1][t]&&!e[2][t])},r.prototype.willTrigger=function(t){return this.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return t.$currentTarget=this.$EventDispatcher[0],t.$setTarget(t.$currentTarget),this.$notifyListener(t,!1)},r.prototype.$notifyListener=function(t,i){var r=this.$EventDispatcher,n=(i?r[2]:r[1])[t.$type];if(!n)return!0;var s=n.length;if(0==s)return!0;var a=e;r[3]++;for(var o=0;o<s;o++){if((h=n[o]).listener.call(h.thisObject,t),h.dispatchOnce&&a.push(h),t.$isPropagationImmediateStopped)break}for(r[3]--;a.length;){var h;(h=a.pop()).target.removeEventListener(h.type,h.listener,h.thisObject,h.useCapture)}return!t.$isDefaultPrevented},r.prototype.dispatchEventWith=function(e,i,r,n){if(i||this.hasEventListener(e)){var s=t.Event.create(t.Event,e,i,n);s.data=r;var a=this.dispatchEvent(s);return t.Event.release(s),a}return!0},r}(t.HashObject);t.EventDispatcher=i,__reflect(i.prototype,"egret.EventDispatcher",["egret.IEventDispatcher"])}(egret||(egret={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.type=null,i.$id=null,i.paddingTop=0,i.paddingBottom=0,i.paddingLeft=0,i.paddingRight=0,i.$uniforms={},t.nativeRender&&egret_native.NativeDisplayObject.createFilter(i),i}return __extends(i,e),i.prototype.$toJson=function(){return""},i.prototype.updatePadding=function(){},i.prototype.onPropertyChange=function(){this.updatePadding(),t.nativeRender&&(egret_native.NativeDisplayObject.setFilterPadding(this.$id,this.paddingTop,this.paddingBottom,this.paddingLeft,this.paddingRight),egret_native.NativeDisplayObject.setDataToFilter(this))},i}(t.HashObject);t.Filter=e,__reflect(e.prototype,"egret.Filter")}(egret||(egret={})),function(t){function e(t){return(t%=360)>180?t-=360:t<-180&&(t+=360),t}var i=function(i){function r(){var e=i.call(this)||this;return e.$children=null,e.$name="",e.$parent=null,e.$stage=null,e.$nestLevel=0,e.$useTranslate=!1,e.$matrix=new t.Matrix,e.$matrixDirty=!1,e.$x=0,e.$y=0,e.$scaleX=1,e.$scaleY=1,e.$rotation=0,e.$skewX=0,e.$skewXdeg=0,e.$skewY=0,e.$skewYdeg=0,e.$explicitWidth=NaN,e.$explicitHeight=NaN,e.$anchorOffsetX=0,e.$anchorOffsetY=0,e.$visible=!0,e.$displayList=null,e.$cacheAsBitmap=!1,e.$cacheDirty=!1,e.$alpha=1,e.$touchEnabled=r.defaultTouchEnabled,e.$scrollRect=null,e.$blendMode=0,e.$maskedObject=null,e.$mask=null,e.$maskRect=null,e.$parentDisplayList=null,e.$renderNode=null,e.$renderDirty=!1,e.$renderMode=null,e._tint=0,e.$tintRGB=0,e.$sortDirty=!1,e._zIndex=0,e.$lastSortedIndex=0,e.sortableChildren=!1,t.nativeRender&&e.createNativeDisplayObject(),e.tint=16777215,e}return __extends(r,i),r.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(0)},Object.defineProperty(r.prototype,"name",{get:function(){return this.$name},set:function(t){this.$name=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),r.prototype.$setParent=function(t){this.$parent=t},r.prototype.$onAddToStage=function(e,i){this.$stage=e,this.$nestLevel=i,this.$hasAddToStage=!0,t.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(this)},r.prototype.$onRemoveFromStage=function(){this.$nestLevel=0,t.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(this)},r.prototype.$updateUseTransform=function(){1==this.$scaleX&&1==this.$scaleY&&0==this.$skewX&&0==this.$skewY?this.$useTranslate=!1:this.$useTranslate=!0},Object.defineProperty(r.prototype,"stage",{get:function(){return this.$stage},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"matrix",{get:function(){return this.$getMatrix().clone()},set:function(t){this.$setMatrix(t)},enumerable:!0,configurable:!0}),r.prototype.$getMatrix=function(){return this.$matrixDirty&&(this.$matrixDirty=!1,this.$matrix.$updateScaleAndRotation(this.$scaleX,this.$scaleY,this.$skewX,this.$skewY)),this.$matrix.tx=this.$x,this.$matrix.ty=this.$y,this.$matrix},r.prototype.$setMatrix=function(i,r){void 0===r&&(r=!0);var n=this.$matrix;n.a=i.a,n.b=i.b,n.c=i.c,n.d=i.d,this.$x=i.tx,this.$y=i.ty,this.$matrixDirty=!1,1==n.a&&0==n.b&&0==n.c&&1==n.d?this.$useTranslate=!1:this.$useTranslate=!0,r&&(this.$scaleX=n.$getScaleX(),this.$scaleY=n.$getScaleY(),this.$skewX=i.$getSkewX(),this.$skewY=i.$getSkewY(),this.$skewXdeg=e(180*this.$skewX/Math.PI),this.$skewYdeg=e(180*this.$skewY/Math.PI),this.$rotation=e(180*this.$skewY/Math.PI)),t.nativeRender&&this.$nativeDisplayObject.setMatrix(i.a,i.b,i.c,i.d,i.tx,i.ty)},r.prototype.$getConcatenatedMatrix=function(){var e=this.$concatenatedMatrix;e||(e=this.$concatenatedMatrix=new t.Matrix),this.$parent?this.$parent.$getConcatenatedMatrix().$preMultiplyInto(this.$getMatrix(),e):e.copyFrom(this.$getMatrix());var i=this.$anchorOffsetX,r=this.$anchorOffsetY,n=this.$scrollRect;return n?e.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-n.x-i,-n.y-r),e):0==i&&0==r||e.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-i,-r),e),this.$concatenatedMatrix},r.prototype.$getInvertedConcatenatedMatrix=function(){return this.$invertedConcatenatedMatrix||(this.$invertedConcatenatedMatrix=new t.Matrix),this.$getConcatenatedMatrix().$invertInto(this.$invertedConcatenatedMatrix),this.$invertedConcatenatedMatrix},Object.defineProperty(r.prototype,"x",{get:function(){return this.$getX()},set:function(t){this.$setX(t)},enumerable:!0,configurable:!0}),r.prototype.$getX=function(){return this.$x},r.prototype.$setX=function(e){if(this.$x==e)return!1;if(this.$x=e,t.nativeRender)this.$nativeDisplayObject.setX(e);else{var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},Object.defineProperty(r.prototype,"y",{get:function(){return this.$getY()},set:function(t){this.$setY(t)},enumerable:!0,configurable:!0}),r.prototype.$getY=function(){return this.$y},r.prototype.$setY=function(e){if(this.$y==e)return!1;if(this.$y=e,t.nativeRender)this.$nativeDisplayObject.setY(e);else{var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},Object.defineProperty(r.prototype,"scaleX",{get:function(){return this.$getScaleX()},set:function(t){this.$setScaleX(t)},enumerable:!0,configurable:!0}),r.prototype.$getScaleX=function(){return this.$scaleX},r.prototype.$setScaleX=function(e){if(this.$scaleX!=e)if(this.$scaleX=e,this.$matrixDirty=!0,this.$updateUseTransform(),t.nativeRender)this.$nativeDisplayObject.setScaleX(e);else{var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"scaleY",{get:function(){return this.$getScaleY()},set:function(t){this.$setScaleY(t)},enumerable:!0,configurable:!0}),r.prototype.$getScaleY=function(){return this.$scaleY},r.prototype.$setScaleY=function(e){if(this.$scaleY!=e)if(this.$scaleY=e,this.$matrixDirty=!0,this.$updateUseTransform(),t.nativeRender)this.$nativeDisplayObject.setScaleY(e);else{var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"rotation",{get:function(){return this.$getRotation()},set:function(t){this.$setRotation(t)},enumerable:!0,configurable:!0}),r.prototype.$getRotation=function(){return this.$rotation},r.prototype.$setRotation=function(i){if((i=e(i))!=this.$rotation){var r=(i-this.$rotation)/180*Math.PI;if(this.$skewX+=r,this.$skewY+=r,this.$rotation=i,this.$matrixDirty=!0,this.$updateUseTransform(),t.nativeRender)this.$nativeDisplayObject.setRotation(i);else{var n=this.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var s=this.$maskedObject;s&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp())}}},Object.defineProperty(r.prototype,"skewX",{get:function(){return this.$skewXdeg},set:function(t){this.$setSkewX(t)},enumerable:!0,configurable:!0}),r.prototype.$setSkewX=function(i){if(i!=this.$skewXdeg)if(this.$skewXdeg=i,i=(i=e(i))/180*Math.PI,this.$skewX=i,this.$matrixDirty=!0,this.$updateUseTransform(),t.nativeRender)this.$nativeDisplayObject.setSkewX(this.$skewXdeg);else{var r=this.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=this.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"skewY",{get:function(){return this.$skewYdeg},set:function(t){this.$setSkewY(t)},enumerable:!0,configurable:!0}),r.prototype.$setSkewY=function(i){if(i!=this.$skewYdeg)if(this.$skewYdeg=i,i=((i=e(i))+this.$rotation)/180*Math.PI,this.$skewY=i,this.$matrixDirty=!0,this.$updateUseTransform(),t.nativeRender)this.$nativeDisplayObject.setSkewY(this.$skewYdeg);else{var r=this.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=this.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"width",{get:function(){return this.$getWidth()},set:function(t){this.$setWidth(t)},enumerable:!0,configurable:!0}),r.prototype.$getWidth=function(){return isNaN(this.$explicitWidth)?this.$getOriginalBounds().width:this.$explicitWidth},r.prototype.$setWidth=function(t){t=isNaN(t)?NaN:t,this.$explicitWidth!=t&&(this.$explicitWidth=t)},Object.defineProperty(r.prototype,"height",{get:function(){return this.$getHeight()},set:function(t){this.$setHeight(t)},enumerable:!0,configurable:!0}),r.prototype.$getHeight=function(){return isNaN(this.$explicitHeight)?this.$getOriginalBounds().height:this.$explicitHeight},r.prototype.$setHeight=function(t){t=isNaN(t)?NaN:t,this.$explicitHeight!=t&&(this.$explicitHeight=t)},Object.defineProperty(r.prototype,"measuredWidth",{get:function(){return this.$getOriginalBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"measuredHeight",{get:function(){return this.$getOriginalBounds().height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"anchorOffsetX",{get:function(){return this.$anchorOffsetX},set:function(t){this.$setAnchorOffsetX(t)},enumerable:!0,configurable:!0}),r.prototype.$setAnchorOffsetX=function(e){if(this.$anchorOffsetX!=e)if(this.$anchorOffsetX=e,t.nativeRender)this.$nativeDisplayObject.setAnchorOffsetX(e);else{var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"anchorOffsetY",{get:function(){return this.$anchorOffsetY},set:function(t){this.$setAnchorOffsetY(t)},enumerable:!0,configurable:!0}),r.prototype.$setAnchorOffsetY=function(e){if(this.$anchorOffsetY!=e)if(this.$anchorOffsetY=e,t.nativeRender)this.$nativeDisplayObject.setAnchorOffsetY(e);else{var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"visible",{get:function(){return this.$visible},set:function(t){this.$setVisible(t)},enumerable:!0,configurable:!0}),r.prototype.$setVisible=function(e){if(this.$visible!=e)if(this.$visible=e,t.nativeRender)this.$nativeDisplayObject.setVisible(e);else{this.$updateRenderMode();var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"cacheAsBitmap",{get:function(){return this.$cacheAsBitmap},set:function(e){this.$cacheAsBitmap=e,t.nativeRender?this.$nativeDisplayObject.setCacheAsBitmap(e):this.$setHasDisplayList(e)},enumerable:!0,configurable:!0}),r.prototype.$setHasDisplayList=function(e){if(!!this.$displayList!=e)if(e){var i=t.sys.DisplayList.create(this);i&&(this.$displayList=i,this.$cacheDirty=!0)}else this.$displayList=null},r.prototype.$cacheDirtyUp=function(){var t=this.$parent;t&&!t.$cacheDirty&&(t.$cacheDirty=!0,t.$cacheDirtyUp())},Object.defineProperty(r.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$setAlpha(t)},enumerable:!0,configurable:!0}),r.prototype.$setAlpha=function(e){if(this.$alpha!=e)if(this.$alpha=e,t.nativeRender)this.$nativeDisplayObject.setAlpha(e);else{this.$updateRenderMode();var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(r.prototype,"touchEnabled",{get:function(){return this.$getTouchEnabled()},set:function(t){this.$setTouchEnabled(t)},enumerable:!0,configurable:!0}),r.prototype.$getTouchEnabled=function(){return this.$touchEnabled},r.prototype.$setTouchEnabled=function(t){this.$touchEnabled=!!t},Object.defineProperty(r.prototype,"scrollRect",{get:function(){return this.$scrollRect},set:function(t){this.$setScrollRect(t)},enumerable:!0,configurable:!0}),r.prototype.$setScrollRect=function(e){if(e||this.$scrollRect){if(e?(this.$scrollRect||(this.$scrollRect=new t.Rectangle),this.$scrollRect.copyFrom(e),t.nativeRender&&this.$nativeDisplayObject.setScrollRect(e.x,e.y,e.width,e.height)):(this.$scrollRect=null,t.nativeRender&&this.$nativeDisplayObject.setScrollRect(0,0,0,0)),!t.nativeRender){this.$updateRenderMode();var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}}else this.$updateRenderMode()},Object.defineProperty(r.prototype,"blendMode",{get:function(){return t.sys.numberToBlendMode(this.$blendMode)},set:function(e){var i=t.sys.blendModeToNumber(e);if(this.$blendMode!=i)if(this.$blendMode=i,t.nativeRender)this.$nativeDisplayObject.setBlendMode(i);else{this.$updateRenderMode();var r=this.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=this.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){return this.$mask?this.$mask:this.$maskRect},set:function(e){if(e!==this){if(e)if(e instanceof r){if(e==this.$mask)return;e.$maskedObject&&(e.$maskedObject.mask=null),e.$maskedObject=this,this.$mask=e,t.nativeRender||e.$updateRenderMode(),this.$maskRect&&(t.nativeRender&&this.$nativeDisplayObject.setMaskRect(0,0,0,0),this.$maskRect=null),t.nativeRender&&this.$nativeDisplayObject.setMask(e.$nativeDisplayObject.id)}else this.$maskRect||(this.$maskRect=new t.Rectangle),this.$maskRect.copyFrom(e),t.nativeRender&&this.$nativeDisplayObject.setMaskRect(e.x,e.y,e.width,e.height),this.$mask&&(this.$mask.$maskedObject=null,t.nativeRender||this.$mask.$updateRenderMode()),this.mask&&(t.nativeRender&&this.$nativeDisplayObject.setMask(-1),this.$mask=null);else this.$mask&&(this.$mask.$maskedObject=null,t.nativeRender||this.$mask.$updateRenderMode()),this.mask&&(t.nativeRender&&this.$nativeDisplayObject.setMask(-1),this.$mask=null),this.$maskRect&&(t.nativeRender&&this.$nativeDisplayObject.setMaskRect(0,0,0,0),this.$maskRect=null);t.nativeRender||this.$updateRenderMode()}},enumerable:!0,configurable:!0}),r.prototype.$setMaskRect=function(e){(e||this.$maskRect)&&(e?(this.$maskRect||(this.$maskRect=new t.Rectangle),this.$maskRect.copyFrom(e)):this.$maskRect=null)},Object.defineProperty(r.prototype,"filters",{get:function(){return this.$filters},set:function(e){var i,r;this.$filters||e?(e&&e.length?(e=e.concat(),this.$filters=e,t.nativeRender&&this.$nativeDisplayObject.setFilters(e)):(this.$filters=e,t.nativeRender&&this.$nativeDisplayObject.setFilters(null)),t.nativeRender||(this.$updateRenderMode(),(i=this.$parent)&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp()),(r=this.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()))):(this.$filters=e,t.nativeRender?this.$nativeDisplayObject.setFilters(null):(this.$updateRenderMode(),(i=this.$parent)&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp()),(r=this.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},enumerable:!0,configurable:!0}),r.prototype.getTransformedBounds=function(t,e){return t=t||this,this.$getTransformedBounds(t,e)},r.prototype.getBounds=function(t,e){void 0===e&&(e=!0);return t=this.$getTransformedBounds(this,t),e&&(0!=this.$anchorOffsetX&&(t.x-=this.$anchorOffsetX),0!=this.$anchorOffsetY&&(t.y-=this.$anchorOffsetY)),t},r.prototype.$getTransformedBounds=function(e,i){var r,n=this.$getOriginalBounds();if(i||(i=new t.Rectangle),i.copyFrom(n),e==this)return i;e?(r=t.$TempMatrix,e.$getInvertedConcatenatedMatrix().$preMultiplyInto(this.$getConcatenatedMatrix(),r)):r=this.$getConcatenatedMatrix();return r.$transformBounds(i),i},r.prototype.globalToLocal=function(e,i,r){if(void 0===e&&(e=0),void 0===i&&(i=0),t.nativeRender){egret_native.updateNativeRender();var n=egret_native.nrGlobalToLocal(this.$nativeDisplayObject.id,e,i).split(","),s=parseFloat(n[0]),a=parseFloat(n[1]);return r?r.setTo(s,a):r=new t.Point(s,a),r}return this.$getInvertedConcatenatedMatrix().transformPoint(e,i,r)},r.prototype.localToGlobal=function(e,i,r){if(void 0===e&&(e=0),void 0===i&&(i=0),t.nativeRender){egret_native.updateNativeRender();var n=egret_native.nrLocalToGlobal(this.$nativeDisplayObject.id,e,i).split(","),s=parseFloat(n[0]),a=parseFloat(n[1]);return r?r.setTo(s,a):r=new t.Point(s,a),r}return this.$getConcatenatedMatrix().transformPoint(e,i,r)},r.prototype.$getOriginalBounds=function(){var t=this.$getContentBounds();this.$measureChildBounds(t);var e=this.$measureFiltersOffset(!1);return e&&(t.x+=e.minX,t.y+=e.minY,t.width+=-e.minX+e.maxX,t.height+=-e.minY+e.maxY),t},r.prototype.$measureChildBounds=function(t){},r.prototype.$getContentBounds=function(){var e=t.$TempRectangle;return e.setEmpty(),this.$measureContentBounds(e),e},r.prototype.$measureContentBounds=function(t){},r.prototype.$getRenderNode=function(){var t=this.$renderNode;return t?(this.$renderDirty&&(t.cleanBeforeRender(),this.$updateRenderNode(),this.$renderDirty=!1,t=this.$renderNode),t):null},r.prototype.$updateRenderMode=function(){!this.$visible||this.$alpha<=0||this.$maskedObject?this.$renderMode=1:this.filters&&this.filters.length>0?this.$renderMode=2:0!==this.$blendMode||this.$mask&&this.$mask.$stage?this.$renderMode=3:this.$scrollRect||this.$maskRect?this.$renderMode=4:this.$renderMode=null},r.prototype.$measureFiltersOffset=function(e){for(var i=this,r=0,n=0,s=0,a=0;i;){var o=i.$filters;if(o&&o.length)for(var h=o.length,c=0;c<h;c++){var l=o[c];if("blur"==l.type)r-=u=l.blurX,n-=p=l.blurY,s+=u,a+=p;else if("glow"==l.type){var u,p;r-=u=l.blurX,n-=p=l.blurY,s+=u,a+=p;var d=l.distance||0,f=l.angle||0,$=0,g=0;0!=d&&(r+=$=($=d*t.NumberUtils.cos(f))>0?Math.ceil($):Math.floor($),s+=$,n+=g=(g=d*t.NumberUtils.sin(f))>0?Math.ceil(g):Math.floor(g),a+=g)}else if("custom"==l.type){var y=l.padding;r-=y,n-=y,s+=y,a+=y}}i=e?i.$parent:null}return{minX:r=Math.min(r,0),minY:n=Math.min(n,0),maxX:s=Math.max(s,0),maxY:a=Math.max(a,0)}},r.prototype.$getConcatenatedMatrixAt=function(e,i){var r=e.$getInvertedConcatenatedMatrix();if(0===r.a||0===r.d){var n=this,s=e.$nestLevel;for(i.identity();n.$nestLevel>s;){var a=n.$scrollRect;a&&i.concat(t.$TempMatrix.setTo(1,0,0,1,-a.x,-a.y)),i.concat(n.$getMatrix()),n=n.$parent}}else r.$preMultiplyInto(i,i)},r.prototype.$updateRenderNode=function(){},r.prototype.$hitTest=function(e,i){if(!t.nativeRender&&!this.$renderNode||!this.$visible||0==this.$scaleX||0==this.$scaleY)return null;var r=this.$getInvertedConcatenatedMatrix();if(0==r.a&&0==r.b&&0==r.c&&0==r.d)return null;var n=this.$getContentBounds(),s=r.a*e+r.c*i+r.tx,a=r.b*e+r.d*i+r.ty;if(n.contains(s,a)){if(!this.$children){var o=this.$scrollRect?this.$scrollRect:this.$maskRect;if(o&&!o.contains(s,a))return null;if(this.$mask&&!this.$mask.$hitTest(e,i))return null}return this}return null},r.prototype.hitTestPoint=function(e,i,r){if(r){l=(h=this.$getInvertedConcatenatedMatrix()).a*e+h.c*i+h.tx,u=h.b*e+h.d*i+h.ty;var n=void 0;if(t.nativeRender){(a=t.sys.customHitTestBuffer).resize(3,3),egret_native.forHitTest=!0,egret_native.activateBuffer(a),egret_native.updateNativeRender(),egret_native.nrRenderDisplayObject2(this.$nativeDisplayObject.id,1-l,1-u,!0);try{n=new Uint8Array(4),egret_native.nrGetPixels(1,1,1,1,n)}catch(e){throw new Error(t.sys.tr(1039))}return egret_native.activateBuffer(null),egret_native.forHitTest=!1,0!==n[3]}var s=this.$displayList;if(s){var a=s.renderBuffer;try{n=a.getPixels(l-s.offsetX,u-s.offsetY)}catch(e){throw new Error(t.sys.tr(1039))}}else{(a=t.sys.customHitTestBuffer).resize(3,3);var o=t.Matrix.create();o.identity(),o.translate(1-l,1-u),t.sys.systemRenderer.render(this,a,o,!0),t.Matrix.release(o);try{n=a.getPixels(1,1)}catch(e){throw new Error(t.sys.tr(1039))}}return 0!==n[3]}if(0==this.$scaleX||0==this.$scaleY)return!1;var h=this.$getInvertedConcatenatedMatrix(),c=this.getBounds(null,!1),l=h.a*e+h.c*i+h.tx,u=h.b*e+h.d*i+h.ty;if(c.contains(l,u)){var p=this.$scrollRect?this.$scrollRect:this.$maskRect;return!(p&&!p.contains(l,u))}return!1},r.prototype.$addListener=function(e,n,s,a,o,h){i.prototype.$addListener.call(this,e,n,s,a,o,h);var c=e==t.Event.ENTER_FRAME;if(c||e==t.Event.RENDER){var l=c?r.$enterFrameCallBackList:r.$renderCallBackList;-1==l.indexOf(this)&&l.push(this)}},r.prototype.removeEventListener=function(e,n,s,a){i.prototype.removeEventListener.call(this,e,n,s,a);var o=e==t.Event.ENTER_FRAME;if((o||e==t.Event.RENDER)&&!this.hasEventListener(e)){var h=o?r.$enterFrameCallBackList:r.$renderCallBackList,c=h.indexOf(this);-1!==c&&h.splice(c,1)}},r.prototype.dispatchEvent=function(t){if(!t.$bubbles)return i.prototype.dispatchEvent.call(this,t);var e=this.$getPropagationList(this),r=.5*e.length;return t.$setTarget(this),this.$dispatchPropagationEvent(t,e,r),!t.$isDefaultPrevented},r.prototype.$getPropagationList=function(t){for(var e=[];t;)e.push(t),t=t.$parent;var i=e.concat();return i.reverse(),e=i.concat(e)},r.prototype.$dispatchPropagationEvent=function(t,e,i){for(var r=e.length,n=i-1,s=0;s<r;s++){var a=e[s];if(t.$currentTarget=a,t.$eventPhase=s<n?1:s==i||s==n?2:3,a.$notifyListener(t,s<i),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},r.prototype.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.$parent}return!1},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this.$tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!0,configurable:!0}),r.prototype.sortChildren=function(){this.$sortDirty=!1},Object.defineProperty(r.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.$sortDirty=!0)},enumerable:!0,configurable:!0}),r.defaultTouchEnabled=!1,r.$enterFrameCallBackList=[],r.$renderCallBackList=[],r}(t.EventDispatcher);t.DisplayObject=i,__reflect(i.prototype,"egret.DisplayObject")}(egret||(egret={})),function(t){t.$TextureScaleFactor=1;var e=function(e){function i(){var t=e.call(this)||this;return t.disposeBitmapData=!0,t.$bitmapX=0,t.$bitmapY=0,t.$bitmapWidth=0,t.$bitmapHeight=0,t.$offsetX=0,t.$offsetY=0,t.$textureWidth=0,t.$textureHeight=0,t.$sourceWidth=0,t.$sourceHeight=0,t.$bitmapData=null,t.$ktxData=null,t.$rotated=!1,t}return __extends(i,e),Object.defineProperty(i.prototype,"textureWidth",{get:function(){return this.$getTextureWidth()},enumerable:!0,configurable:!0}),i.prototype.$getTextureWidth=function(){return this.$textureWidth},Object.defineProperty(i.prototype,"textureHeight",{get:function(){return this.$getTextureHeight()},enumerable:!0,configurable:!0}),i.prototype.$getTextureHeight=function(){return this.$textureHeight},i.prototype.$getScaleBitmapWidth=function(){return this.$bitmapWidth*t.$TextureScaleFactor},i.prototype.$getScaleBitmapHeight=function(){return this.$bitmapHeight*t.$TextureScaleFactor},Object.defineProperty(i.prototype,"bitmapData",{get:function(){return this.$bitmapData},set:function(t){this.$ktxData=null,this._setBitmapData(t)},enumerable:!0,configurable:!0}),i.prototype._setBitmapData=function(e){this.$bitmapData=e;var i=t.$TextureScaleFactor,r=e.width*i,n=e.height*i;this.$initData(0,0,r,n,0,0,r,n,e.width,e.height)},Object.defineProperty(i.prototype,"ktxData",{get:function(){return this.$ktxData},set:function(t){this._setKtxData(t)},enumerable:!0,configurable:!0}),i.prototype._setKtxData=function(e){if(e){if(e!=this.$ktxData){var i=new t.KTXContainer(e,1);if(i.isInvalid)t.error("ktx data is invalid");else{this.$ktxData=e;var r=new t.BitmapData(e);r.format="ktx",i.uploadLevels(r,!1),this._setBitmapData(r)}}}else t.error("ktx data is null")},i.prototype.$initData=function(e,i,r,n,s,a,o,h,c,l,u){void 0===u&&(u=!1);var p=t.$TextureScaleFactor;this.$bitmapX=e/p,this.$bitmapY=i/p,this.$bitmapWidth=r/p,this.$bitmapHeight=n/p,this.$offsetX=s,this.$offsetY=a,this.$textureWidth=o,this.$textureHeight=h,this.$sourceWidth=c,this.$sourceHeight=l,this.$rotated=u,t.BitmapData.$invalidate(this.$bitmapData)},i.prototype.getPixel32=function(t,e){throw new Error},i.prototype.getPixels=function(t,e,i,r){throw void 0===i&&(i=1),void 0===r&&(r=1),new Error},i.prototype.toDataURL=function(t,e,i){throw new Error},i.prototype.saveToFile=function(t,e,i){throw new Error},i.prototype.dispose=function(){this.$bitmapData&&(this.disposeBitmapData&&this.$bitmapData.$dispose(),this.$bitmapData=null)},i}(t.HashObject);t.Texture=e,__reflect(e.prototype,"egret.Texture")}(egret||(egret={})),function(t){var e=function(t){function e(e,i,r,n){var s=t.call(this)||this;return s.$eventPhase=2,s.$currentTarget=null,s.$target=null,s.$isDefaultPrevented=!1,s.$isPropagationStopped=!1,s.$isPropagationImmediateStopped=!1,s.$type=e,s.$bubbles=!!i,s.$cancelable=!!r,s.data=n,s}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.$type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bubbles",{get:function(){return this.$bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelable",{get:function(){return this.$cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventPhase",{get:function(){return this.$eventPhase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this.$currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.$target},enumerable:!0,configurable:!0}),e.prototype.$setTarget=function(t){return this.$target=t,!0},e.prototype.isDefaultPrevented=function(){return this.$isDefaultPrevented},e.prototype.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},e.prototype.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},e.prototype.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},e.prototype.clean=function(){this.data=this.$currentTarget=null,this.$setTarget(null)},e.dispatchEvent=function(t,i,r,n){void 0===r&&(r=!1);var s=e.create(e,i,r),a=e._getPropertyData(e);void 0!=n&&(a.data=n);var o=t.dispatchEvent(s);return e.release(s),o},e._getPropertyData=function(t){var e=t._props;return e||(e=t._props={}),e},e.create=function(t,e,i,r){var n;if(t.hasOwnProperty("eventPool")&&(n=t.eventPool),n||(n=t.eventPool=[]),n.length){var s=n.pop();return s.$type=e,s.$bubbles=!!i,s.$cancelable=!!r,s.$isDefaultPrevented=!1,s.$isPropagationStopped=!1,s.$isPropagationImmediateStopped=!1,s.$eventPhase=2,s}return new t(e,i,r)},e.release=function(t){t.clean(),Object.getPrototypeOf(t).constructor.eventPool.push(t)},e.ADDED_TO_STAGE="addedToStage",e.REMOVED_FROM_STAGE="removedFromStage",e.ADDED="added",e.REMOVED="removed",e.ENTER_FRAME="enterFrame",e.RENDER="render",e.RESIZE="resize",e.CHANGE="change",e.CHANGING="changing",e.COMPLETE="complete",e.LOOP_COMPLETE="loopComplete",e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e.ENDED="ended",e.ACTIVATE="activate",e.DEACTIVATE="deactivate",e.CLOSE="close",e.CONNECT="connect",e.LEAVE_STAGE="leaveStage",e.SOUND_COMPLETE="soundComplete",e}(t.HashObject);t.Event=e,__reflect(e.prototype,"egret.Event")}(egret||(egret={})),global.DEBUG=!0,global.RELEASE=!1,function(t){t.getString=function(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return t.sys.tr.apply(t.sys,arguments)},t.$error=function(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var n=t.sys.tr.apply(null,arguments);throw t.sys.$errorToFPS("Error #"+e+": "+n),new Error("#"+e+": "+n)},t.$warn=function(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var n=t.sys.tr.apply(null,arguments);t.sys.$warnToFPS("Warning #"+e+": "+n),t.warn("Warning #"+e+": "+n)},t.$markCannotUse=function(e,i,r){Object.defineProperty(e.prototype,i,{get:function(){return t.$warn(1009,t.getQualifiedClassName(e),i),r},set:function(r){t.$error(1009,t.getQualifiedClassName(e),i)},enumerable:!0,configurable:!0})}}(egret||(egret={})),function(t){var e=[],i=Math.PI/180,r=function(r){function n(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=r.call(this)||this;return i.x=t,i.y=e,i}return __extends(n,r),n.release=function(t){t&&e.push(t)},n.create=function(t,i){var r=e.pop();return r||(r=new n),r.setTo(t,i)},Object.defineProperty(n.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),n.prototype.setTo=function(t,e){return this.x=t,this.y=e,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},n.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},n.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},n.prototype.add=function(t){return new n(this.x+t.x,this.y+t.y)},n.interpolate=function(t,e,i){var r=1-i;return new n(t.x*i+e.x*r,t.y*i+e.y*r)},n.prototype.normalize=function(t){if(0!=this.x||0!=this.y){var e=t/this.length;this.x*=e,this.y*=e}},n.prototype.offset=function(t,e){this.x+=t,this.y+=e},n.polar=function(e,r){return new n(e*t.NumberUtils.cos(r/i),e*t.NumberUtils.sin(r/i))},n.prototype.subtract=function(t){return new n(this.x-t.x,this.y-t.y)},n.prototype.toString=function(){return"(x="+this.x+", y="+this.y+")"},n}(t.HashObject);t.Point=r,__reflect(r.prototype,"egret.Point"),t.$TempPoint=new r}(egret||(egret={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$touchChildren=!0,t.$children=[],t}return __extends(i,e),Object.defineProperty(i.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.setChildrenSortMode=function(e){t.nativeRender&&this.$nativeDisplayObject.setChildrenSortMode&&this.$nativeDisplayObject.setChildrenSortMode(e)},i.prototype.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},i.prototype.addChildAt=function(t,e){return((e=0|+e)<0||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},i.prototype.$doAddChild=function(e,r,n){void 0===n&&(n=!0);e==this?t.$error(1005):e instanceof t.DisplayObjectContainer&&e.contains(this)&&t.$error(1004);var s=e.$parent;if(s==this)return this.doSetChildIndex(e,r),e;s&&s.removeChild(e),this.$children.splice(r,0,e),e.$setParent(this),t.nativeRender&&this.$nativeDisplayObject.addChildAt(e.$nativeDisplayObject.id,r);var a=this.$stage;if(a&&e.$onAddToStage(a,this.$nestLevel+1),n&&e.dispatchEventWith(t.Event.ADDED,!0),a)for(var o=i.$EVENT_ADD_TO_STAGE_LIST;o.length;){var h=o.shift();h.$stage&&n&&h.dispatchEventWith(t.Event.ADDED_TO_STAGE)}if(!t.nativeRender&&(e.$maskedObject&&e.$maskedObject.$updateRenderMode(),!this.$cacheDirty)){this.$cacheDirty=!0;var c=this.$parent;c&&!c.$cacheDirty&&(c.$cacheDirty=!0,c.$cacheDirtyUp());var l=this.$maskedObject;l&&!l.$cacheDirty&&(l.$cacheDirty=!0,l.$cacheDirtyUp())}return this.$childAdded(e,r),e},i.prototype.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},i.prototype.getChildAt=function(e){return(e=0|+e)>=0&&e<this.$children.length?this.$children[e]:(t.$error(1007),null)},i.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},i.prototype.getChildByName=function(t){for(var e,i=this.$children,r=i.length,n=0;n<r;n++)if((e=i[n]).name==t)return e;return null},i.prototype.removeChild=function(e){var i=this.$children.indexOf(e);return i>=0?this.$doRemoveChild(i):(t.$error(1006),null)},i.prototype.removeChildAt=function(e){return(e=0|+e)>=0&&e<this.$children.length?this.$doRemoveChild(e):(t.$error(1007),null)},i.prototype.$doRemoveChild=function(e,r){void 0===r&&(r=!0),e=0|+e;var n=this.$children,s=n[e];if(this.$childRemoved(s,e),r&&s.dispatchEventWith(t.Event.REMOVED,!0),this.$stage){s.$onRemoveFromStage();for(var a=i.$EVENT_REMOVE_FROM_STAGE_LIST;a.length>0;){var o=a.shift();r&&o.$hasAddToStage&&(o.$hasAddToStage=!1,o.dispatchEventWith(t.Event.REMOVED_FROM_STAGE)),o.$hasAddToStage=!1,o.$stage=null}}this.$displayList||this.$parentDisplayList;s.$setParent(null);var h=n.indexOf(s);if(-1!=h&&n.splice(h,1),t.nativeRender)this.$nativeDisplayObject.removeChild(s.$nativeDisplayObject.id);else if(s.$maskedObject&&s.$maskedObject.$updateRenderMode(),!this.$cacheDirty){this.$cacheDirty=!0;var c=this.$parent;c&&!c.$cacheDirty&&(c.$cacheDirty=!0,c.$cacheDirtyUp());var l=this.$maskedObject;l&&!l.$cacheDirty&&(l.$cacheDirty=!0,l.$cacheDirtyUp())}return s},i.prototype.setChildIndex=function(t,e){((e=0|+e)<0||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},i.prototype.doSetChildIndex=function(e,i){var r=this.$children.indexOf(e);if(r<0&&t.$error(1006),r!=i)if(this.$childRemoved(e,r),this.$children.splice(r,1),this.$children.splice(i,0,e),this.$childAdded(e,i),t.nativeRender)this.$nativeDisplayObject.removeChild(e.$nativeDisplayObject.id),this.$nativeDisplayObject.addChildAt(e.$nativeDisplayObject.id,i);else if(!this.$cacheDirty){this.$cacheDirty=!0;var n=this.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var s=this.$maskedObject;s&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp())}},i.prototype.swapChildrenAt=function(e,i){i=0|+i,(e=0|+e)>=0&&e<this.$children.length&&i>=0&&i<this.$children.length?this.doSwapChildrenAt(e,i):t.$error(1007)},i.prototype.swapChildren=function(e,i){var r=this.$children.indexOf(e),n=this.$children.indexOf(i);-1==r||-1==n?t.$error(1006):this.doSwapChildrenAt(r,n)},i.prototype.doSwapChildrenAt=function(e,i){if(e>i){var r=i;i=e,e=r}else if(e==i)return;var n=this.$children,s=n[e],a=n[i];if(this.$childRemoved(s,e),this.$childRemoved(a,i),n[e]=a,n[i]=s,this.$childAdded(a,e),this.$childAdded(s,i),t.nativeRender)this.$nativeDisplayObject.swapChild(e,i);else if(!this.$cacheDirty){this.$cacheDirty=!0;var o=this.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var h=this.$maskedObject;h&&!h.$cacheDirty&&(h.$cacheDirty=!0,h.$cacheDirtyUp())}},i.prototype.removeChildren=function(){for(var t=this.$children.length-1;t>=0;t--)this.$doRemoveChild(t)},i.prototype.$childAdded=function(t,e){},i.prototype.$childRemoved=function(t,e){},i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i);var r=this.$children.length;i++;for(var n=0;n<r;n++){var s=this.$children[n];s.$onAddToStage(t,i),s.$maskedObject&&s.$maskedObject.$updateRenderMode()}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,i=t.length,r=0;r<i;r++){t[r].$onRemoveFromStage()}},i.prototype.$measureChildBounds=function(e){var i=this.$children,r=i.length;if(0!=r){for(var n=0,s=0,a=0,o=0,h=!1,c=-1;c<r;c++){var l=void 0;-1==c?l=e:(i[c].getBounds(t.$TempRectangle),i[c].$getMatrix().$transformBounds(t.$TempRectangle),l=t.$TempRectangle),l.isEmpty()||(h?(n=Math.min(n,l.x),s=Math.max(s,l.x+l.width),a=Math.min(a,l.y),o=Math.max(o,l.y+l.height)):(h=!0,s=(n=l.x)+l.width,o=(a=l.y)+l.height))}e.setTo(n,a,s-n,o-a)}},Object.defineProperty(i.prototype,"touchChildren",{get:function(){return this.$getTouchChildren()},set:function(t){this.$setTouchChildren(!!t)},enumerable:!0,configurable:!0}),i.prototype.$getTouchChildren=function(){return this.$touchChildren},i.prototype.$setTouchChildren=function(t){return this.$touchChildren!=t&&(this.$touchChildren=t,!0)},i.prototype.$hitTest=function(t,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*t+r.c*i+r.tx,s=r.b*t+r.d*i+r.ty,a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(n,s))return null;if(this.$mask&&!this.$mask.$hitTest(t,i))return null;for(var o=this.$children,h=!1,c=null,l=o.length-1;l>=0;l--){var u=o[l];if(!u.$maskedObject&&(c=u.$hitTest(t,i))){if(h=!0,c.$touchEnabled)break;c=null}}return c?this.$touchChildren?c:this:h?this:e.prototype.$hitTest.call(this,t,i)},i.prototype._sortChildrenFunc=function(t,e){return t.zIndex===e.zIndex?t.$lastSortedIndex-e.$lastSortedIndex:t.zIndex-e.zIndex},i.prototype.sortChildren=function(){e.prototype.sortChildren.call(this),this.$sortDirty=!1;for(var t=!1,i=this.$children,r=null,n=0,s=i.length;n<s;++n)(r=i[n]).$lastSortedIndex=n,t||0===r.zIndex||(t=!0);t&&i.length>1&&i.sort(this._sortChildrenFunc)},i.$EVENT_ADD_TO_STAGE_LIST=[],i.$EVENT_REMOVE_FROM_STAGE_LIST=[],i}(t.DisplayObject);t.DisplayObjectContainer=e,__reflect(e.prototype,"egret.DisplayObjectContainer")}(egret||(egret={})),function(t){var e=function(e){function i(i){var r=e.call(this)||this;return r._bitmapX=0,r._bitmapY=0,r._textureMap=t.createMap(),r.$texture=i,r._bitmapX=i.$bitmapX-i.$offsetX,r._bitmapY=i.$bitmapY-i.$offsetY,r}return __extends(i,e),i.prototype.getTexture=function(t){return this._textureMap[t]},i.prototype.createTexture=function(e,i,r,n,s,a,o,h,c){void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=a+n),void 0===c&&(c=o+s);var l=new t.Texture;return l.disposeBitmapData=!1,l.$bitmapData=this.$texture.$bitmapData,l.$initData(this._bitmapX+i,this._bitmapY+r,n,s,a,o,h,c,this.$texture.$sourceWidth,this.$texture.$sourceHeight),this._textureMap[e]=l,l},i.prototype.dispose=function(){this.$texture&&this.$texture.dispose()},i}(t.HashObject);t.SpriteSheet=e,__reflect(e.prototype,"egret.SpriteSheet")}(egret||(egret={})),function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(egret||(egret={})),function(t){!function(e){e.tr=function(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var n=t.$locale_strings[t.$language][e];if(!n)return"{"+e+"}";for(var s=i.length,a=0;a<s;a++)n=n.replace("{"+a+"}",i[a]);return n}}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){var e=function(e){function i(r){var n=e.call(this)||this;return n.$texture=null,n.$bitmapData=null,n.$bitmapX=0,n.$bitmapY=0,n.$bitmapWidth=0,n.$bitmapHeight=0,n.$offsetX=0,n.$offsetY=0,n.$textureWidth=0,n.$textureHeight=0,n.$sourceWidth=0,n.$sourceHeight=0,n.$smoothing=i.defaultSmoothing,n.$explicitBitmapWidth=NaN,n.$explicitBitmapHeight=NaN,n.$scale9Grid=null,n.$fillMode="scale",n._pixelHitTest=!1,n.$renderNode=new t.sys.NormalBitmapNode,n.$setTexture(r),r&&(n.$renderNode.rotated=r.$rotated),n}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(1)},i.prototype.$onAddToStage=function(i,r){e.prototype.$onAddToStage.call(this,i,r);var n=this.$texture;n&&n.$bitmapData&&t.BitmapData.$addDisplayObject(this,n.$bitmapData)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);var i=this.$texture;i&&t.BitmapData.$removeDisplayObject(this,i.$bitmapData)},Object.defineProperty(i.prototype,"texture",{get:function(){return this.$texture},set:function(t){this.$setTexture(t),t&&this.$renderNode&&(this.$renderNode.rotated=t.$rotated)},enumerable:!0,configurable:!0}),i.prototype.$setTexture=function(e){var i=this.$texture;if(e==i)return!1;if(this.$texture=e,!e){i&&t.BitmapData.$removeDisplayObject(this,i.$bitmapData),this.setImageData(null,0,0,0,0,0,0,0,0,0,0),this.$renderDirty=!0;var r=this.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=this.$maskedObject;return n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp()),t.nativeRender&&this.setBitmapDataToWasm(null),!0}if(this.$refreshImageData(),this.$stage){if(i&&i.$bitmapData){if(i.$bitmapData.hashCode==(e.$bitmapData?e.$bitmapData.hashCode:-1)){this.$renderDirty=!0;var s=this.$parent;s&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp());var a=this.$maskedObject;return a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp()),!0}t.BitmapData.$removeDisplayObject(this,i.$bitmapData)}t.BitmapData.$addDisplayObject(this,e.$bitmapData)}this.$renderDirty=!0;var o=this.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var h=this.$maskedObject;return h&&!h.$cacheDirty&&(h.$cacheDirty=!0,h.$cacheDirtyUp()),!0},i.prototype.$setBitmapData=function(t){this.$setTexture(t)},i.prototype.setBitmapDataToWasm=function(t){this.$nativeDisplayObject.setTexture(t)},i.prototype.$refreshImageData=function(){var e=this.$texture;e?(t.nativeRender&&this.setBitmapDataToWasm(e),this.setImageData(e.$bitmapData,e.$bitmapX,e.$bitmapY,e.$bitmapWidth,e.$bitmapHeight,e.$offsetX,e.$offsetY,e.$getTextureWidth(),e.$getTextureHeight(),e.$sourceWidth,e.$sourceHeight)):t.nativeRender&&this.setBitmapDataToWasm(null)},i.prototype.setImageData=function(t,e,i,r,n,s,a,o,h,c,l){this.$bitmapData=t,this.$bitmapX=e,this.$bitmapY=i,this.$bitmapWidth=r,this.$bitmapHeight=n,this.$offsetX=s,this.$offsetY=a,this.$textureWidth=o,this.$textureHeight=h,this.$sourceWidth=c,this.$sourceHeight=l},Object.defineProperty(i.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$setScale9Grid(t)},enumerable:!0,configurable:!0}),i.prototype.$setScale9Grid=function(e){if(this.$scale9Grid=e,this.$renderDirty=!0,t.nativeRender)e?this.$nativeDisplayObject.setScale9Grid(e.x,e.y,e.width,e.height):this.$nativeDisplayObject.setScale9Grid(0,0,-1,-1);else{var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(i.prototype,"fillMode",{get:function(){return this.$fillMode},set:function(t){this.$setFillMode(t)},enumerable:!0,configurable:!0}),i.prototype.$setFillMode=function(e){if(e==this.$fillMode)return!1;if(this.$fillMode=e,t.nativeRender)this.$nativeDisplayObject.setBitmapFillMode(this.$fillMode);else{this.$renderDirty=!0;var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},Object.defineProperty(i.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(e){if(e!=this.$smoothing&&(this.$smoothing=e,this.$renderNode.smoothing=e,!t.nativeRender)){var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),i.prototype.$setWidth=function(e){if(e<0||e==this.$explicitBitmapWidth)return!1;if(this.$explicitBitmapWidth=e,this.$renderDirty=!0,t.nativeRender)this.$nativeDisplayObject.setWidth(e);else{var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},i.prototype.$setHeight=function(e){if(e<0||e==this.$explicitBitmapHeight)return!1;if(this.$explicitBitmapHeight=e,this.$renderDirty=!0,t.nativeRender)this.$nativeDisplayObject.setHeight(e);else{var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},i.prototype.$getWidth=function(){return isNaN(this.$explicitBitmapWidth)?this.$getContentBounds().width:this.$explicitBitmapWidth},i.prototype.$getHeight=function(){return isNaN(this.$explicitBitmapHeight)?this.$getContentBounds().height:this.$explicitBitmapHeight},i.prototype.$measureContentBounds=function(t){if(this.$bitmapData){var e=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight;t.setTo(0,0,e,i)}else{e=isNaN(this.$explicitBitmapWidth)?0:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?0:this.$explicitBitmapHeight;t.setTo(0,0,e,i)}},i.prototype.$updateRenderNode=function(){if(this.$texture){var e=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight,r=this.scale9Grid||this.$texture.scale9Grid;r?(this.$renderNode instanceof t.sys.NormalBitmapNode&&(this.$renderNode=new t.sys.BitmapNode),t.sys.BitmapNode.$updateTextureDataWithScale9Grid(this.$renderNode,this.$bitmapData,r,this.$bitmapX,this.$bitmapY,this.$bitmapWidth,this.$bitmapHeight,this.$offsetX,this.$offsetY,this.$textureWidth,this.$textureHeight,e,i,this.$sourceWidth,this.$sourceHeight,this.$smoothing)):(this.fillMode==t.BitmapFillMode.REPEAT&&this.$renderNode instanceof t.sys.NormalBitmapNode&&(this.$renderNode=new t.sys.BitmapNode),t.sys.BitmapNode.$updateTextureData(this.$renderNode,this.$bitmapData,this.$bitmapX,this.$bitmapY,this.$bitmapWidth,this.$bitmapHeight,this.$offsetX,this.$offsetY,this.$textureWidth,this.$textureHeight,e,i,this.$sourceWidth,this.$sourceHeight,this.$fillMode,this.$smoothing))}},Object.defineProperty(i.prototype,"pixelHitTest",{get:function(){return this._pixelHitTest},set:function(t){this._pixelHitTest=!!t},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(t,i){var r=e.prototype.$hitTest.call(this,t,i);r&&this._pixelHitTest&&(this.hitTestPoint(t,i,!0)||(r=null));return r},i.defaultSmoothing=!0,i}(t.DisplayObject);t.Bitmap=e,__reflect(e.prototype,"egret.Bitmap")}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){this.type=0,this.drawData=[],this.renderCount=0}return t.prototype.cleanBeforeRender=function(){this.drawData.length=0,this.renderCount=0},t.prototype.$getRenderCount=function(){return this.renderCount},t}();t.RenderNode=e,__reflect(e.prototype,"egret.sys.RenderNode")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){this.type=0,this.$commands=[],this.$data=[],this.commandPosition=0,this.dataPosition=0,this.$lastX=0,this.$lastY=0}return t.prototype.moveTo=function(t,e){this.$commands[this.commandPosition++]=1;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},t.prototype.lineTo=function(t,e){this.$commands[this.commandPosition++]=2;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},t.prototype.curveTo=function(t,e,i,r){this.$commands[this.commandPosition++]=3;var n=this.dataPosition;this.$data[n++]=t,this.$data[n++]=e,this.$data[n++]=i,this.$data[n++]=r,this.dataPosition=n},t.prototype.cubicCurveTo=function(t,e,i,r,n,s){this.$commands[this.commandPosition++]=4;var a=this.dataPosition;this.$data[a++]=t,this.$data[a++]=e,this.$data[a++]=i,this.$data[a++]=r,this.$data[a++]=n,this.$data[a++]=s,this.dataPosition=a},t.prototype.drawRect=function(t,e,i,r){var n=t+i,s=e+r;this.moveTo(t,e),this.lineTo(n,e),this.lineTo(n,s),this.lineTo(t,s),this.lineTo(t,e)},t.prototype.drawRoundRect=function(t,e,i,r,n,s){var a=.5*n|0,o=s?.5*s|0:a;if(a&&o){var h=.5*i,c=.5*r;if(a>h&&(a=h),o>c&&(o=c),h!==a||c!==o){var l=t+i,u=e+r,p=t+a,d=l-a,f=e+o,$=u-o;this.moveTo(l,$),this.curveTo(l,u,d,u),this.lineTo(p,u),this.curveTo(t,u,t,$),this.lineTo(t,f),this.curveTo(t,e,p,e),this.lineTo(d,e),this.curveTo(l,e,l,f),this.lineTo(l,$)}else a===o?this.drawCircle(t+a,e+o,a):this.drawEllipse(t,e,2*a,2*o)}else this.drawRect(t,e,i,r)},t.prototype.drawCircle=function(t,e,i){this.arcToBezier(t,e,i,i,0,2*Math.PI)},t.prototype.drawEllipse=function(t,e,i,r){var n=.5*i,s=.5*r;t+=n,e+=s,this.arcToBezier(t,e,n,s,0,2*Math.PI)},t.prototype.drawArc=function(t,e,i,r,n,s){s?n>=r&&(n-=2*Math.PI):n<=r&&(n+=2*Math.PI),this.arcToBezier(t,e,i,i,r,n,s)},t.prototype.arcToBezier=function(t,e,i,r,n,s,a){var o=.5*Math.PI,h=n,c=h;a?(c+=-o-h%o)<s&&(c=s):(c+=o-h%o)>s&&(c=s);var l=t+Math.cos(h)*i,u=e+Math.sin(h)*r;this.$lastX==l&&this.$lastY==u||this.moveTo(l,u);for(var p=Math.cos(h),d=Math.sin(h),f=0;f<4;f++){var $=c-h,g=4*Math.tan($/4)/3,y=l-d*g*i,v=u+p*g*r,b=(l=t+(p=Math.cos(c))*i)+(d=Math.sin(c))*g*i,m=(u=e+d*r)-p*g*r;if(this.cubicCurveTo(y,v,b,m,l,u),c===s)break;h=c,a?(c=h-o)<s&&(c=s):(c=h+o)>s&&(c=s)}},t}();t.Path2D=e,__reflect(e.prototype,"egret.sys.Path2D")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){t.fontMapping={}}(egret||(egret={})),function(t){t.createMap=function(){var t=Object.create(null);return t.__v8__=void 0,delete t.__v8__,t}}(egret||(egret={})),function(t){var e=function(t){function e(e,i,r,n,s,a,o,h){void 0===e&&(e=16711680),void 0===i&&(i=1),void 0===r&&(r=6),void 0===n&&(n=6),void 0===s&&(s=2),void 0===a&&(a=1),void 0===o&&(o=!1),void 0===h&&(h=!1);var c=t.call(this)||this,l=c;return l.type="glow",l.$color=e,l.$blue=255&e,l.$green=(65280&e)>>8,l.$red=e>>16,l.$alpha=i,l.$blurX=r,l.$blurY=n,l.$strength=s,l.$quality=a,l.$inner=o,l.$knockout=h,l.$uniforms.color={x:c.$red/255,y:c.$green/255,z:c.$blue/255,w:1},l.$uniforms.alpha=i,l.$uniforms.blurX=r,l.$uniforms.blurY=n,l.$uniforms.strength=s,l.$uniforms.inner=o?1:0,l.$uniforms.knockout=h?0:1,l.$uniforms.dist=0,l.$uniforms.angle=0,l.$uniforms.hideObject=0,l.onPropertyChange(),c}return __extends(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this.$color},set:function(t){this.$color!=t&&(this.$color=t,this.$blue=255&t,this.$green=(65280&t)>>8,this.$red=t>>16,this.$uniforms.color.x=this.$red/255,this.$uniforms.color.y=this.$green/255,this.$uniforms.color.z=this.$blue/255)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$alpha!=t&&(this.$alpha=t,this.$uniforms.alpha=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){this.$blurX!=t&&(this.$blurX=t,this.$uniforms.blurX=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){this.$blurY!=t&&(this.$blurY=t,this.$uniforms.blurY=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this.$strength},set:function(t){this.$strength!=t&&(this.$strength=t,this.$uniforms.strength=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.$quality},set:function(t){this.$quality!=t&&(this.$quality=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inner",{get:function(){return this.$inner},set:function(t){this.$inner!=t&&(this.$inner=t,this.$uniforms.inner=t?1:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this.$knockout},set:function(t){this.$knockout!=t&&(this.$knockout=t,this.$uniforms.knockout=t?0:1)},enumerable:!0,configurable:!0}),e.prototype.$toJson=function(){return'{"color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+"}"},e.prototype.updatePadding=function(){this.paddingLeft=this.blurX,this.paddingRight=this.blurX,this.paddingTop=this.blurY,this.paddingBottom=this.blurY},e}(t.Filter);t.GlowFilter=e,__reflect(e.prototype,"egret.GlowFilter")}(egret||(egret={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$stageWidth=0,i.$stageHeight=0,i.$scaleMode=t.StageScaleMode.SHOW_ALL,i.$orientation=t.OrientationMode.AUTO,i.$maxTouches=99,i.$stage=i,i.$nestLevel=1,i}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(13)},Object.defineProperty(i.prototype,"frameRate",{get:function(){return t.ticker.$frameRate},set:function(e){t.ticker.$setFrameRate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageWidth",{get:function(){return this.$stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageHeight",{get:function(){return this.$stageHeight},enumerable:!0,configurable:!0}),i.prototype.invalidate=function(){t.sys.$invalidateRenderFlag=!0},i.prototype.registerImplementation=function(e,i){t.registerImplementation(e,i)},i.prototype.getImplementation=function(e){return t.getImplementation(e)},Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this.$scaleMode},set:function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"orientation",{get:function(){return this.$orientation},set:function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textureScaleFactor",{get:function(){return t.$TextureScaleFactor},set:function(e){t.$TextureScaleFactor=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxTouches",{get:function(){return this.$maxTouches},set:function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},i}(t.DisplayObjectContainer);t.Stage=e,__reflect(e.prototype,"egret.Stage"),t.$markCannotUse(e,"alpha",1),t.$markCannotUse(e,"visible",!0),t.$markCannotUse(e,"x",0),t.$markCannotUse(e,"y",0),t.$markCannotUse(e,"scaleX",1),t.$markCannotUse(e,"scaleY",1),t.$markCannotUse(e,"rotation",0),t.$markCannotUse(e,"cacheAsBitmap",!1),t.$markCannotUse(e,"scrollRect",null),t.$markCannotUse(e,"filters",null),t.$markCannotUse(e,"blendMode",null),t.$markCannotUse(e,"touchEnabled",!0),t.$markCannotUse(e,"matrix",null)}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NORMAL="normal",t.ADD="add",t.ERASE="erase",t}();t.BlendMode=e,__reflect(e.prototype,"egret.BlendMode")}(egret||(egret={})),function(t){!function(t){for(var e=["normal","add","erase"],i={},r=e.length,n=0;n<r;n++){var s=e[n];i[s]=n}t.blendModeToNumber=function(t){var e=i[t];return void 0===e?0:e},t.numberToBlendMode=function(t){var i=e[t];return void 0===i?"normal":i}}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){t.ChildrenSortMode={DEFAULT:"default",INCREASE_Y:"increaseY",DECREASE_Y:"decreaseY"}}(egret||(egret={})),function(t){t.CapsStyle={NONE:"none",ROUND:"round",SQUARE:"square"}}(egret||(egret={})),function(t){var e=function(){function e(){}return e.compileProgram=function(i,r,n){var s=e.compileFragmentShader(i,n),a=e.compileVertexShader(i,r),o=i.createProgram();return i.attachShader(o,a),i.attachShader(o,s),i.linkProgram(o),i.getProgramParameter(o,i.LINK_STATUS)||t.$warn(1020),o},e.compileFragmentShader=function(t,i){return e._compileShader(t,i,t.FRAGMENT_SHADER)},e.compileVertexShader=function(t,i){return e._compileShader(t,i,t.VERTEX_SHADER)},e._compileShader=function(t,e,i){var r=t.createShader(i);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:null},e.checkCanUseWebGL=function(){if(void 0==e.canUseWebGL)try{var t=document.createElement("canvas");e.canUseWebGL=!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){e.canUseWebGL=!1}return e.canUseWebGL},e.deleteWebGLTexture=function(e){if(e)if(e[t.engine_default_empty_texture])console.warn("deleteWebGLTexture:"+t.engine_default_empty_texture);else{var i=e[t.glContext];i?i.deleteTexture(e):console.error("deleteWebGLTexture gl = "+i)}},e.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255,n=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(n=n*e+.5|0)},e}();t.WebGLUtils=e,__reflect(e.prototype,"egret.WebGLUtils")}(egret||(egret={})),function(t){var e=function(t){function e(e,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),t.call(this,e,i,r)||this}return __extends(e,t),e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e}(t.Event);t.FocusEvent=e,__reflect(e.prototype,"egret.FocusEvent")}(egret||(egret={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.PERMISSION_DENIED="permissionDenied",e.UNAVAILABLE="unavailable",e}(t.Event);t.GeolocationEvent=e,__reflect(e.prototype,"egret.GeolocationEvent")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1);var n=e.call(this,t,i,r)||this;return n._status=0,n}return __extends(i,e),Object.defineProperty(i.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),i.dispatchHTTPStatusEvent=function(e,r){var n=t.Event.create(i,i.HTTP_STATUS);n._status=r;var s=e.dispatchEvent(n);return t.Event.release(n),s},i.HTTP_STATUS="httpStatus",i}(t.Event);t.HTTPStatusEvent=e,__reflect(e.prototype,"egret.HTTPStatusEvent")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),e.call(this,t,i,r)||this}return __extends(i,e),i.dispatchIOErrorEvent=function(e){var r=t.Event.create(i,i.IO_ERROR),n=e.dispatchEvent(r);return t.Event.release(r),n},i.IO_ERROR="ioError",i}(t.Event);t.IOErrorEvent=e,__reflect(e.prototype,"egret.IOErrorEvent")}(egret||(egret={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);t.MotionEvent=e,__reflect(e.prototype,"egret.MotionEvent")}(egret||(egret={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);t.OrientationEvent=e,__reflect(e.prototype,"egret.OrientationEvent")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,r,n,s){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===n&&(n=0),void 0===s&&(s=0);var a=e.call(this,t,i,r)||this;return a.bytesLoaded=0,a.bytesTotal=0,a.bytesLoaded=n,a.bytesTotal=s,a}return __extends(i,e),i.dispatchProgressEvent=function(e,r,n,s){void 0===n&&(n=0),void 0===s&&(s=0);var a=t.Event.create(i,r);a.bytesLoaded=n,a.bytesTotal=s;var o=e.dispatchEvent(a);return t.Event.release(a),o},i.PROGRESS="progress",i.SOCKET_DATA="socketData",i}(t.Event);t.ProgressEvent=e,__reflect(e.prototype,"egret.ProgressEvent")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),e.call(this,t,i,r)||this}return __extends(i,e),i.dispatchStageOrientationEvent=function(e,r){var n=t.Event.create(i,r),s=e.dispatchEvent(n);return t.Event.release(n),s},i.ORIENTATION_CHANGE="orientationChange",i}(t.Event);t.StageOrientationEvent=e,__reflect(e.prototype,"egret.StageOrientationEvent")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,r,n){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===n&&(n="");var s=e.call(this,t,i,r)||this;return s.text=n,s}return __extends(i,e),i.dispatchTextEvent=function(e,r,n){var s=t.Event.create(i,r);s.text=n;var a=e.dispatchEvent(s);return t.Event.release(s),a},i.LINK="link",i}(t.Event);t.TextEvent=e,__reflect(e.prototype,"egret.TextEvent")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,r){return e.call(this,t,i,r)||this}return __extends(i,e),i.prototype.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},i.dispatchTimerEvent=function(e,r,n,s){var a=t.Event.create(i,r,n,s),o=e.dispatchEvent(a);return t.Event.release(a),o},i.TIMER="timer",i.TIMER_COMPLETE="timerComplete",i}(t.Event);t.TimerEvent=e,__reflect(e.prototype,"egret.TimerEvent")}(egret||(egret={})),function(t){var e=function(){return function(){}}();t.CompressedTextureData=e,__reflect(e.prototype,"egret.CompressedTextureData"),t.etc_alpha_mask="etc_alpha_mask",t.engine_default_empty_texture="engine_default_empty_texture",t.is_compressed_texture="is_compressed_texture",t.glContext="glContext",t.UNPACK_PREMULTIPLY_ALPHA_WEBGL="UNPACK_PREMULTIPLY_ALPHA_WEBGL";var i=function(e){function i(i){var r=e.call(this)||this;if(r.format="image",r.$deleteSource=!0,r.compressedTextureData=[],r.debugCompressedTextureURL="",r.etcAlphaMask=null,t.nativeRender){var n=new egret_native.NativeBitmapData;n.$init(),r.$nativeBitmapData=n}return r.source=i,r.source=i,r.source&&(r.width=+i.width,r.height=+i.height),r}return __extends(i,e),Object.defineProperty(i.prototype,"source",{get:function(){return this.$source},set:function(e){this.$source=e,t.nativeRender&&egret_native.NativeDisplayObject.setSourceToNativeBitmapData(this.$nativeBitmapData,e)},enumerable:!0,configurable:!0}),i.create=function(e,r,n){var s="",a="image/png";"/"===(s="arraybuffer"===e?t.Base64Util.encode(r):r).charAt(0)?a="image/jpeg":"R"===s.charAt(0)?a="image/gif":"i"===s.charAt(0)&&(a="image/png");var o=new Image;o.src="data:"+a+";base64,"+s,o.crossOrigin="*";var h=new i(o);return o.onload=function(){o.onload=void 0,h.source=o,h.height=o.height,h.width=o.width,n&&n(h)},h},i.prototype.$dispose=function(){"webgl"==t.Capabilities.renderMode&&this.webGLTexture&&(t.WebGLUtils.deleteWebGLTexture(this.webGLTexture),this.webGLTexture=null),this.source&&this.source.dispose&&this.source.dispose(),this.source&&this.source.src&&(this.source.src=""),this.source=null,this.clearCompressedTextureData(),this.debugCompressedTextureURL="",this.etcAlphaMask=null,t.nativeRender&&egret_native.NativeDisplayObject.disposeNativeBitmapData(this.$nativeBitmapData),i.$dispose(this)},i.$addDisplayObject=function(t,e){if(e){var r=e.hashCode;if(r)if(i._displayList[r]){var n=i._displayList[r];n.indexOf(t)<0&&n.push(t)}else i._displayList[r]=[t]}},i.$removeDisplayObject=function(t,e){if(e){var r=e.hashCode;if(r&&i._displayList[r]){var n=i._displayList[r],s=n.indexOf(t);s>=0&&n.splice(s,1)}}},i.$invalidate=function(e){if(e){var r=e.hashCode;if(r&&i._displayList[r])for(var n=i._displayList[r],s=0;s<n.length;s++){n[s]instanceof t.Bitmap&&n[s].$refreshImageData();var a=n[s];a.$renderDirty=!0;var o=a.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var h=a.$maskedObject;h&&!h.$cacheDirty&&(h.$cacheDirty=!0,h.$cacheDirtyUp())}}},i.$dispose=function(e){if(e){var r=e.hashCode;if(r&&i._displayList[r]){for(var n=0,s=i._displayList[r];n<s.length;n++){var a=s[n];a instanceof t.Bitmap&&(a.$bitmapData=null),a.$renderDirty=!0;var o=a.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var h=a.$maskedObject;h&&!h.$cacheDirty&&(h.$cacheDirty=!0,h.$cacheDirtyUp())}delete i._displayList[r]}}},i.prototype._getCompressedTextureData=function(t,e){var i=this.compressedTextureData[t];return i?i[e]:null},i.prototype.getCompressed2dTextureData=function(){return this._getCompressedTextureData(0,0)},i.prototype.hasCompressed2d=function(){return!!this.getCompressed2dTextureData()},i.prototype.clearCompressedTextureData=function(){this.compressedTextureData.length=0},i._displayList=t.createMap(),i}(t.HashObject);t.BitmapData=i,__reflect(i.prototype,"egret.BitmapData")}(egret||(egret={})),function(t){var e=new t.Point,i=function(i){function r(t,e,r,n,s,a){var o=i.call(this,t,e,r)||this;return o.targetChanged=!0,o.touchDown=!1,o.$initTo(n,s,a),o}return __extends(r,i),r.prototype.$initTo=function(t,e,i){this.touchPointID=+i||0,this.$stageX=+t||0,this.$stageY=+e||0},Object.defineProperty(r.prototype,"stageX",{get:function(){return this.$stageX},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stageY",{get:function(){return this.$stageY},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"localX",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localX},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"localY",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localY},enumerable:!0,configurable:!0}),r.prototype.getLocalXY=function(){this.targetChanged=!1,this.$target.$getInvertedConcatenatedMatrix().transformPoint(this.$stageX,this.$stageY,e),this._localX=e.x,this._localY=e.y},r.prototype.$setTarget=function(t){return this.$target=t,this.targetChanged=!!t,!0},r.prototype.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},r.dispatchTouchEvent=function(e,i,n,s,a,o,h,c){if(void 0===c&&(c=!1),!n&&!e.hasEventListener(i))return!0;var l=t.Event.create(r,i,n,s);l.$initTo(a,o,h),l.touchDown=c;var u=e.dispatchEvent(l);return t.Event.release(l),u},r.TOUCH_MOVE="touchMove",r.TOUCH_BEGIN="touchBegin",r.TOUCH_END="touchEnd",r.TOUCH_CANCEL="touchCancel",r.TOUCH_TAP="touchTap",r.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",r}(t.Event);t.TouchEvent=i,__reflect(i.prototype,"egret.TouchEvent")}(egret||(egret={})),egret||(egret={}),function(t){var e=function(e){function n(t,n,s){void 0===t&&(t=4),void 0===n&&(n=4),void 0===s&&(s=1);var a=e.call(this)||this,o=a;return o.type="blur",o.$blurX=t,o.$blurY=n,o.$quality=s,o.blurXFilter=new i(t),o.blurYFilter=new r(n),o.onPropertyChange(),a}return __extends(n,e),Object.defineProperty(n.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){this.$blurX!=t&&(this.$blurX=t,this.blurXFilter.blurX=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){this.$blurY!=t&&(this.$blurY=t,this.blurYFilter.blurY=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),n.prototype.$toJson=function(){return'{"blurX": '+this.$blurX+', "blurY": '+this.$blurY+', "quality": 1}'},n.prototype.updatePadding=function(){this.paddingLeft=this.blurX,this.paddingRight=this.blurX,this.paddingTop=this.blurY,this.paddingBottom=this.blurY},n.prototype.onPropertyChange=function(){this.updatePadding(),t.nativeRender&&(egret_native.NativeDisplayObject.setFilterPadding(this.blurXFilter.$id,0,0,this.paddingLeft,this.paddingRight),egret_native.NativeDisplayObject.setFilterPadding(this.blurYFilter.$id,this.paddingTop,this.paddingBottom,0,0),egret_native.NativeDisplayObject.setDataToFilter(this))},n}(t.Filter);t.BlurFilter=e,__reflect(e.prototype,"egret.BlurFilter");var i=function(e){function i(i){void 0===i&&(i=4);var r=e.call(this)||this;return t.nativeRender?r.type="blur":r.type="blurX",r.$uniforms.blur={x:i,y:0},r.onPropertyChange(),r}return __extends(i,e),Object.defineProperty(i.prototype,"blurX",{get:function(){return this.$uniforms.blur.x},set:function(t){this.$uniforms.blur.x=t},enumerable:!0,configurable:!0}),i}(t.Filter);__reflect(i.prototype,"BlurXFilter",["egret.IBlurXFilter"]);var r=function(e){function i(i){void 0===i&&(i=4);var r=e.call(this)||this;return t.nativeRender?r.type="blur":r.type="blurY",r.$uniforms.blur={x:0,y:i},r.onPropertyChange(),r}return __extends(i,e),Object.defineProperty(i.prototype,"blurY",{get:function(){return this.$uniforms.blur.y},set:function(t){this.$uniforms.blur.y=t},enumerable:!0,configurable:!0}),i}(t.Filter);__reflect(r.prototype,"BlurYFilter",["egret.IBlurYFilter"])}(egret||(egret={})),function(t){var e=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.$matrix=[],i.matrix2=[],i.type="colorTransform",i.$uniforms.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i.$uniforms.colorAdd={x:0,y:0,z:0,w:0},i.setMatrix(e),i.onPropertyChange(),i}return __extends(e,t),Object.defineProperty(e.prototype,"matrix",{get:function(){for(var t=0;t<20;t++)this.matrix2[t]=this.$matrix[t];return this.matrix2},set:function(t){this.setMatrix(t)},enumerable:!0,configurable:!0}),e.prototype.setMatrix=function(t){if(t)for(var e=0;e<20;e++)this.$matrix[e]=t[e];else for(e=0;e<20;e++)this.$matrix[e]=0==e||6==e||12==e||18==e?1:0;for(var i=this.$matrix,r=this.$uniforms.matrix,n=this.$uniforms.colorAdd,s=(e=0,0);e<i.length;e++)4===e?n.x=i[e]/255:9===e?n.y=i[e]/255:14===e?n.z=i[e]/255:19===e?n.w=i[e]/255:(r[s]=i[e],s++);this.onPropertyChange()},e.prototype.$toJson=function(){return'{"matrix": ['+this.$matrix.toString()+"]}"},e}(t.Filter);t.ColorMatrixFilter=e,__reflect(e.prototype,"egret.ColorMatrixFilter")}(egret||(egret={})),function(t){var e,i={},r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),s=0,a=function(){for(var t=0;t<36;t++)8===t||13===t||18===t||23===t?n[t]="-":14===t?n[t]="4":(s<=2&&(s=33554432+16777216*Math.random()|0),e=15&s,s>>=4,n[t]=r[19===t?3&e|8:e]);return n.join("")},o=function(e){function r(t,r,n){void 0===n&&(n={});var s=e.call(this)||this;s.$padding=0,s.$vertexSrc=t,s.$fragmentSrc=r;var o=t+r;return i[o]||(i[o]=a()),s.$shaderKey=i[o],s.$uniforms=n,s.type="custom",s}return __extends(r,e),Object.defineProperty(r.prototype,"padding",{get:function(){return this.$padding},set:function(t){this.$padding!=t&&(this.$padding=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.$uniforms},enumerable:!0,configurable:!0}),r.prototype.onPropertyChange=function(){if(t.nativeRender){egret_native.NativeDisplayObject.setFilterPadding(this.$id,this.$padding,this.$padding,this.$padding,this.$padding),egret_native.NativeDisplayObject.setDataToFilter(this)}},r}(t.Filter);t.CustomFilter=o,__reflect(o.prototype,"egret.CustomFilter")}(egret||(egret={})),function(t){var e=function(e){function i(t,i,r,n,s,a,o,h,c,l,u){void 0===t&&(t=4),void 0===i&&(i=45),void 0===r&&(r=0),void 0===n&&(n=1),void 0===s&&(s=4),void 0===a&&(a=4),void 0===o&&(o=1),void 0===h&&(h=1),void 0===c&&(c=!1),void 0===l&&(l=!1),void 0===u&&(u=!1);var p=e.call(this,r,n,s,a,o,h,c,l)||this,d=p;return d.$distance=t,d.$angle=i,d.$hideObject=u,d.$uniforms.dist=t,d.$uniforms.angle=i/180*Math.PI,d.$uniforms.hideObject=u?1:0,d.onPropertyChange(),p}return __extends(i,e),Object.defineProperty(i.prototype,"distance",{get:function(){return this.$distance},set:function(t){this.$distance!=t&&(this.$distance=t,this.$uniforms.dist=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"angle",{get:function(){return this.$angle},set:function(t){this.$angle!=t&&(this.$angle=t,this.$uniforms.angle=t/180*Math.PI,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hideObject",{get:function(){return this.$hideObject},set:function(t){this.$hideObject!=t&&(this.$hideObject=t,this.$uniforms.hideObject=t?1:0)},enumerable:!0,configurable:!0}),i.prototype.$toJson=function(){return'{"distance": '+this.$distance+', "angle": '+this.$angle+', "color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+', "hideObject": '+this.$hideObject+"}"},i.prototype.updatePadding=function(){this.paddingLeft=this.blurX,this.paddingRight=this.blurX,this.paddingTop=this.blurY,this.paddingBottom=this.blurY;var e=this.distance||0,i=this.angle||0,r=0,n=0;0!=e&&(r=(r=e*t.NumberUtils.cos(i))>0?Math.ceil(r):Math.floor(r),n=(n=e*t.NumberUtils.sin(i))>0?Math.ceil(n):Math.floor(n),this.paddingLeft+=r,this.paddingRight+=r,this.paddingTop+=n,this.paddingBottom+=n)},i}(t.GlowFilter);t.DropShadowFilter=e,__reflect(e.prototype,"egret.DropShadowFilter")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LINEAR="linear",t.RADIAL="radial",t}();t.GradientType=e,__reflect(e.prototype,"egret.GradientType")}(egret||(egret={})),function(t){function e(t){return(t%=2*Math.PI)<0&&(t+=2*Math.PI),t}function i(t,e){for(var i=[],n=0;n<e;n++){var s=r(t,n/e);s&&i.push(s)}return i}function r(e,i){var r=0,a=0,o=0,h=e.length;if(h/2==3){var c=e[r++],l=e[r++],u=e[r++],p=e[r++],d=e[r++],f=e[r++];a=n(c,u,d,i),o=n(l,p,f,i)}else if(h/2==4){c=e[r++],l=e[r++],u=e[r++],p=e[r++],d=e[r++],f=e[r++];var $=e[r++],g=e[r++];a=s(c,u,d,$,i),o=s(l,p,f,g,i)}return t.Point.create(a,o)}function n(t,e,i,r){return Math.pow(1-r,2)*t+2*r*(1-r)*e+Math.pow(r,2)*i}function s(t,e,i,r,n){return Math.pow(1-n,3)*t+3*n*Math.pow(1-n,2)*e+3*(1-n)*Math.pow(n,2)*i+Math.pow(n,3)*r}var a=function(r){function n(){var e=r.call(this)||this;return e.lastX=0,e.lastY=0,e.fillPath=null,e.strokePath=null,e.topLeftStrokeWidth=0,e.bottomRightStrokeWidth=0,e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0,e.includeLastPosition=!0,e.$renderNode=new t.sys.GraphicsNode,e}return __extends(n,r),n.prototype.$setTarget=function(e){this.$targetDisplay&&(this.$targetDisplay.$renderNode=null),e.$renderNode=this.$renderNode,this.$targetDisplay=e,this.$targetIsSprite=e instanceof t.Sprite},n.prototype.setStrokeWidth=function(t){switch(t){case 1:this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=1;break;case 3:this.topLeftStrokeWidth=1,this.bottomRightStrokeWidth=2;break;default:var e=0|Math.ceil(.5*t);this.topLeftStrokeWidth=e,this.bottomRightStrokeWidth=e}},n.prototype.beginFill=function(e,i){void 0===i&&(i=1),e=+e||0,i=+i||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setBeginFill(e,i),this.fillPath=this.$renderNode.beginFill(e,i,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},n.prototype.beginGradientFill=function(e,i,r,n,s){void 0===s&&(s=null),t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setBeginGradientFill(e,i,r,n,s),this.fillPath=this.$renderNode.beginGradientFill(e,i,r,n,s,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},n.prototype.endFill=function(){t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setEndFill(),this.fillPath=null},n.prototype.lineStyle=function(e,i,r,n,s,a,o,h,c){void 0===e&&(e=NaN),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=!1),void 0===s&&(s="normal"),void 0===a&&(a=null),void 0===o&&(o=null),void 0===h&&(h=3),e=+e||0,i=+i||0,r=+r||0,h=+h||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setLineStyle(e,i,r,n,s,a,o,h),e<=0?(this.strokePath=null,this.setStrokeWidth(0)):(this.setStrokeWidth(e),this.strokePath=this.$renderNode.lineStyle(e,i,r,a,o,h,c),this.$renderNode.drawData.length>1&&this.strokePath.moveTo(this.lastX,this.lastY))},n.prototype.drawRect=function(e,i,r,n){e=+e||0,i=+i||0,r=+r||0,n=+n||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawRect(e,i,r,n);var s=this.fillPath,a=this.strokePath;s&&s.drawRect(e,i,r,n),a&&a.drawRect(e,i,r,n),this.extendBoundsByPoint(e+r,i+n),this.updatePosition(e,i),this.dirty()},n.prototype.drawRoundRect=function(e,i,r,n,s,a){e=+e||0,i=+i||0,r=+r||0,n=+n||0,s=+s||0,a=+a||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawRoundRect(e,i,r,n,s,a);var o=this.fillPath,h=this.strokePath;o&&o.drawRoundRect(e,i,r,n,s,a),h&&h.drawRoundRect(e,i,r,n,s,a);var c=e+r,l=i+n,u=l-(a?.5*a|0:.5*s|0);this.extendBoundsByPoint(e,i),this.extendBoundsByPoint(c,l),this.updatePosition(c,u),this.dirty()},n.prototype.drawCircle=function(e,i,r){e=+e||0,i=+i||0,r=+r||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawCircle(e,i,r);var n=this.fillPath,s=this.strokePath;n&&n.drawCircle(e,i,r),s&&s.drawCircle(e,i,r),this.extendBoundsByPoint(e-r-1,i-r-1),this.extendBoundsByPoint(e+r+2,i+r+2),this.updatePosition(e+r,i),this.dirty()},n.prototype.drawEllipse=function(e,i,r,n){e=+e||0,i=+i||0,r=+r||0,n=+n||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawEllipse(e,i,r,n);var s=this.fillPath,a=this.strokePath;s&&s.drawEllipse(e,i,r,n),a&&a.drawEllipse(e,i,r,n),this.extendBoundsByPoint(e-1,i-1),this.extendBoundsByPoint(e+r+2,i+n+2),this.updatePosition(e+r,i+.5*n),this.dirty()},n.prototype.moveTo=function(e,i){e=+e||0,i=+i||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setMoveTo(e,i);var r=this.fillPath,n=this.strokePath;r&&r.moveTo(e,i),n&&n.moveTo(e,i),this.includeLastPosition=!1,this.lastX=e,this.lastY=i,this.dirty()},n.prototype.lineTo=function(e,i){e=+e||0,i=+i||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setLineTo(e,i);var r=this.fillPath,n=this.strokePath;r&&r.lineTo(e,i),n&&n.lineTo(e,i),this.updatePosition(e,i),this.dirty()},n.prototype.curveTo=function(e,r,n,s){e=+e||0,r=+r||0,n=+n||0,s=+s||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setCurveTo(e,r,n,s);var a=this.fillPath,o=this.strokePath;a&&a.curveTo(e,r,n,s),o&&o.curveTo(e,r,n,s);for(var h=i([this.lastX||0,this.lastY||0,e,r,n,s],50),c=0;c<h.length;c++){var l=h[c];this.extendBoundsByPoint(l.x,l.y),t.Point.release(l)}this.extendBoundsByPoint(n,s),this.updatePosition(n,s),this.dirty()},n.prototype.cubicCurveTo=function(e,r,n,s,a,o){e=+e||0,r=+r||0,n=+n||0,s=+s||0,a=+a||0,o=+o||0,t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setCubicCurveTo(e,r,n,s,a,o);var h=this.fillPath,c=this.strokePath;h&&h.cubicCurveTo(e,r,n,s,a,o),c&&c.cubicCurveTo(e,r,n,s,a,o);for(var l=i([this.lastX||0,this.lastY||0,e,r,n,s,a,o],50),u=0;u<l.length;u++){var p=l[u];this.extendBoundsByPoint(p.x,p.y),t.Point.release(p)}this.extendBoundsByPoint(a,o),this.updatePosition(a,o),this.dirty()},n.prototype.drawArc=function(i,r,n,s,a,o){if(!(n<0||s===a)){i=+i||0,r=+r||0,n=+n||0,s=+s||0,a=+a||0,o=!!o,s=e(s),a=e(a),t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawArc(i,r,n,s,a,o);var h=this.fillPath,c=this.strokePath;h&&(h.$lastX=this.lastX,h.$lastY=this.lastY,h.drawArc(i,r,n,s,a,o)),c&&(c.$lastX=this.lastX,c.$lastY=this.lastY,c.drawArc(i,r,n,s,a,o)),o?this.arcBounds(i,r,n,a,s):this.arcBounds(i,r,n,s,a);var l=i+Math.cos(a)*n,u=r+Math.sin(a)*n;this.updatePosition(l,u),this.dirty()}},n.prototype.dirty=function(){if(this.$renderNode.dirtyRender=!0,!t.nativeRender){var e=this.$targetDisplay;e.$cacheDirty=!0;var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},n.prototype.arcBounds=function(t,e,i,r,n){var s=Math.PI;if(Math.abs(r-n)<.01)return this.extendBoundsByPoint(t-i,e-i),void this.extendBoundsByPoint(t+i,e+i);r>n&&(n+=2*s);for(var a=Math.cos(r)*i,o=Math.cos(n)*i,h=Math.min(a,o),c=Math.max(a,o),l=Math.sin(r)*i,u=Math.sin(n)*i,p=Math.min(l,u),d=Math.max(l,u),f=r/(.5*s),$=n/(.5*s),g=Math.ceil(f);g<=$;g++)switch(g%4){case 0:c=i;break;case 1:d=i;break;case 2:h=-i;break;case 3:p=-i}h=Math.floor(h),p=Math.floor(p),c=Math.ceil(c),d=Math.ceil(d),this.extendBoundsByPoint(h+t,p+e),this.extendBoundsByPoint(c+t,d+e)},n.prototype.clear=function(){t.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setGraphicsClear(),this.$renderNode.clear(),this.updatePosition(0,0),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.dirty()},n.prototype.extendBoundsByPoint=function(t,e){this.extendBoundsByX(t),this.extendBoundsByY(e)},n.prototype.extendBoundsByX=function(t){this.minX=Math.min(this.minX,t-this.topLeftStrokeWidth),this.maxX=Math.max(this.maxX,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},n.prototype.extendBoundsByY=function(t){this.minY=Math.min(this.minY,t-this.topLeftStrokeWidth),this.maxY=Math.max(this.maxY,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},n.prototype.updateNodeBounds=function(){var t=this.$renderNode;t.x=this.minX,t.y=this.minY,t.width=Math.ceil(this.maxX-this.minX),t.height=Math.ceil(this.maxY-this.minY)},n.prototype.updatePosition=function(t,e){this.includeLastPosition||(this.extendBoundsByPoint(this.lastX,this.lastY),this.includeLastPosition=!0),this.lastX=t,this.lastY=e,this.extendBoundsByPoint(t,e)},n.prototype.$measureContentBounds=function(t){this.minX===1/0?t.setEmpty():t.setTo(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY)},n.prototype.$hitTest=function(e,i){var r=this.$targetDisplay,n=r.$getInvertedConcatenatedMatrix(),s=n.a*e+n.c*i+n.tx,a=n.b*e+n.d*i+n.ty,o=t.sys.canvasHitTestBuffer;o.resize(3,3);var h=this.$renderNode,c=t.Matrix.create();c.identity(),c.translate(1-s,1-a),t.sys.canvasRenderer.drawNodeToBuffer(h,o,c,!0),t.Matrix.release(c);try{if(0===o.getPixels(1,1)[3])return null}catch(e){throw new Error(t.sys.tr(1039))}return r},n.prototype.$onRemoveFromStage=function(){this.$renderNode&&this.$renderNode.clean(),t.nativeRender&&egret_native.NativeDisplayObject.disposeGraphicData(this)},n}(t.HashObject);t.Graphics=a,__reflect(a.prototype,"egret.Graphics")}(egret||(egret={})),function(t){var e=Math.PI,i=2*e,r=e/180,n=[],s=function(s){function a(t,e,i,r,n,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===a&&(a=0);var o=s.call(this)||this;return o.a=t,o.b=e,o.c=i,o.d=r,o.tx=n,o.ty=a,o}return __extends(a,s),a.release=function(t){t&&n.push(t)},a.create=function(){var t=n.pop();return t||(t=new a),t},a.prototype.clone=function(){return new a(this.a,this.b,this.c,this.d,this.tx,this.ty)},a.prototype.concat=function(t){var e=this.a*t.a,i=0,r=0,n=this.d*t.d,s=this.tx*t.a+t.tx,a=this.ty*t.d+t.ty;0===this.b&&0===this.c&&0===t.b&&0===t.c||(e+=this.b*t.c,n+=this.c*t.b,i+=this.a*t.b+this.b*t.d,r+=this.c*t.a+this.d*t.c,s+=this.ty*t.c,a+=this.tx*t.b),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=s,this.ty=a},a.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},a.prototype.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},a.prototype.invert=function(){this.$invertInto(this)},a.prototype.$invertInto=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,s=this.tx,a=this.ty;if(0==i&&0==r)return t.b=t.c=0,void(0==e||0==n?t.a=t.d=t.tx=t.ty=0:(e=t.a=1/e,n=t.d=1/n,t.tx=-e*s,t.ty=-n*a));var o=e*n-i*r;if(0!=o){o=1/o;var h=t.a=n*o;i=t.b=-i*o,r=t.c=-r*o,n=t.d=e*o,t.tx=-(h*s+r*a),t.ty=-(i*s+n*a)}else t.identity()},a.prototype.rotate=function(e){if(0!==(e=+e)){e/=r;var i=t.NumberUtils.cos(e),n=t.NumberUtils.sin(e),s=this.a,a=this.b,o=this.c,h=this.d,c=this.tx,l=this.ty;this.a=s*i-a*n,this.b=s*n+a*i,this.c=o*i-h*n,this.d=o*n+h*i,this.tx=c*i-l*n,this.ty=c*n+l*i}},a.prototype.scale=function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)},a.prototype.setTo=function(t,e,i,r,n,s){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s,this},a.prototype.transformPoint=function(e,i,r){var n=this.a*e+this.c*i+this.tx,s=this.b*e+this.d*i+this.ty;return r?(r.setTo(n,s),r):new t.Point(n,s)},a.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},a.prototype.equals=function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty},a.prototype.prepend=function(t,e,i,r,n,s){var a=this.tx;if(1!=t||0!=e||0!=i||1!=r){var o=this.a,h=this.c;this.a=o*t+this.b*i,this.b=o*e+this.b*r,this.c=h*t+this.d*i,this.d=h*e+this.d*r}return this.tx=a*t+this.ty*i+n,this.ty=a*e+this.ty*r+s,this},a.prototype.append=function(t,e,i,r,n,s){var a=this.a,o=this.b,h=this.c,c=this.d;return 1==t&&0==e&&0==i&&1==r||(this.a=t*a+e*h,this.b=t*o+e*c,this.c=i*a+r*h,this.d=i*o+r*c),this.tx=n*a+s*h+this.tx,this.ty=n*o+s*c+this.ty,this},a.prototype.deltaTransformPoint=function(e){var i=this.a*e.x+this.c*e.y,r=this.b*e.x+this.d*e.y;return new t.Point(i,r)},a.prototype.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},a.prototype.createBox=function(e,i,n,s,a){void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=0);if(0!==n){n/=r;var o=t.NumberUtils.cos(n),h=t.NumberUtils.sin(n);this.a=o*e,this.b=h*i,this.c=-h*e,this.d=o*i}else this.a=e,this.b=0,this.c=0,this.d=i;this.tx=s,this.ty=a},a.prototype.createGradientBox=function(t,e,i,r,n){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),this.createBox(t/1638.4,e/1638.4,i,r+t/2,n+e/2)},a.prototype.$transformBounds=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,s=this.tx,a=this.ty,o=t.x,h=t.y,c=o+t.width,l=h+t.height,u=e*o+r*h+s,p=i*o+n*h+a,d=e*c+r*h+s,f=i*c+n*h+a,$=e*c+r*l+s,g=i*c+n*l+a,y=e*o+r*l+s,v=i*o+n*l+a,b=0;u>d&&(b=u,u=d,d=b),$>y&&(b=$,$=y,y=b),t.x=Math.floor(u<$?u:$),t.width=Math.ceil((d>y?d:y)-t.x),p>f&&(b=p,p=f,f=b),g>v&&(b=g,g=v,v=b),t.y=Math.floor(p<g?p:g),t.height=Math.ceil((f>v?f:v)-t.y)},a.prototype.getDeterminant=function(){return this.a*this.d-this.b*this.c},a.prototype.$getScaleX=function(){var t=this;if(0==t.b)return t.a;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e},a.prototype.$getScaleY=function(){var t=this;if(0==t.c)return t.d;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e},a.prototype.$getSkewX=function(){return this.d<0?Math.atan2(this.d,this.c)+e/2:Math.atan2(this.d,this.c)-e/2},a.prototype.$getSkewY=function(){return this.a<0?Math.atan2(this.b,this.a)-e:Math.atan2(this.b,this.a)},a.prototype.$updateScaleAndRotation=function(e,n,s,a){if(!(0!=s&&s!=i||0!=a&&a!=i))return this.a=e,this.b=this.c=0,void(this.d=n);s/=r,a/=r;var o=t.NumberUtils.cos(s),h=t.NumberUtils.sin(s);s==a?(this.a=o*e,this.b=h*e):(this.a=t.NumberUtils.cos(a)*e,this.b=t.NumberUtils.sin(a)*e),this.c=-h*n,this.d=o*n},a.prototype.$preMultiplyInto=function(t,e){var i=t.a*this.a,r=0,n=0,s=t.d*this.d,a=t.tx*this.a+this.tx,o=t.ty*this.d+this.ty;0===t.b&&0===t.c&&0===this.b&&0===this.c||(i+=t.b*this.c,s+=t.c*this.b,r+=t.a*this.b+t.b*this.d,n+=t.c*this.a+t.d*this.c,a+=t.ty*this.c,o+=t.tx*this.b),e.a=i,e.b=r,e.c=n,e.d=s,e.tx=a,e.ty=o},a}(t.HashObject);t.Matrix=s,__reflect(s.prototype,"egret.Matrix"),t.$TempMatrix=new s}(egret||(egret={})),function(t){var e=[],i=function(i){function r(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0);var s=i.call(this)||this;return s.x=t,s.y=e,s.width=r,s.height=n,s}return __extends(r,i),r.release=function(t){t&&e.push(t)},r.create=function(){var t=e.pop();return t||(t=new r),t},Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"topLeft",{get:function(){return new t.Point(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomRight",{get:function(){return new t.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x},enumerable:!0,configurable:!0}),r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.setTo=function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},r.prototype.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},r.prototype.intersection=function(t){return this.clone().$intersectInPlace(t)},r.prototype.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},r.prototype.$intersectInPlace=function(t){var e=this.x,i=this.y,r=t.x,n=t.y,s=Math.max(e,r),a=Math.min(e+this.width,r+t.width);if(s<=a){var o=Math.max(i,n),h=Math.min(i+this.height,n+t.height);if(o<=h)return this.setTo(s,o,a-s,h-o),this}return this.setEmpty(),this},r.prototype.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},r.prototype.isEmpty=function(){return this.width<=0||this.height<=0},r.prototype.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.containsPoint=function(t){return this.x<=t.x&&this.x+this.width>t.x&&this.y<=t.y&&this.y+this.height>t.y},r.prototype.containsRect=function(t){var e=t.x+t.width,i=t.y+t.height,r=this.x+this.width,n=this.y+this.height;return t.x>=this.x&&t.x<r&&t.y>=this.y&&t.y<n&&e>this.x&&e<=r&&i>this.y&&i<=n},r.prototype.equals=function(t){return this===t||this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},r.prototype.inflatePoint=function(t){this.inflate(t.x,t.y)},r.prototype.offset=function(t,e){this.x+=t,this.y+=e},r.prototype.offsetPoint=function(t){this.offset(t.x,t.y)},r.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},r.prototype.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return e.setTo(i,r,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-r),e},r.prototype.$getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return e*this.width+i*this.height},r.prototype.$getBaseHeight=function(t){var e=Math.abs(Math.cos(t));return Math.abs(Math.sin(t))*this.width+e*this.height},r}(t.HashObject);t.Rectangle=i,__reflect(i.prototype,"egret.Rectangle"),t.$TempRectangle=new i}(egret||(egret={})),function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[1001]="Could not find Egret entry class: {0}",e[1002]="Egret entry class '{0}' must inherit from egret.DisplayObject.",e[1003]="Parameter {0} must be non-null.",e[1004]="An object cannot be added as a child to one of it's children (or children's children, etc.).",e[1005]="An object cannot be added as a child of itself.",e[1006]="The supplied DisplayObject must be a child of the caller.",e[1007]="An index specified for a parameter was out of range.",e[1008]="Instantiate singleton errorsingleton class {0} can not create multiple instances.",e[1009]='the Class {0} cannot use the property "{1}"',e[1010]='the property "{1}" of the Class "{0}" is readonly',e[1011]="Stream Error. URL: {0}",e[1012]="The type of parameter {0} must be Class.",e[1013]="Variable assignment is NaN, please see the code!",e[1014]='the constant "{1}" of the Class "{0}" is read-only',e[1015]="xml not found!",e[1016]="{0}has been obsoleted",e[1017]="The format of JSON file is incorrect: {0}\ndata: {1}",e[1018]="the scale9Grid is not correct",e[1019]="Network ab:{0}",e[1020]="Cannot initialize Shader",e[1021]="Current browser does not support webgl",e[1022]="{0} ArgumentError",e[1023]="This method is not available in the ScrollView!",e[1025]="end of the file",e[1026]="! EncodingError The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=". called injection is not configured rule: {0}, please specify configuration during its initial years of injection rule, and then call the corresponding single case.",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="Photos can not be used across domains toDataURL to convert base64",e[1034]='Music file decoding failed: "{0}", please use the standard conversion tool reconversion under mp3.',e[1035]="Native does not support this feature!",e[1036]="Sound has stopped, please recall Sound.play () to play the sound!",e[1037]="Non-load the correct blob!",e[1038]="XML format error!",e[1039]="Cross domains pictures can not get pixel information!",e[1040]="hitTestPoint can not detect crossOrigin images! Please check if the display object has crossOrigin elements.",e[1041]="{0} is deprecated, please use {1} replace",e[1042]="The parameters passed in the region needs is an integer in drawToTexture method. Otherwise, some browsers will draw abnormal.",e[1043]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[1044]="The current version of the Runtime does not support video playback, please use the latest version",e[1045]="The resource url is not found",e[1046]="BitmapText no corresponding characters: {0}, please check the configuration file",e[1047]="egret.localStorage.setItem save failed,key={0}&value={1}",e[1048]="Video loading failed",e[1049]="In the absence of sound is not allowed to play after loading",e[1050]="ExternalInterface calls the method without js registration: {0}",e[1051]="runtime only support webgl render mode",e[1052]="network request timeout{0}",e[3e3]="Theme configuration file failed to load: {0}",e[3001]="Cannot find the skin name which is configured in Theme: {0}",e[3002]='Index:"{0}" is out of the collection element index range',e[3003]="Cannot be available in this component. If this component is container, please continue to use",e[3004]="addChild(){0}addElement() replace",e[3005]="addChildAt(){0}addElementAt() replace",e[3006]="removeChild(){0}removeElement() replace",e[3007]="removeChildAt(){0}removeElementAt() replace",e[3008]="setChildIndex(){0}setElementIndex() replace",e[3009]="swapChildren(){0}swapElements() replace",e[3010]="swapChildrenAt(){0}swapElementsAt() replace",e[3011]='Index:"{0}" is out of the visual element index range',e[3012]="This method is not available in Scroller component!",e[3013]="UIStage is GUI root container, and only one such instant is in the display list",e[3014]="set fullscreen error",e[3100]="Current browser does not support WebSocket",e[3101]="Please connect Socket firstly",e[3102]="Please set the type of binary type",e[3200]="getResByUrl must be called after loadConfig",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!",e[4500]="The platform does not support {0} adapter mode and has been automatically replaced with {1} mode, please modify your code adapter logic"}(egret||(egret={})),function(t){t.JointStyle={BEVEL:"bevel",MITER:"miter",ROUND:"round"}}(egret||(egret={})),function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[1001]="Egret: {0}",e[1002]="Egret {0} egret.DisplayObject",e[1003]=" {0}  null",e[1004]="",e[1005]="",e[1006]=" DisplayObject ",e[1007]="",e[1008]=" {0} ",e[1009]=" {0}  {1}",e[1010]=" {0}  {1} ",e[1011]="URL: {0}",e[1012]=" {0}  Class",e[1013]="NaN",e[1014]=" {0}  {1} ",e[1015]="xml not found!",e[1016]="{0}",e[1017]="JSON: {0}\ndata: {1}",e[1018]="9",e[1019]=":{0}",e[1020]="",e[1021]="webgl",e[1022]="{0} ArgumentError",e[1023]="ScrollView!",e[1025]="",e[1026]="EncodingError! The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=":{0} ",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="toDataURLbase64",e[1034]='"{0}"mp3',e[1035]="Native ",e[1036]=" Sound.play() ",e[1037]="blob",e[1038]="XML !",e[1039]="!",e[1040]="hitTestPoint ! ",e[1041]="{0} , {1} ",e[1042]="drawToTexture,",e[1043]="{0}  : {1} : {2}",e[1044]=" runtime ,",e[1045]="",e[1046]="BitmapText :{0}",e[1047]="egret.localStorage.setItem,key={0}&value={1}",e[1048]="",e[1049]="",e[1050]="ExternalInterfacejs: {0}",e[1051]="runtime  webgl ",e[1052]=":{0}",e[3e3]=": {0}",e[3001]=": {0}",e[3002]=':"{0}"',e[3003]="",e[3004]="addChild(){0}addElement()",e[3005]="addChildAt(){0}addElementAt()",e[3006]="removeChild(){0}removeElement()",e[3007]="removeChildAt(){0}removeElementAt()",e[3008]="setChildIndex(){0}setElementIndex()",e[3009]="swapChildren(){0}swapElements()",e[3010]="swapChildrenAt(){0}swapElementsAt()",e[3011]=':"{0}"',e[3012]="Scroller!",e[3013]="UIStageGUI",e[3014]="",e[3100]="WebSocket",e[3101]="WebSocket",e[3102]="type",e[3200]="getResByUrl  loadConfig ",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!",e[4500]=" {0}  {1} "}(egret||(egret={})),function(t){t.localStorage||(t.localStorage={})}(egret||(egret={})),function(t){!function(t){var e=[];t.$pushSoundChannel=function(t){e.indexOf(t)<0&&e.push(t)},t.$popSoundChannel=function(t){var i=e.indexOf(t);return i>=0&&(e.splice(i,1),!0)}}(t.sys||(t.sys={}))}(egret||(egret={})),egret||(egret={}),egret||(egret={}),function(t){!function(t){t.GET="GET",t.POST="POST"}(t.HttpMethod||(t.HttpMethod={}))}(egret||(egret={})),egret||(egret={}),function(t){var e=function(){function t(){}return t.TEXT="text",t.ARRAY_BUFFER="arraybuffer",t}();t.HttpResponseType=e,__reflect(e.prototype,"egret.HttpResponseType")}(egret||(egret={})),egret||(egret={}),function(t){!function(e){var i=function(i){function r(r){var n=i.call(this)||this;return n.isStage=!1,n.$renderNode=new e.BitmapNode,n.renderBuffer=null,n.offsetX=0,n.offsetY=0,n.offsetMatrix=new t.Matrix,n.$canvasScaleX=1,n.$canvasScaleY=1,n.root=r,n.isStage=r instanceof t.Stage,n}return __extends(r,i),r.create=function(i){var r=new t.sys.DisplayList(i);try{var n=new e.RenderBuffer;r.renderBuffer=n}catch(t){return null}return r.root=i,r},r.prototype.$getRenderNode=function(){return this.$renderNode},r.prototype.setClipRect=function(t,e){t*=r.$canvasScaleX,e*=r.$canvasScaleY,this.renderBuffer.resize(t,e)},r.prototype.drawToSurface=function(){var i;this.$canvasScaleX=this.offsetMatrix.a=r.$canvasScaleX,this.$canvasScaleY=this.offsetMatrix.d=r.$canvasScaleY,this.isStage||this.changeSurfaceSize();var n=this.renderBuffer;if(n.clear(),i=e.systemRenderer.render(this.root,n,this.offsetMatrix),!this.isStage){var s=n.surface,a=this.$renderNode;a.drawData.length=0;var o=s.width,h=s.height;this.bitmapData?(this.bitmapData.source=s,this.bitmapData.width=o,this.bitmapData.height=h):this.bitmapData=new t.BitmapData(s),a.image=this.bitmapData,a.imageWidth=o,a.imageHeight=h,a.drawImage(0,0,o,h,-this.offsetX,-this.offsetY,o/this.$canvasScaleX,h/this.$canvasScaleY)}return i},r.prototype.changeSurfaceSize=function(){this.root;var t=this.offsetX,e=this.offsetY,i=this.root.$getOriginalBounds(),r=this.$canvasScaleX,n=this.$canvasScaleY;this.offsetX=-i.x,this.offsetY=-i.y,this.offsetMatrix.setTo(this.offsetMatrix.a,0,0,this.offsetMatrix.d,this.offsetX,this.offsetY);var s=this.renderBuffer,a=Math.max(257,i.width*r),o=Math.max(257,i.height*n);this.offsetX==t&&this.offsetY==e&&s.surface.width==a&&s.surface.height==o||s.resize(a,o)},r.$setCanvasScale=function(e,i){r.$canvasScaleX=e,r.$canvasScaleY=i,t.nativeRender&&egret_native.nrSetCanvasScaleFactor(r.$canvasScaleFactor,e,i)},r.$canvasScaleFactor=1,r.$canvasScaleX=1,r.$canvasScaleY=1,r}(t.HashObject);e.DisplayList=i,__reflect(i.prototype,"egret.sys.DisplayList")}(t.sys||(t.sys={}))}(egret||(egret={})),egret||(egret={}),egret||(egret={}),function(t){!function(e){var i=function(i){function o(e,r,n){var s=i.call(this)||this;return s.isPlaying=!1,e||t.$error(1003,"buffer"),s.entryClassName=n,s.stage=r,s.screenDisplayList=s.createDisplayList(r,e),s.showFPS=!1,s.showLog=!1,s.stageDisplayList=null,t.nativeRender&&(egret_native.rootWebGLBuffer=e),s}return __extends(o,i),o.prototype.createDisplayList=function(t,i){var r=new e.DisplayList(t);return r.renderBuffer=i,t.$displayList=r,r},o.prototype.start=function(){!this.isPlaying&&this.stage&&(e.$TempStage=e.$TempStage||this.stage,this.isPlaying=!0,this.root||this.initialize(),t.ticker.$addPlayer(this))},o.prototype.initialize=function(){var e;if(this.entryClassName&&(e=t.getDefinitionByName(this.entryClassName)),e){var i=new e;this.root=i,i instanceof t.DisplayObject?this.stage.addChild(i):t.$error(1002,this.entryClassName)}else t.$error(1001,this.entryClassName)},o.prototype.stop=function(){this.pause(),this.stage=null},o.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,t.ticker.$removePlayer(this))},o.prototype.$render=function(e,i){if(t.nativeRender)return egret_native.updateNativeRender(),void egret_native.nrRender();var n=this.stage,s=t.getTimer(),a=n.$displayList.drawToSurface(),o=t.getTimer();e&&this.showFPS&&r.update(a,o-s,i)},o.prototype.updateStageSize=function(e,i){var r=this.stage;r.$stageWidth=e,r.$stageHeight=i,t.nativeRender?egret_native.nrResize(e,i):(this.screenDisplayList.setClipRect(e,i),this.stageDisplayList&&this.stageDisplayList.setClipRect(e,i)),r.dispatchEventWith(t.Event.RESIZE)},o.prototype.displayFPS=function(i,o,c,l){if((o=!!o)&&(t.log=function(){for(var t=arguments.length,i="",r=0;r<t;r++)i+=arguments[r]+" ";e.$logToFPS(i),console.log.apply(console,h(arguments))},t.warn=function(){for(var t=arguments.length,i="",r=0;r<t;r++)i+=arguments[r]+" ";e.$warnToFPS(i),console.warn.apply(console,h(arguments))},t.error=function(){for(var t=arguments.length,i="",r=0;r<t;r++)i+=arguments[r]+" ";e.$errorToFPS(i),console.error.apply(console,h(arguments))}),this.showFPS=!!i,this.showLog=o,!r){r=new FPS(this.stage,i,o,c,l);for(var u=n.length,p=0;p<u;p++)r.updateInfo(n[p]);n=null;var d=s.length;for(p=0;p<d;p++)r.updateWarn(s[p]);s=null;var f=a.length;for(p=0;p<f;p++)r.updateError(a[p]);a=null}},o}(t.HashObject);e.Player=i,__reflect(i.prototype,"egret.sys.Player");var r,n=[],s=[],a=[];e.$logToFPS=function(t){r?r.updateInfo(t):n.push(t)},e.$warnToFPS=function(t){r?r.updateWarn(t):s.push(t)},e.$errorToFPS=function(t){r?r.updateError(t):a.push(t)};var o=function(){function e(e,i,r,n,s){var a;this.showFPS=i,this.showLog=r,this.logFilter=n,this.styles=s,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.costRender=0,this.costTicker=0,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.costRender=0,this.costTicker=0,this._stage=e,this.showFPS=i,this.showLog=r,this.logFilter=n,this.styles=s,this.fpsDisplay=new t.FPSDisplay(e,i,r,n,s);try{a=n?new RegExp(n):null}catch(e){t.log(e)}this.filter=function(t){return a?a.test(t):!n||0==t.indexOf(n)}}return e.prototype.update=function(e,i,r){var n=t.getTimer();if(this.totalTime+=n-this.lastTime,this.lastTime=n,this.totalTick++,this.drawCalls+=e,this.costRender+=i,this.costTicker+=r,this.totalTime>=1e3){var s=Math.min(Math.ceil(1e3*this.totalTick/this.totalTime),t.ticker.$frameRate),a=Math.round(this.drawCalls/this.totalTick),o=Math.round(this.costRender/this.totalTick),h=Math.round(this.costTicker/this.totalTick);this.fpsDisplay.update({fps:s,draw:a,costTicker:h,costRender:o}),this.totalTick=0,this.totalTime=this.totalTime%1e3,this.drawCalls=0,this.costRender=0,this.costTicker=0}},e.prototype.updateInfo=function(t){t&&this.showLog&&this.filter(t)&&this.fpsDisplay.updateInfo(t)},e.prototype.updateWarn=function(t){t&&this.showLog&&this.filter(t)&&(this.fpsDisplay.updateWarn?this.fpsDisplay.updateWarn(t):this.fpsDisplay.updateInfo("[Warning]"+t))},e.prototype.updateError=function(t){t&&this.showLog&&this.filter(t)&&(this.fpsDisplay.updateError?this.fpsDisplay.updateError(t):this.fpsDisplay.updateInfo("[Error]"+t))},e}();function h(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}__reflect(o.prototype,"FPSImpl"),__global.FPS=o,t.warn=function(){console.warn.apply(console,h(arguments))},t.error=function(){console.error.apply(console,h(arguments))},t.assert=function(){console.assert.apply(console,h(arguments))},t.log=function(){console.log.apply(console,h(arguments))}}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){if(t.nativeRender=__global.nativeRender,t.nativeRender){var e=egret_native.nrABIVersion,i=egret_native.nrMinEgretVersion;if(e<5){t.nativeRender=!1;var r=" 0.1.14 ";t.sys.$warnToFPS(r),t.warn(r)}else if(e>5){t.nativeRender=!1;r=" "+i+" ";t.sys.$warnToFPS(r),t.warn(r)}}}(egret||(egret={})),function(t){var e=function(){function e(t,i,r,n){this.arrayBuffer=t,this.isInvalid=!1;var s=new Uint8Array(this.arrayBuffer,0,12);if(171!==s[0]||75!==s[1]||84!==s[2]||88!==s[3]||32!==s[4]||49!==s[5]||49!==s[6]||187!==s[7]||13!==s[8]||10!==s[9]||26!==s[10]||10!==s[11])return this.isInvalid=!0,void console.error("texture missing KTX identifier");var a=Uint32Array.BYTES_PER_ELEMENT,o=new DataView(this.arrayBuffer,12,13*a),h=67305985===o.getUint32(0,!0);this.glType=o.getUint32(1*a,h),this.glTypeSize=o.getUint32(2*a,h),this.glFormat=o.getUint32(3*a,h),this.glInternalFormat=o.getUint32(4*a,h),this.glBaseInternalFormat=o.getUint32(5*a,h),this.pixelWidth=o.getUint32(6*a,h),this.pixelHeight=o.getUint32(7*a,h),this.pixelDepth=o.getUint32(8*a,h),this.numberOfArrayElements=o.getUint32(9*a,h),this.numberOfFaces=o.getUint32(10*a,h),this.numberOfMipmapLevels=o.getUint32(11*a,h),this.bytesOfKeyValueData=o.getUint32(12*a,h),0===this.glType?(this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels),0!==this.pixelHeight&&0===this.pixelDepth?0===this.numberOfArrayElements?this.numberOfFaces===i?this.loadType=e.COMPRESSED_2D:console.error("number of faces expected"+i+", but found "+this.numberOfFaces):console.error("texture arrays not currently supported"):console.error("only 2D textures currently supported")):console.error("only compressed formats currently supported")}return e.prototype.uploadLevels=function(t,i){this.loadType===e.COMPRESSED_2D&&this._upload2DCompressedLevels(t,i)},e.prototype._upload2DCompressedLevels=function(i,r){i.clearCompressedTextureData();for(var n=i.compressedTextureData,s=e.HEADER_LEN+this.bytesOfKeyValueData,a=this.pixelWidth,o=this.pixelHeight,h=r?this.numberOfMipmapLevels:1,c=0;c<h;c++){var l=new Int32Array(this.arrayBuffer,s,1)[0];s+=4;for(var u=[],p=0;p<this.numberOfFaces;p++){var d=new Uint8Array(this.arrayBuffer,s,l),f=new t.CompressedTextureData;f.glInternalFormat=this.glInternalFormat,f.width=a,f.height=o,f.byteArray=d,f.face=p,f.level=c,u.push(f),s+=l,s+=3-(l+3)%4}n.push(u),a=Math.max(1,.5*a),o=Math.max(1,.5*o)}var $=i.getCompressed2dTextureData();$&&(i.width=$.width,i.height=$.height)},e.HEADER_LEN=64,e.COMPRESSED_2D=0,e.COMPRESSED_3D=1,e.TEX_2D=2,e.TEX_3D=3,e}();t.KTXContainer=e,__reflect(e.prototype,"egret.KTXContainer")}(egret||(egret={})),function(t){t.sys||(t.sys={})}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.calculateStageSize=function(e,i,r,n,s){var a=i,o=r,h=n,c=s,l=i/h||0,u=r/c||0;switch(e){case t.StageScaleMode.EXACT_FIT:break;case t.StageScaleMode.FIXED_HEIGHT:h=Math.round(i/u);break;case t.StageScaleMode.FIXED_WIDTH:c=Math.round(r/l);break;case t.StageScaleMode.NO_BORDER:l>u?o=Math.round(c*l):a=Math.round(h*u);break;case t.StageScaleMode.SHOW_ALL:l>u?a=Math.round(h*u):o=Math.round(c*l);break;case t.StageScaleMode.FIXED_NARROW:l>u?h=Math.round(i/u):c=Math.round(r/l);break;case t.StageScaleMode.FIXED_WIDE:l>u?c=Math.round(r/l):h=Math.round(i/u);break;default:h=i,c=r}return t.Capabilities.runtimeType!=t.RuntimeType.WXGAME&&(h%2!=0&&(h+=1),c%2!=0&&(c+=1),a%2!=0&&(a+=1),o%2!=0&&(o+=1)),{stageWidth:h,stageHeight:c,displayWidth:a,displayHeight:o}},i}(t.HashObject);e.DefaultScreenAdapter=i,__reflect(i.prototype,"egret.sys.DefaultScreenAdapter",["egret.sys.IScreenAdapter"])}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t.NO_BORDER="noBorder",t.EXACT_FIT="exactFit",t.FIXED_WIDTH="fixedWidth",t.FIXED_HEIGHT="fixedHeight",t.FIXED_NARROW="fixedNarrow",t.FIXED_WIDE="fixedWide",t}();t.StageScaleMode=e,__reflect(e.prototype,"egret.StageScaleMode")}(egret||(egret={})),function(t){!function(t){t.mainCanvas=function(t,e){return console.error("empty sys.mainCanvas = "+t+", "+e),null},t.createCanvas=function(t,e){return console.error("empty sys.createCanvas = "+t+", "+e),null},t.resizeContext=function(t,e,i,r){console.error("empty sys.resizeContext = "+t+", "+e+", "+i+", "+r)},t.getContextWebGL=function(t){return console.error("empty sys.getContextWebGL = "+t),null},t.getContext2d=function(t){return console.error("empty sys.getContext2d = "+t),null},t.createTexture=function(t,e){return console.error("empty sys.createTexture = "+e),null},t._createTexture=function(t,e,i,r){return console.error("empty sys._createTexture = "+e+", "+i+", "+r),null},t.drawTextureElements=function(t,e,i){return console.error("empty sys.drawTextureElements = "+t+", "+e+", "+i),0},t.measureTextWith=function(t,e){return console.error("empty sys.measureTextWith = "+t+", "+e),0},t.createCanvasRenderBufferSurface=function(t,e,i,r){return console.error("empty sys.createCanvasRenderBufferSurface = "+e+", "+i),null},t.resizeCanvasRenderBuffer=function(t,e,i,r){console.error("empty sys.resizeContext = "+t+", "+e+", "+i+", "+r)}}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(e){e.$START_TIME=0,e.$invalidateRenderFlag=!1,e.$requestRenderingFlag=!1;var i=function(){function i(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.lastTimeStamp=0,this.costEnterFrame=0,this.isPaused=!1,t.ticker&&t.$error(1008,"egret.sys.SystemTicker"),e.$START_TIME=Date.now(),this.frameDeltaTime=1e3/this.$frameRate,this.lastCount=this.frameInterval=Math.round(6e4/this.$frameRate)}return i.prototype.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(egret_stages.push(t.stage),this.playerList=this.playerList.concat(),this.playerList.push(t))},i.prototype.$removePlayer=function(t){var e=this.playerList.indexOf(t);if(-1!==e){var i=egret_stages.indexOf(t.stage);egret_stages.splice(i,1),this.playerList=this.playerList.concat(),this.playerList.splice(e,1)}},i.prototype.$startTick=function(t,e){-1==this.getTickIndex(t,e)&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(e))},i.prototype.$stopTick=function(t,e){var i=this.getTickIndex(t,e);-1!=i&&(this.concatTick(),this.callBackList.splice(i,1),this.thisObjectList.splice(i,1))},i.prototype.getTickIndex=function(t,e){for(var i=this.callBackList,r=this.thisObjectList,n=i.length-1;n>=0;n--)if(i[n]==t&&r[n]==e)return n;return-1},i.prototype.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},i.prototype.$setFrameRate=function(t){return!(t<=0)&&(this.$frameRate!=t&&(this.$frameRate=t,t>60&&(t=60),this.frameDeltaTime=1e3/t,this.lastCount=this.frameInterval=Math.round(6e4/t),!0))},i.prototype.pause=function(){this.isPaused=!0},i.prototype.resume=function(){this.isPaused=!1},i.prototype.update=function(i){for(var r=t.getTimer(),n=this.callBackList,s=this.thisObjectList,a=n.length,o=e.$requestRenderingFlag,h=t.getTimer(),c=0,l=t.lifecycle.contexts;c<l.length;c++){var u=l[c];u.onUpdate&&u.onUpdate()}if(this.isPaused)this.lastTimeStamp=h;else{this.callLaterAsyncs();for(var p=0;p<a;p++)n[p].call(s[p],h)&&(o=!0);var d=t.getTimer(),f=h-this.lastTimeStamp;if(this.lastTimeStamp=h,f>=this.frameDeltaTime||i)this.lastCount=this.frameInterval;else{if(this.lastCount-=1e3,this.lastCount>0)return void(o&&this.render(!1,this.costEnterFrame+d-r));this.lastCount+=this.frameInterval}this.render(!0,this.costEnterFrame+d-r);var $=t.getTimer();this.broadcastEnterFrame();var g=t.getTimer();this.costEnterFrame=g-$}},i.prototype.render=function(t,i){var r=this.playerList,n=r.length;if(0!=n){this.callLaters(),e.$invalidateRenderFlag&&(this.broadcastRender(),e.$invalidateRenderFlag=!1);for(var s=0;s<n;s++)r[s].$render(t,i);e.$requestRenderingFlag=!1}},i.prototype.broadcastEnterFrame=function(){var e=t.DisplayObject.$enterFrameCallBackList,i=e.length;if(0!=i){e=e.concat();for(var r=0;r<i;r++)e[r].dispatchEventWith(t.Event.ENTER_FRAME)}},i.prototype.broadcastRender=function(){var e=t.DisplayObject.$renderCallBackList,i=e.length;if(0!=i){e=e.concat();for(var r=0;r<i;r++)e[r].dispatchEventWith(t.Event.RENDER)}},i.prototype.callLaters=function(){var e,i,r;if(t.$callLaterFunctionList.length>0&&(e=t.$callLaterFunctionList,t.$callLaterFunctionList=[],i=t.$callLaterThisList,t.$callLaterThisList=[],r=t.$callLaterArgsList,t.$callLaterArgsList=[]),e)for(var n=e.length,s=0;s<n;s++){var a=e[s];null!=a&&a.apply(i[s],r[s])}},i.prototype.callLaterAsyncs=function(){if(t.$callAsyncFunctionList.length>0){var e=t.$callAsyncFunctionList,i=t.$callAsyncThisList,r=t.$callAsyncArgsList;t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[];for(var n=0;n<e.length;n++){var s=e[n];null!=s&&s.apply(i[n],r[n])}}},i}();e.SystemTicker=i,__reflect(i.prototype,"egret.sys.SystemTicker")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(e){e.contexts=[];var i=!0,r=function(){function r(){}return r.prototype.pause=function(){i&&(i=!1,e.stage.dispatchEvent(new t.Event(t.Event.DEACTIVATE)),e.onPause&&e.onPause())},r.prototype.resume=function(){i||(i=!0,e.stage.dispatchEvent(new t.Event(t.Event.ACTIVATE)),e.onResume&&e.onResume())},r}();e.LifecycleContext=r,__reflect(r.prototype,"egret.lifecycle.LifecycleContext"),e.addLifecycleListener=function(t){var i=new r;e.contexts.push(i),t(i)}}(t.lifecycle||(t.lifecycle={})),t.ticker=new t.sys.SystemTicker}(egret||(egret={})),global.egret_stages=[],function(t){!function(e){var i=function(e){function i(t){var i=e.call(this)||this;return i.maxTouches=0,i.useTouchesCount=0,i.touchDownTarget={},i.lastTouchX=-1,i.lastTouchY=-1,i.stage=t,i}return __extends(i,e),i.prototype.$initMaxTouches=function(){this.maxTouches=this.stage.$maxTouches},i.prototype.onTouchBegin=function(e,i,r){if(!(this.useTouchesCount>=this.maxTouches)){this.lastTouchX=e,this.lastTouchY=i;var n=this.findTarget(e,i);null==this.touchDownTarget[r]&&(this.touchDownTarget[r]=n,this.useTouchesCount++),t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_BEGIN,!0,!0,e,i,r,!0)}},i.prototype.onTouchMove=function(e,i,r){if(null!=this.touchDownTarget[r]&&(this.lastTouchX!=e||this.lastTouchY!=i)){this.lastTouchX=e,this.lastTouchY=i;var n=this.findTarget(e,i);t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_MOVE,!0,!0,e,i,r,!0)}},i.prototype.onTouchEnd=function(e,i,r){if(null!=this.touchDownTarget[r]){var n=this.findTarget(e,i),s=this.touchDownTarget[r];delete this.touchDownTarget[r],this.useTouchesCount--,t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_END,!0,!0,e,i,r,!1),s==n?t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_TAP,!0,!0,e,i,r,!1):t.TouchEvent.dispatchTouchEvent(s,t.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,e,i,r,!1)}},i.prototype.findTarget=function(t,e){var i=this.stage.$hitTest(t,e);return i||(i=this.stage),i},i}(t.HashObject);e.TouchHandler=i,__reflect(i.prototype,"egret.sys.TouchHandler")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.image=null,t.smoothing=!0,t.blendMode=null,t.alpha=NaN,t.filter=null,t.rotated=!1,t.type=1,t}return __extends(i,e),i.prototype.drawImage=function(t,e,i,r,n,s,a,o){this.drawData.push(t,e,i,r,n,s,a,o),this.renderCount++},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null,this.blendMode=null,this.alpha=NaN,this.filter=null},i.$updateTextureData=function(e,r,n,s,a,o,h,c,l,u,p,d,f,$,g,y){if(r){var v=t.$TextureScaleFactor;if(e.smoothing=y,e.image=r,e.imageWidth=f,e.imageHeight=$,g==t.BitmapFillMode.SCALE){var b=p/l*v,m=d/u*v;e.drawImage(n,s,a,o,b*h,m*c,b*a,m*o)}else if(g==t.BitmapFillMode.CLIP){var x=Math.min(l,p),T=Math.min(u,d),_=a*v,D=o*v;i.drawClipImage(e,v,n,s,_,D,h,c,x,T)}else{_=a*v,D=o*v;for(var O=0;O<p;O+=l)for(var w=0;w<d;w+=u){x=Math.min(p-O,l),T=Math.min(d-w,u);i.drawClipImage(e,v,n,s,_,D,h,c,x,T,O,w)}}}},i.$updateTextureDataWithScale9Grid=function(e,i,r,n,s,a,o,h,c,l,u,p,d,f,$,g){e.smoothing=g,e.image=i,e.imageWidth=f,e.imageHeight=$;var y=a,v=o;p-=l-a*t.$TextureScaleFactor,d-=u-o*t.$TextureScaleFactor;var b=r.x-h,m=r.y-c,x=b/t.$TextureScaleFactor,T=m/t.$TextureScaleFactor,_=r.width/t.$TextureScaleFactor,D=r.height/t.$TextureScaleFactor;0==D&&(D=1,T>=v&&T--),0==_&&(_=1,x>=y&&x--);var O=n,w=O+x,E=w+_,C=y-x-_,S=s,R=S+T,F=R+D,P=v-T-D,M=C*t.$TextureScaleFactor,N=P*t.$TextureScaleFactor;if((x+C)*t.$TextureScaleFactor>p||(T+P)*t.$TextureScaleFactor>d)e.drawImage(n,s,a,o,h,c,p,d);else{var j=h,A=j+b,B=j+(p-M),k=p-b-M,L=c,I=L+m,U=L+d-N,X=d-m-N;T>0&&(x>0&&e.drawImage(O,S,x,T,j,L,b,m),_>0&&e.drawImage(w,S,_,T,A,L,k,m),C>0&&e.drawImage(E,S,C,T,B,L,M,m)),D>0&&(x>0&&e.drawImage(O,R,x,D,j,I,b,X),_>0&&e.drawImage(w,R,_,D,A,I,k,X),C>0&&e.drawImage(E,R,C,D,B,I,M,X)),P>0&&(x>0&&e.drawImage(O,F,x,P,j,U,b,N),_>0&&e.drawImage(w,F,_,P,A,U,k,N),C>0&&e.drawImage(E,F,C,P,B,U,M,N))}},i.drawClipImage=function(t,e,i,r,n,s,a,o,h,c,l,u){void 0===l&&(l=0),void 0===u&&(u=0);var p=a+n-h;p>0&&(n-=p),(p=o+s-c)>0&&(s-=p),t.drawImage(i,r,n/e,s/e,l+a,u+o,n,s)},i}(e.RenderNode);e.BitmapNode=i,__reflect(i.prototype,"egret.sys.BitmapNode")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(e){var i=["none","round","square"],r=["bevel","miter","round"],n=function(n){function s(){var t=n.call(this)||this;return t.dirtyRender=!0,t.type=3,t}return __extends(s,n),s.prototype.beginFill=function(t,i,r){void 0===i&&(i=1);var n=new e.FillPath;if(n.fillColor=t,n.fillAlpha=i,r){var s=this.drawData.lastIndexOf(r);this.drawData.splice(s,0,n)}else this.drawData.push(n);return this.renderCount++,n},s.prototype.beginGradientFill=function(i,r,n,s,a,o){var h=new t.Matrix;a?(h.a=819.2*a.a,h.b=819.2*a.b,h.c=819.2*a.c,h.d=819.2*a.d,h.tx=a.tx,h.ty=a.ty):(h.a=100,h.d=100);var c=new e.GradientFillPath;if(c.gradientType=i,c.colors=r,c.alphas=n,c.ratios=s,c.matrix=h,o){var l=this.drawData.lastIndexOf(o);this.drawData.splice(l,0,c)}else this.drawData.push(c);return this.renderCount++,c},s.prototype.lineStyle=function(n,s,a,o,h,c,l){void 0===a&&(a=1),void 0===c&&(c=3),void 0===l&&(l=[]),-1==i.indexOf(o)&&(o="round"),-1==r.indexOf(h)&&(h="round");var u=new e.StrokePath;return u.lineWidth=n,u.lineColor=s,u.lineAlpha=a,u.caps=o||t.CapsStyle.ROUND,u.joints=h,u.miterLimit=c,u.lineDash=l,this.drawData.push(u),this.renderCount++,u},s.prototype.clear=function(){this.drawData.length=0,this.dirtyRender=!0,this.renderCount=0},s.prototype.cleanBeforeRender=function(){},s.prototype.clean=function(){this.$texture&&(t.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},s}(e.RenderNode);e.GraphicsNode=n,__reflect(n.prototype,"egret.sys.GraphicsNode")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=4,e}return __extends(e,t),e.prototype.addNode=function(t){this.drawData.push(t)},e.prototype.cleanBeforeRender=function(){for(var t=this.drawData,e=t.length-1;e>=0;e--)t[e].cleanBeforeRender()},e.prototype.$getRenderCount=function(){for(var t=0,e=this.drawData,i=e.length-1;i>=0;i--)t+=e[i].$getRenderCount();return t},e}(t.RenderNode);t.GroupNode=e,__reflect(e.prototype,"egret.sys.GroupNode")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(){var i=e.call(this)||this;return i.image=null,i.smoothing=!0,i.bounds=new t.Rectangle,i.blendMode=null,i.alpha=NaN,i.filter=null,i.rotated=!1,i.type=5,i.vertices=[],i.uvs=[],i.indices=[],i}return __extends(i,e),i.prototype.drawMesh=function(t,e,i,r,n,s,a,o){this.drawData.push(t,e,i,r,n,s,a,o),this.renderCount++},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null},i}(e.RenderNode);e.MeshNode=i,__reflect(i.prototype,"egret.sys.MeshNode")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.image=null,e.smoothing=!0,e.rotated=!1,e.type=6,e}return __extends(e,t),e.prototype.drawImage=function(t,e,i,r,n,s,a,o){this.sourceX=t,this.sourceY=e,this.sourceW=i,this.sourceH=r,this.drawX=n,this.drawY=s,this.drawW=a,this.drawH=o,this.renderCount=1},e.prototype.cleanBeforeRender=function(){t.prototype.cleanBeforeRender.call(this),this.image=null},e}(t.RenderNode);t.NormalBitmapNode=e,__reflect(e.prototype,"egret.sys.NormalBitmapNode")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r._verticesDirty=!0,r._bounds=new t.Rectangle,r.$renderNode=new t.sys.MeshNode,r}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(12)},i.prototype.setBitmapDataToWasm=function(t){this.$nativeDisplayObject.setBitmapDataToMesh(t)},i.prototype.$updateRenderNode=function(){var e=this.$bitmapData;if(e){t.$TextureScaleFactor;var i=this.$renderNode;i.smoothing=this.$smoothing,i.image=e,i.imageWidth=this.$sourceWidth,i.imageHeight=this.$sourceHeight;var r=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,n=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight,s=r/this.$textureWidth,a=n/this.$textureHeight,o=this.$bitmapWidth,h=this.$bitmapHeight;i.drawMesh(this.$bitmapX,this.$bitmapY,o,h,this.$offsetX*s,this.$offsetY*a,s*o,a*h)}},i.prototype.$updateVertices=function(){if(this._verticesDirty=!0,this.$renderDirty=!0,t.nativeRender){var e=this.$renderNode;this.$nativeDisplayObject.setDataToMesh(e.vertices,e.indices,e.uvs)}else{var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},i.prototype.$measureContentBounds=function(t){if(this._verticesDirty){this._verticesDirty=!1;var e=this.$renderNode,i=e.vertices;if(i.length){this._bounds.setTo(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var r=0,n=i.length;r<n;r+=2){var s=i[r],a=i[r+1];this._bounds.x>s&&(this._bounds.x=s),this._bounds.width<s&&(this._bounds.width=s),this._bounds.y>a&&(this._bounds.y=a),this._bounds.height<a&&(this._bounds.height=a)}this._bounds.width-=this._bounds.x,this._bounds.height-=this._bounds.y}else this._bounds.setTo(0,0,0,0);e.bounds.copyFrom(this._bounds)}t.copyFrom(this._bounds)},i}(t.Bitmap);t.Mesh=e,__reflect(e.prototype,"egret.Mesh")}(egret||(egret={})),function(t){!function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.textColor=16777215,t.strokeColor=0,t.size=30,t.stroke=0,t.bold=!1,t.italic=!1,t.fontFamily="Arial",t.dirtyRender=!0,t.type=2,t}return __extends(i,e),i.prototype.drawText=function(t,e,i,r){this.drawData.push(t,e,i,r),this.renderCount++,this.dirtyRender=!0},i.prototype.clean=function(){this.$texture&&(t.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.dirtyRender=!0},i}(e.RenderNode);e.TextNode=i,__reflect(i.prototype,"egret.sys.TextNode")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=1,e}return __extends(e,t),e}(t.Path2D);t.FillPath=e,__reflect(e.prototype,"egret.sys.FillPath")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=2,e}return __extends(e,t),e}(t.Path2D);t.GradientFillPath=e,__reflect(e.prototype,"egret.sys.GradientFillPath")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){t.OrientationMode={AUTO:"auto",PORTRAIT:"portrait",LANDSCAPE:"landscape",LANDSCAPE_FLIPPED:"landscapeFlipped"}}(egret||(egret={})),function(t){!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=3,e}return __extends(e,t),e}(t.Path2D);t.StrokePath=e,__reflect(e.prototype,"egret.sys.StrokePath")}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){var e=["source-over","lighter","destination-out"],i={none:"butt",square:"square",round:"round"},r=[],n=[],s=function(){function s(){this.nestLevel=0,this.renderingMask=!1}return s.prototype.render=function(e,i,n,s){this.nestLevel++;var a=i.context;a.transform(n.a,n.b,n.c,n.d,0,0);var o=this.drawDisplayObject(e,a,n.tx,n.ty,!0),h=t.Matrix.create();if(n.$invertInto(h),a.transform(h.a,h.b,h.c,h.d,0,0),t.Matrix.release(h),this.nestLevel--,0===this.nestLevel){r.length>6&&(r.length=6);for(var c=r.length,l=0;l<c;l++)r[l].resize(0,0)}return o},s.prototype.drawDisplayObject=function(e,i,r,n,s){var a,o=0,h=e.$displayList;if(h&&!s?((e.$cacheDirty||e.$renderDirty||h.$canvasScaleX!=t.sys.DisplayList.$canvasScaleX||h.$canvasScaleY!=t.sys.DisplayList.$canvasScaleY)&&(o+=h.drawToSurface()),a=h.$renderNode):a=e.$renderDirty?e.$getRenderNode():e.$renderNode,e.$cacheDirty=!1,a){switch(o++,i.$offsetX=r,i.$offsetY=n,a.type){case 1:this.renderBitmap(a,i);break;case 2:this.renderText(a,i);break;case 3:this.renderGraphics(a,i);break;case 4:this.renderGroup(a,i);break;case 5:this.renderMesh(a,i);break;case 6:this.renderNormalBitmap(a,i)}i.$offsetX=0,i.$offsetY=0}if(h&&!s)return o;var c=e.$children;if(c)for(var l=c.length,u=0;u<l;u++){var p=c[u],d=void 0,f=void 0;if(p.$useTranslate){var $=p.$getMatrix();d=r+p.$x,f=n+p.$y,i.save(),i.transform($.a,$.b,$.c,$.d,d,f),d=-p.$anchorOffsetX,f=-p.$anchorOffsetY}else d=r+p.$x-p.$anchorOffsetX,f=n+p.$y-p.$anchorOffsetY;var g=void 0;switch(1!=p.$alpha&&(g=i.globalAlpha,i.globalAlpha*=p.$alpha),p.$renderMode){case 1:break;case 2:o+=this.drawWithFilter(p,i,d,f);break;case 3:o+=this.drawWithClip(p,i,d,f);break;case 4:o+=this.drawWithScrollRect(p,i,d,f);break;default:o+=this.drawDisplayObject(p,i,d,f)}p.$useTranslate?i.restore():g&&(i.globalAlpha=g)}return o},s.prototype.drawWithFilter=function(t,i,r,s){if(t.$children&&0==t.$children.length&&(!t.$renderNode||0==t.$renderNode.$getRenderCount()))return 0;var a,o=0,h=t.$filters,c=h.length,l=0!==t.$blendMode;l&&((a=e[t.$blendMode])||(a="source-over"));var f=t.$getOriginalBounds(),g=f.x,y=f.y,v=f.width,b=f.height;if(v<=0||b<=0)return o;var m=this.createRenderBuffer(v-g,b-y,!0),x=m.context;if(t.$mask?o+=this.drawWithClip(t,x,-g,-y):t.$scrollRect||t.$maskRect?o+=this.drawWithScrollRect(t,x,-g,-y):o+=this.drawDisplayObject(t,x,-g,-y),o>0){l&&(i.globalCompositeOperation=a),o++;for(var T=x.getImageData(0,0,m.surface.width,m.surface.height),_=0;_<c;_++){var D=h[_];if("colorTransform"==D.type)u(T.data,m.surface.width,m.surface.height,D.$matrix);else if("blur"==D.type)p(T.data,m.surface.width,m.surface.height,D.$blurX,D.$blurY);else if("glow"==D.type){var O=D.$red,w=D.$green,E=D.$blue,C=D.$alpha;D.$inner||D.$knockout||D.$hideObject?$(T.data,m.surface.width,m.surface.height,[O/255,w/255,E/255,C],D.$blurX,D.$blurY,D.$angle?D.$angle/180*Math.PI:0,D.$distance||0,D.$strength,D.$inner?1:0,D.$knockout?0:1,D.$hideObject?1:0):d(T.data,m.surface.width,m.surface.height,[O/255,w/255,E/255,C],D.$blurX,D.$blurY,D.$angle?D.$angle/180*Math.PI:0,D.$distance||0,D.$strength)}else D.type}x.putImageData(T,0,0),i.drawImage(m.surface,r+g,s+y),l&&(i.globalCompositeOperation="source-over")}return n.push(m),o},s.prototype.drawWithClip=function(i,n,s,a){var o,h=0,c=0!==i.$blendMode;c&&((o=e[i.$blendMode])||(o="source-over"));var l=i.$scrollRect?i.$scrollRect:i.$maskRect,u=i.$mask;if(u){var p=u.$getMatrix();if(0==p.a&&0==p.b||0==p.c&&0==p.d)return h}if(!(u||i.$children&&0!=i.$children.length))return l&&(n.save(),n.beginPath(),n.rect(l.x+s,l.y+a,l.width,l.height),n.clip()),c&&(n.globalCompositeOperation=o),h+=this.drawDisplayObject(i,n,s,a),c&&(n.globalCompositeOperation="source-over"),l&&n.restore(),h;if(u){var d=u.$getRenderNode();if((!u.$children||0==u.$children.length)&&d&&3==d.type&&1==d.drawData.length&&1==d.drawData[0].type&&1==d.drawData[0].fillAlpha){this.renderingMask=!0,n.save(),(T=t.Matrix.create()).copyFrom(u.$getConcatenatedMatrix()),u.$getConcatenatedMatrixAt(i,T),T.prepend(1,0,0,1,s,a),n.transform(T.a,T.b,T.c,T.d,T.tx,T.ty);var f=this.drawDisplayObject(u,n,0,0);return this.renderingMask=!1,T.$invertInto(T),n.transform(T.a,T.b,T.c,T.d,T.tx,T.ty),t.Matrix.release(T),l&&(n.beginPath(),n.rect(l.x+s,l.y+a,l.width,l.height),n.clip()),f+=this.drawDisplayObject(i,n,s,a),n.restore(),f}}var $=i.$getOriginalBounds(),g=$.x,y=$.y,v=$.width,b=$.height;if(v<=0||b<=0)return h;var m=this.createRenderBuffer(v,b),x=m.context;if(!x)return h+=this.drawDisplayObject(i,n,s,a);if(h+=this.drawDisplayObject(i,x,-g,-y),u){var T;d=u.$getRenderNode();if((T=t.Matrix.create()).copyFrom(u.$getConcatenatedMatrix()),u.$getConcatenatedMatrixAt(i,T),T.translate(-g,-y),d&&1==d.$getRenderCount()||u.$displayList)x.globalCompositeOperation="destination-in",x.save(),x.setTransform(T.a,T.b,T.c,T.d,T.tx,T.ty),h+=this.drawDisplayObject(u,x,0,0),x.restore();else{var _=this.createRenderBuffer(v,b),D=_.context;D.setTransform(T.a,T.b,T.c,T.d,T.tx,T.ty),h+=this.drawDisplayObject(u,D,0,0),x.globalCompositeOperation="destination-in",x.drawImage(_.surface,0,0),r.push(_)}t.Matrix.release(T)}return h>0&&(h++,c&&(n.globalCompositeOperation=o),l&&(n.save(),n.beginPath(),n.rect(l.x+s,l.y+a,l.width,l.height),n.clip()),n.drawImage(m.surface,s+g,a+y),l&&n.restore(),c&&(n.globalCompositeOperation="source-over")),r.push(m),h},s.prototype.drawWithScrollRect=function(t,e,i,r){var n=0,s=t.$scrollRect?t.$scrollRect:t.$maskRect;return s.isEmpty()?n:(t.$scrollRect&&(i-=s.x,r-=s.y),e.save(),e.beginPath(),e.rect(s.x+i,s.y+r,s.width,s.height),e.clip(),n+=this.drawDisplayObject(t,e,i,r),e.restore(),n)},s.prototype.drawNodeToBuffer=function(t,e,i,r){var n=e.context;n.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.renderNode(t,n,r)},s.prototype.drawDisplayToBuffer=function(t,e,i){var r,n=e.context;i&&n.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty);var s=0;if(r=t.$renderDirty?t.$getRenderNode():t.$renderNode)switch(s++,r.type){case 1:this.renderBitmap(r,n);break;case 2:this.renderText(r,n);break;case 3:this.renderGraphics(r,n);break;case 4:this.renderGroup(r,n);break;case 5:this.renderMesh(r,n);break;case 6:this.renderNormalBitmap(r,n)}var a=t.$children;if(a)for(var o=a.length,h=0;h<o;h++){var c=a[h];switch(c.$renderMode){case 1:break;case 2:s+=this.drawWithFilter(c,n,0,0);break;case 3:s+=this.drawWithClip(c,n,0,0);break;case 4:s+=this.drawWithScrollRect(c,n,0,0);break;default:s+=this.drawDisplayObject(c,n,0,0)}}return s},s.prototype.renderNode=function(t,e,i){var r=0;switch(t.type){case 1:r=this.renderBitmap(t,e);break;case 2:r=1,this.renderText(t,e);break;case 3:r=this.renderGraphics(t,e,i);break;case 4:r=this.renderGroup(t,e);break;case 5:r=this.renderMesh(t,e);break;case 6:r+=this.renderNormalBitmap(t,e)}return r},s.prototype.renderNormalBitmap=function(t,e){var i=t.image;if(!i||!i.source)return 0;if(e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing),t.rotated){var r=t.sourceX,n=t.sourceY,s=t.sourceW,a=t.sourceH,o=t.drawX,h=t.drawY,c=t.drawW,l=t.drawH;e.save(),e.transform(0,-1,1,0,0,l),e.drawImage(i.source,r,n,a,s,o+e.$offsetX,h+e.$offsetY,l,c),e.restore()}else e.drawImage(i.source,t.sourceX,t.sourceY,t.sourceW,t.sourceH,t.drawX+e.$offsetX,t.drawY+e.$offsetY,t.drawW,t.drawH);return 1},s.prototype.renderBitmap=function(t,i){var n=t.image;if(!n||!n.source)return 0;i.$imageSmoothingEnabled!=t.smoothing&&(i.imageSmoothingEnabled=t.smoothing,i.$imageSmoothingEnabled=t.smoothing);var s,a,o,h=t.drawData,c=h.length,l=0,p=t.matrix,d=t.blendMode,f=t.alpha,$=!1;p&&(i.save(),$=!0,0==i.$offsetX&&0==i.$offsetY||(i.translate(i.$offsetX,i.$offsetY),s=i.$offsetX,a=i.$offsetY,i.$offsetX=i.$offsetY=0),i.transform(p.a,p.b,p.c,p.d,p.tx,p.ty)),d&&(i.globalCompositeOperation=e[d]),f==f&&(o=i.globalAlpha,i.globalAlpha*=f);var g=0,y=t.filter;if(y&&8==c){var v=h[0],b=h[1],m=h[2],x=h[3],T=h[4],_=h[5],D=h[6],O=h[7];t.rotated&&(m=h[3],x=h[2],D=h[7],O=h[6]);var w=this.createRenderBuffer(D,O),E=w.context;g++,t.rotated&&i.transform(0,-1,1,0,0,D),E.drawImage(n.source,v,b,m,x,0,0,D,O),g++;var C=E.getImageData(0,0,D,O);u(C.data,D,O,y.$matrix),E.putImageData(C,0,0),i.drawImage(w.surface,0,0,D,O,T+i.$offsetX,_+i.$offsetY,D,O),r.push(w)}else for(;l<c;)if(g++,t.rotated){v=h[l++],b=h[l++],x=h[l++],m=h[l++];var S=h[l++],R=h[l++];O=h[l++],D=h[l++];i.save(),i.transform(0,-1,1,0,0,D),i.drawImage(n.source,v,b,m,x,S+i.$offsetX,R+i.$offsetY,D,O),i.restore()}else i.drawImage(n.source,h[l++],h[l++],h[l++],h[l++],h[l++]+i.$offsetX,h[l++]+i.$offsetY,h[l++],h[l++]);return $?i.restore():(d&&(i.globalCompositeOperation="source-over"),f==f&&(i.globalAlpha=o)),s&&(i.$offsetX=s),a&&(i.$offsetY=a),g},s.prototype.renderMesh=function(t,e){return 0},s.prototype.renderText=function(e,i){i.textAlign="left",i.textBaseline="middle",i.lineJoin="round";for(var r=e.drawData,n=r.length,s=0;s<n;){var o=r[s++],h=r[s++],c=r[s++],l=r[s++];i.font=a(e,l);var u=null==l.textColor?e.textColor:l.textColor,p=null==l.strokeColor?e.strokeColor:l.strokeColor,d=null==l.stroke?e.stroke:l.stroke;i.fillStyle=t.toColorString(u),i.strokeStyle=t.toColorString(p),d&&(i.lineWidth=2*d,i.strokeText(c,o+i.$offsetX,h+i.$offsetY)),i.fillText(c,o+i.$offsetX,h+i.$offsetY)}},s.prototype.renderGraphics=function(t,e,r){var n=t.drawData,s=n.length;r=!!r;for(var a=0;a<s;a++){var c=n[a];switch(c.type){case 1:var l=c;e.fillStyle=r?"#000000":o(l.fillColor,l.fillAlpha),this.renderPath(c,e),this.renderingMask?e.clip():e.fill();break;case 2:var u=c;e.fillStyle=r?"#000000":h(e,u.gradientType,u.colors,u.alphas,u.ratios,u.matrix),e.save();var p=u.matrix;this.renderPath(c,e),e.transform(p.a,p.b,p.c,p.d,p.tx,p.ty),e.fill(),e.restore();break;case 3:var d=c,f=d.lineWidth;e.lineWidth=f,e.strokeStyle=r?"#000000":o(d.lineColor,d.lineAlpha),e.lineCap=i[d.caps],e.lineJoin=d.joints,e.miterLimit=d.miterLimit,e.setLineDash&&e.setLineDash(d.lineDash);var $=1===f||3===f;$&&e.translate(.5,.5),this.renderPath(c,e),e.stroke(),$&&e.translate(-.5,-.5)}}return 0==s?0:1},s.prototype.renderPath=function(t,e){e.beginPath();for(var i=t.$data,r=t.$commands,n=r.length,s=0,a=0;a<n;a++){switch(r[a]){case 4:e.bezierCurveTo(i[s++]+e.$offsetX,i[s++]+e.$offsetY,i[s++]+e.$offsetX,i[s++]+e.$offsetY,i[s++]+e.$offsetX,i[s++]+e.$offsetY);break;case 3:e.quadraticCurveTo(i[s++]+e.$offsetX,i[s++]+e.$offsetY,i[s++]+e.$offsetX,i[s++]+e.$offsetY);break;case 2:e.lineTo(i[s++]+e.$offsetX,i[s++]+e.$offsetY);break;case 1:e.moveTo(i[s++]+e.$offsetX,i[s++]+e.$offsetY)}}},s.prototype.renderGroup=function(t,e){var i,r,n=t.matrix,s=!1;n&&(e.save(),s=!0,0==e.$offsetX&&0==e.$offsetY||(e.translate(e.$offsetX,e.$offsetY),i=e.$offsetX,r=e.$offsetY,e.$offsetX=e.$offsetY=0),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty));for(var a=0,o=t.drawData,h=o.length,c=0;c<h;c++){var l=o[c];a+=this.renderNode(l,e)}return s&&e.restore(),i&&(e.$offsetX=i),r&&(e.$offsetY=r),a},s.prototype.createRenderBuffer=function(e,i,s){var a=s?n.pop():r.pop();return a?a.resize(e,i,!0):a=new t.sys.CanvasRenderBuffer(e,i),a},s}();function a(t,e){var i=null==e.italic?t.italic:e.italic,r=null==e.bold?t.bold:e.bold,n=null==e.size?t.size:e.size,s=e.fontFamily||t.fontFamily,a=i?"italic ":"normal ";return a+=r?"bold ":"normal ",a+=n+"px "+s}function o(t,e){return"rgba("+(t>>16)+","+(t>>8&255)+","+(255&t)+","+e+")"}function h(e,i,r,n,s,a){var h;h=i==t.GradientType.LINEAR?e.createLinearGradient(-1,0,1,0):e.createRadialGradient(0,0,0,0,0,1);for(var c=r.length,l=0;l<c;l++)h.addColorStop(s[l]/255,o(r[l],n[l]));return h}t.CanvasRenderer=s,__reflect(s.prototype,"egret.CanvasRenderer"),t.getFontString=a,t.getRGBAString=o;var c=!1;try{c=void 0!==("undefined"==typeof Uint8ClampedArray?"undefined":_typeof(Uint8ClampedArray))}catch(t){}function l(t,e,i){void 0===i&&(i=0);for(var r=0,n=e.length;r<n;r++)t[r+i]=e[r]}function u(t,e,i,r){for(var n=r[0],s=r[1],a=r[2],o=r[3],h=r[4],c=r[5],l=r[6],u=r[7],p=r[8],d=r[9],f=r[10],$=r[11],g=r[12],y=r[13],v=r[14],b=r[15],m=r[16],x=r[17],T=r[18],_=r[19],D=0,O=e*i*4;D<O;D+=4){var w=t[D+0],E=t[D+1],C=t[D+2],S=t[D+3];t[D+0]=n*w+s*E+a*C+o*S+h,t[D+1]=c*w+l*E+u*C+p*S+d,t[D+2]=f*w+$*E+g*C+y*S+v,t[D+3]=b*w+m*E+x*C+T*S+_}}function p(t,e,i,r,n){!function(t,e,i,r){var n;n=c?new Uint8ClampedArray(4*e):new Array(4*e);for(var s=4*e,a=2*r+1,o=0;o<i;o++){for(var h=o*s,u=0,p=0,d=0,f=0,$=0,g=0,y=4*-r,v=4*r+4;y<v;y+=4){var b=h+y;b<h||b>=h+s||($=t[b+3],u+=t[b+0]*$,p+=t[b+1]*$,d+=t[b+2]*$,f+=$)}for(var y=h,v=h+s,m=0,x=y-4*r,T=y+4*(r+1);y<v;y+=4,m+=4,T+=4,x+=4)0===f?(n[m+0]=0,n[m+1]=0,n[m+2]=0,n[m+3]=0):(n[m+0]=u/f,n[m+1]=p/f,n[m+2]=d/f,n[m+3]=f/a),$=t[T+3],g=t[x+3],$||0==$?g||0==g?(u+=t[T+0]*$-t[x+0]*g,p+=t[T+1]*$-t[x+1]*g,d+=t[T+2]*$-t[x+2]*g,f+=$-g):(u+=t[T+0]*$,p+=t[T+1]*$,d+=t[T+2]*$,f+=$):(g||0==g)&&(u+=-t[x+0]*g,p+=-t[x+1]*g,d+=-t[x+2]*g,f+=-g);c?t.set(n,h):l(t,n,h)}}(t,e,i,r),function(t,e,i,r){var n;n=c?new Uint8ClampedArray(4*i):new Array(4*i);for(var s=4*e,a=2*r+1,o=0;o<e;o++){for(var h=4*o,l=0,u=0,p=0,d=0,f=0,$=0,g=-r*s,y=r*s+s;g<y;g+=s){var v=h+g;v<h||v>=h+i*s||(f=t[v+3],l+=t[v+0]*f,u+=t[v+1]*f,p+=t[v+2]*f,d+=f)}for(var g=h,y=h+i*s,b=0,m=h-r*s,x=h+(r+1)*s;g<y;g+=s,b+=4,x+=s,m+=s)0===d?(n[b+0]=0,n[b+1]=0,n[b+2]=0,n[b+3]=0):(n[b+0]=l/d,n[b+1]=u/d,n[b+2]=p/d,n[b+3]=d/a),f=t[x+3],$=t[m+3],f||0==f?$||0==$?(l+=t[x+0]*f-t[m+0]*$,u+=t[x+1]*f-t[m+1]*$,p+=t[x+2]*f-t[m+2]*$,d+=f-$):(l+=t[x+0]*f,u+=t[x+1]*f,p+=t[x+2]*f,d+=f):($||0==$)&&(l+=-t[m+0]*$,u+=-t[m+1]*$,p+=-t[m+2]*$,d+=-$);for(var T=4*o,y=T+i*s,_=0;T<y;T+=s,_+=4)t[T+0]=n[_+0],t[T+1]=n[_+1],t[T+2]=n[_+2],t[T+3]=n[_+3]}}(t,e,i,n)}function d(t,e,i,r,n,s,a,o,h){var u=function(t,e){e||(e=[0,0,0,0]);var i;c?i=new Uint8ClampedArray(t):l(i=new Array(t.length),t);for(var r=e[0],n=e[1],s=e[2],a=e[3],o=0,h=i.length;o<h;o+=4){var u=i[o+3];i[o+0]=r*u,i[o+1]=n*u,i[o+2]=s*u,i[o+3]=a*u}return i}(t,r);!function(t,e,i,r,n){var s,a,o=Math.sin(r)*n|0,h=Math.cos(r)*n|0;if(c){s=new Int32Array(t.buffer),a=new Int32Array(s.length);for(var u=0;u<i;u++){var p=u+o;if(!(p<0||p>i))for(var d=0;d<e;d++){var f=d+h;f<0||f>e||(a[p*e+f]=s[u*e+d])}}s.set(a)}else{s=t,a=new Array(s.length);for(var u=0;u<i;u++){var p=u+o;if(!(p<0||p>i))for(var d=0;d<e;d++){var f=d+h;f<0||f>e||(a[4*(p*e+f)+0]=s[4*(u*e+d)+0],a[4*(p*e+f)+1]=s[4*(u*e+d)+1],a[4*(p*e+f)+2]=s[4*(u*e+d)+2],a[4*(p*e+f)+3]=s[4*(u*e+d)+3])}}l(s,a)}}(u,e,i,a,o),p(u,e,i,n,s),function(t,e){for(var i=0,r=t.length;i<r;i+=4)t[i+3]*=e}(u,h),function(t,e){for(var i=0,r=t.length;i<r;i+=4){var n=t[i+0],s=t[i+1],a=t[i+2],o=t[i+3]/255,h=e[i+0],c=e[i+1],l=e[i+2],u=e[i+3]/255;t[i+0]=h+n*(1-u),t[i+1]=c+s*(1-u),t[i+2]=l+a*(1-u),t[i+3]=255*(u+o*(1-u))}}(u,t),t.set(u),c?t.set(u):l(t,u)}function f(t,e,i){return t*(1-i)+e*i}function $(t,e,i,r,n,s,a,o,h,u,p,d){var $;$=c?new Uint8ClampedArray(t.length):new Array(t.length);for(var g,y,v=r[3],b=0,m=0,x=o*Math.cos(a),T=o*Math.sin(a),_=3.141592653589793,D=n/7,O=s/7,w=0;w<e;w++)for(var E=0;E<i;E++){for(var C=E*e*4+4*w,S=0,R=0,F=t[C+0]/255,P=t[C+1]/255,M=t[C+2]/255,N=t[C+3]/255,j=0;j<=2*_;j+=2*_/12){g=Math.cos(j+0),y=Math.sin(j+0);for(var A=0;A<7;A++){b=A*D*g,m=A*O*y;var B=Math.round(w+b-x),k=Math.round(E+m-T),L=0;if(B>=e||B<0||k<0||k>=i)L=0;else L=t[k*e*4+4*B+3]/255;S+=(7-A)*L,R+=7-A}}N=Math.max(N,1e-4);var I=S/R*h*v*(1-u)*Math.max(Math.min(d,p),1-N),U=(R-S)/R*h*v*u*N,X=U/(U+(N=Math.max(N*p*(1-d),1e-4))),H=f(F,r[0],X),Y=f(P,r[1],X),W=f(M,r[2],X),G=I/(U+N+I),z=f(H,r[0],G),V=f(Y,r[1],G),q=f(W,r[2],G),K=Math.min(N+I+U,1);$[C+0]=255*z,$[C+1]=255*V,$[C+2]=255*q,$[C+3]=255*K}c?t.set($):l(t,$)}}(egret||(egret={})),function(t){t.DeviceOrientation=null}(egret||(egret={})),egret||(egret={}),egret||(egret={}),function(t){!function(t){t.WEB="web",t.NATIVE="native",t.RUNTIME2="runtime2",t.MYGAME="mygame",t.WXGAME="wxgame",t.BAIDUGAME="baidugame",t.QGAME="qgame",t.OPPOGAME="oppogame",t.QQGAME="qqgame",t.VIVOGAME="vivogame"}(t.RuntimeType||(t.RuntimeType={}));var e=function(){function e(){}return e.language="zh-CN",e.os="Unknown",e.runtimeType=t.RuntimeType.WEB,e.engineVersion="5.2.25",e.renderMode="Unknown",e.boundingClientWidth=0,e.boundingClientHeight=0,e}();t.Capabilities=e,__reflect(e.prototype,"egret.Capabilities")}(egret||(egret={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;i.$renderBuffer=new t.sys.RenderBuffer;var r=new t.BitmapData(i.$renderBuffer.surface);return r.$deleteSource=!1,i._setBitmapData(r),i}return __extends(i,e),i.prototype.drawToTexture=function(e,i,r){if(void 0===r&&(r=1),i&&(0==i.width||0==i.height))return!1;var n=i||e.$getOriginalBounds();if(0==n.width||0==n.height)return!1;r/=t.$TextureScaleFactor;var s=(n.x+n.width)*r,a=(n.y+n.height)*r;i&&(s=n.width*r,a=n.height*r);var o=this.$renderBuffer;if(!o)return!1;if(o.resize(s,a),this.$bitmapData.width=s,this.$bitmapData.height=a,t.nativeRender){egret_native.activateBuffer(this.$renderBuffer);var h=!1,c=0,l=0,u=0,p=0;i&&(h=!0,c=i.x,l=i.y,u=i.width,p=i.height),egret_native.updateNativeRender(),egret_native.nrRenderDisplayObject(e.$nativeDisplayObject.id,r,h,c,l,u,p),egret_native.activateBuffer(null)}else{var d=t.Matrix.create();d.identity(),d.scale(r,r),i&&d.translate(-i.x,-i.y),t.sys.systemRenderer.render(e,o,d,!0),t.Matrix.release(d)}return this.$initData(0,0,s,a,0,0,s,a,s,a),!0},i.prototype.getPixel32=function(e,i){var r;if(this.$renderBuffer){var n=t.$TextureScaleFactor;e=Math.round(e/n),i=Math.round(i/n),r=this.$renderBuffer.getPixels(e,i,1,1)}return r},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.$renderBuffer=null},i}(t.Texture);t.RenderTexture=e,__reflect(e.prototype,"egret.RenderTexture")}(egret||(egret={})),function(t){var e={};t.registerImplementation=function(t,i){e[t]=i},t.getImplementation=function(t){return e[t]}}(egret||(egret={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(8)},Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$hitTest=function(t,i){var r=e.prototype.$hitTest.call(this,t,i);return r==this&&(r=this.$graphics.$hitTest(t,i)),r},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.DisplayObject);t.Shape=e,__reflect(e.prototype,"egret.Shape")}(egret||(egret={})),function(t){var e=function(t){function e(e,i){var r=t.call(this,e)||this;return r.firstCharHeight=0,"string"==typeof i?r.charList=r.parseConfig(i):i&&i.hasOwnProperty("frames")?r.charList=i.frames:r.charList={},r}return __extends(e,t),e.prototype.getTexture=function(t){var e=this._textureMap[t];if(!e){var i=this.charList[t];if(!i)return null;e=this.createTexture(t,i.x,i.y,i.w,i.h,i.offX,i.offY,i.sourceW,i.sourceH),this._textureMap[t]=e}return e},e.prototype.getConfig=function(t,e){return this.charList[t]?this.charList[t][e]:0},e.prototype._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var t in this.charList){var e=this.charList[t];if(e){var i=e.sourceH;if(void 0===i){var r=e.h;void 0===r&&(r=0);var n=e.offY;void 0===n&&(n=0),i=r+n}if(i<=0)continue;this.firstCharHeight=i;break}}return this.firstCharHeight},e.prototype.parseConfig=function(t){for(var e=(t=t.split("\r\n").join("\n")).split("\n"),i=this.getConfigByKey(e[3],"count"),r={},n=4;n<4+i;n++){var s=e[n],a={};r[String.fromCharCode(this.getConfigByKey(s,"id"))]=a,a.x=this.getConfigByKey(s,"x"),a.y=this.getConfigByKey(s,"y"),a.w=this.getConfigByKey(s,"width"),a.h=this.getConfigByKey(s,"height"),a.offX=this.getConfigByKey(s,"xoffset"),a.offY=this.getConfigByKey(s,"yoffset"),a.xadvance=this.getConfigByKey(s,"xadvance")}return r},e.prototype.getConfigByKey=function(t,e){for(var i=t.split(" "),r=0,n=i.length;r<n;r++){var s=i[r];if(e==s.substring(0,e.length)){var a=s.substring(e.length+1);return parseInt(a)}}return 0},e}(t.SpriteSheet);t.BitmapFont=e,__reflect(e.prototype,"egret.BitmapFont")}(egret||(egret={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$smoothing=t.Bitmap.defaultSmoothing,i.$text="",i.$textFieldWidth=NaN,i.$textLinesChanged=!1,i.$textFieldHeight=NaN,i.$font=null,i.$fontStringChanged=!1,i.$lineSpacing=0,i.$letterSpacing=0,i.$textAlign=t.HorizontalAlign.LEFT,i.$verticalAlign=t.VerticalAlign.TOP,i.$textWidth=NaN,i.$textHeight=NaN,i.$textOffsetX=0,i.$textOffsetY=0,i.$textStartX=0,i.$textStartY=0,i.textLines=[],i.$lineHeights=[],t.nativeRender||(i.$renderNode=new t.sys.BitmapNode),i}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(11)},Object.defineProperty(i.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(e){if(e!=this.$smoothing&&(this.$smoothing=e,!t.nativeRender)){var i=this.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=this.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.$text},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),i.prototype.$setText=function(t){return(t=null==t?"":String(t))!=this.$text&&(this.$text=t,this.$invalidateContentBounds(),!0)},i.prototype.$getWidth=function(){var t=this.$textFieldWidth;return isNaN(t)?this.$getContentBounds().width:t},i.prototype.$setWidth=function(t){return!(t<0||t==this.$textFieldWidth)&&(this.$textFieldWidth=t,this.$invalidateContentBounds(),!0)},i.prototype.$invalidateContentBounds=function(){this.$renderDirty=!0,this.$textLinesChanged=!0,this.$updateRenderNode()},i.prototype.$getHeight=function(){var t=this.$textFieldHeight;return isNaN(t)?this.$getContentBounds().height:t},i.prototype.$setHeight=function(t){return!(t<0||t==this.$textFieldHeight)&&(this.$textFieldHeight=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"font",{get:function(){return this.$font},set:function(t){this.$setFont(t)},enumerable:!0,configurable:!0}),i.prototype.$setFont=function(t){return this.$font!=t&&(this.$font=t,this.$fontStringChanged=!0,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"lineSpacing",{get:function(){return this.$lineSpacing},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),i.prototype.$setLineSpacing=function(t){return this.$lineSpacing!=t&&(this.$lineSpacing=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this.$letterSpacing},set:function(t){this.$setLetterSpacing(t)},enumerable:!0,configurable:!0}),i.prototype.$setLetterSpacing=function(t){return this.$letterSpacing!=t&&(this.$letterSpacing=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"textAlign",{get:function(){return this.$textAlign},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),i.prototype.$setTextAlign=function(t){return this.$textAlign!=t&&(this.$textAlign=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),i.prototype.$setVerticalAlign=function(t){return this.$verticalAlign!=t&&(this.$verticalAlign=t,this.$invalidateContentBounds(),!0)},i.prototype.$updateRenderNode=function(){var e=this.$getTextLines(),r=e.length;if(0!=r){var n,s=[],a=this.$textLinesWidth,o=this.$font;t.nativeRender||(n=this.$renderNode,o.$texture&&(n.image=o.$texture.$bitmapData),n.smoothing=this.$smoothing);for(var h=o._getFirstCharHeight(),c=Math.ceil(h*i.EMPTY_FACTOR),l=!isNaN(this.$textFieldHeight),u=this.$textWidth,p=this.$textFieldWidth,d=this.$textFieldHeight,f=this.$textAlign,$=this.$textOffsetY+this.$textStartY,g=this.$lineHeights,y=0;y<r;y++){var v=g[y];if(l&&y>0&&$+v>d)break;var b=e[y],m=b.length,x=this.$textOffsetX;if(f!=t.HorizontalAlign.LEFT){var T=p>u?p:u;f==t.HorizontalAlign.RIGHT?x+=T-a[y]:f==t.HorizontalAlign.CENTER&&(x+=Math.floor((T-a[y])/2))}for(var _=0;_<m;_++){var D=b.charAt(_),O=o.getTexture(D);if(O){var w=O.$bitmapWidth,E=O.$bitmapHeight;t.nativeRender?s.push(O.$bitmapX,O.$bitmapY,w,E,x+O.$offsetX,$+O.$offsetY,O.$getScaleBitmapWidth(),O.$getScaleBitmapHeight(),O.$sourceWidth,O.$sourceHeight):(n.imageWidth=O.$sourceWidth,n.imageHeight=O.$sourceHeight,n.drawImage(O.$bitmapX,O.$bitmapY,w,E,x+O.$offsetX,$+O.$offsetY,O.$getScaleBitmapWidth(),O.$getScaleBitmapHeight())),x+=(o.getConfig(D,"xadvance")||O.$getTextureWidth())+this.$letterSpacing}else" "==D?x+=c:t.$warn(1046,D)}$+=v+this.$lineSpacing}if(t.nativeRender){this.$nativeDisplayObject.setDataToBitmapNode(this.$nativeDisplayObject.id,o.$texture,s);var C=this.$getContentBounds();this.$nativeDisplayObject.setWidth(C.width),this.$nativeDisplayObject.setHeight(C.height)}}else t.nativeRender&&this.$font&&(this.$nativeDisplayObject.setDataToBitmapNode(this.$nativeDisplayObject.id,this.$font.$texture,[]),this.$nativeDisplayObject.setWidth(0),this.$nativeDisplayObject.setHeight(0))},i.prototype.$measureContentBounds=function(t){0==this.$getTextLines().length?t.setEmpty():t.setTo(this.$textOffsetX+this.$textStartX,this.$textOffsetY+this.$textStartY,this.$textWidth-this.$textOffsetX,this.$textHeight-this.$textOffsetY)},Object.defineProperty(i.prototype,"textWidth",{get:function(){return this.$getTextLines(),this.$textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textHeight",{get:function(){return this.$getTextLines(),this.$textHeight},enumerable:!0,configurable:!0}),i.prototype.$getTextLines=function(){if(!this.$textLinesChanged)return this.textLines;var e=[];this.textLines=e;var r=[];this.$textLinesWidth=r,this.$textLinesChanged=!1;var n=[];if(this.$lineHeights=n,!this.$text||!this.$font)return this.$textWidth=0,this.$textHeight=0,e;for(var s,a,o,h,c,l=this.$lineSpacing,u=this.$letterSpacing,p=0,d=0,f=!isNaN(this.$textFieldWidth),$=this.$textFieldWidth,g=this.$textFieldHeight,y=this.$font,v=y._getFirstCharHeight(),b=Math.ceil(v*i.EMPTY_FACTOR),m=this.$text.split(/(?:\r\n|\r|\n)/),x=m.length,T=!0,_=0;_<x;_++){var D=m[_],O=D.length;o=0,h=0,s=!0,a=!1;for(var w=0;w<O;w++){s||(h+=u);var E=D.charAt(w),C=void 0,S=void 0,R=y.getTexture(E);if(R)C=R.$getTextureWidth(),S=R.$getTextureHeight(),R.$offsetX,R.$offsetY;else{if(" "!=E){t.$warn(1046,E),s&&(s=!1);continue}C=b,S=v}if(s&&(s=!1),T&&(T=!1),f&&w>0&&h+C>$){if(!F(D.substring(0,w)))break;O=(D=D.substring(w)).length,h=(w=0)==O-1?C:y.getConfig(E,"xadvance")||C,o=S}else h+=w==O-1?C:y.getConfig(E,"xadvance")||C,o=Math.max(S,o)}if(g&&_>0&&d>g)break;if(a=!0,!F(D))break}function F(t){return!(g&&e.length>0&&d>g)&&(d+=o+l,s||a||(h-=u),e.push(t),n.push(o),r.push(h),p=Math.max(h,p),!0)}return d-=l,this.$textWidth=p,this.$textHeight=d,this.$textOffsetX=0,this.$textOffsetY=0,this.$textStartX=0,this.$textStartY=0,$>p&&((c=this.$textAlign)==t.HorizontalAlign.RIGHT?this.$textStartX=$-p:c==t.HorizontalAlign.CENTER&&(this.$textStartX=Math.floor(($-p)/2))),g>d&&((c=this.$verticalAlign)==t.VerticalAlign.BOTTOM?this.$textStartY=g-d:c==t.VerticalAlign.MIDDLE&&(this.$textStartY=Math.floor((g-d)/2))),e},i.EMPTY_FACTOR=.33,i}(t.DisplayObject);t.BitmapText=e,__reflect(e.prototype,"egret.BitmapText")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.HorizontalAlign=e,__reflect(e.prototype,"egret.HorizontalAlign")}(egret||(egret={})),function(t){var e=function(){function e(){this.replaceArr=[],this.resutlArr=[],this.initReplaceArr()}return e.prototype.initReplaceArr=function(){this.replaceArr=[],this.replaceArr.push([/&lt;/g,"<"]),this.replaceArr.push([/&gt;/g,">"]),this.replaceArr.push([/&amp;/g,"&"]),this.replaceArr.push([/&quot;/g,'"']),this.replaceArr.push([/&apos;/g,"'"])},e.prototype.replaceSpecial=function(t){for(var e=0;e<this.replaceArr.length;e++){var i=this.replaceArr[e][0],r=this.replaceArr[e][1];t=t.replace(i,r)}return t},e.prototype.parse=function(e){this.stackArray=[],this.resutlArr=[];for(var i=0,r=e.length;i<r;){var n=e.indexOf("<",i);if(n<0)this.addToResultArr(e.substring(i)),i=r;else{this.addToResultArr(e.substring(i,n));var s=e.indexOf(">",n);-1==s?(t.$error(1038),s=n):"/"==e.charAt(n+1)?this.stackArray.pop():this.addToArray(e.substring(n+1,s)),i=s+1}}return this.resutlArr},e.prototype.parser=function(t){return this.parse(t)},e.prototype.addToResultArr=function(t){""!=t&&(t=this.replaceSpecial(t),this.stackArray.length>0?this.resutlArr.push({text:t,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:t}))},e.prototype.changeStringToObject=function(t){var e={},i=[];if("i"==(t=t.trim()).charAt(0)||"b"==t.charAt(0)||"u"==t.charAt(0))this.addProperty(e,t,"true");else if(i=t.match(/^(font|a)\s/)){t=t.substring(i[0].length).trim();for(var r=0,n=void 0;n=t.match(this.getHeadReg());){var s=n[0],a="";'"'==(t=t.substring(s.length).trim()).charAt(0)?(r=t.indexOf('"',1),a=t.substring(1,r),r+=1):"'"==t.charAt(0)?(r=t.indexOf("'",1),a=t.substring(1,r),r+=1):r=(a=t.match(/(\S)+/)[0]).length,this.addProperty(e,s.substring(0,s.length-1).trim(),a.trim()),t=t.substring(r).trim()}}return e},e.prototype.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|u|size|fontfamily|href|target)(\s)*=/},e.prototype.addProperty=function(t,e,i){switch(e.toLowerCase()){case"color":case"textcolor":i=i.replace(/#/,"0x"),t.textColor=parseInt(i);break;case"strokecolor":i=i.replace(/#/,"0x"),t.strokeColor=parseInt(i);break;case"stroke":t.stroke=parseInt(i);break;case"b":case"bold":t.bold="true"==i;break;case"u":t.underline="true"==i;break;case"i":case"italic":t.italic="true"==i;break;case"size":t.size=parseInt(i);break;case"fontfamily":t.fontFamily=i;break;case"href":t.href=this.replaceSpecial(i);break;case"target":t.target=this.replaceSpecial(i)}},e.prototype.addToArray=function(t){var e=this.changeStringToObject(t);if(0==this.stackArray.length)this.stackArray.push(e);else{var i=this.stackArray[this.stackArray.length-1];for(var r in i)null==e[r]&&(e[r]=i[r]);this.stackArray.push(e)}},e}();t.HtmlTextParser=e,__reflect(e.prototype,"egret.HtmlTextParser")}(egret||(egret={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.stageTextAdded=!1,t._text=null,t._isFocus=!1,t}return __extends(i,e),i.prototype.init=function(e){this._text=e,this.stageText=new t.StageText,this.stageText.$setTextField(this._text)},i.prototype._addStageText=function(){this.stageTextAdded||(this._text.$inputEnabled||(this._text.$touchEnabled=!0),this.tempStage=this._text.stage,this.stageText.$addToStage(),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.stageText.addEventListener("blur",this.blurHandler,this),this.stageText.addEventListener("focus",this.focusHandler,this),this.stageTextAdded=!0)},i.prototype._removeStageText=function(){this.stageTextAdded&&(this._text.$inputEnabled||(this._text.$touchEnabled=!1),this.stageText.$removeFromStage(),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.removeEventListener("blur",this.blurHandler,this),this.stageText.removeEventListener("focus",this.focusHandler,this),this.stageTextAdded=!1)},i.prototype._getText=function(){return this.stageText.$getText()},i.prototype._setText=function(t){this.stageText.$setText(t)},i.prototype._setColor=function(t){this.stageText.$setColor(t)},i.prototype.focusHandler=function(e){this._isFocus||(this._isFocus=!0,e.showing||this._text.$setIsTyping(!0),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_IN,!0)))},i.prototype.blurHandler=function(e){this._isFocus&&(this._isFocus=!1,this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this._text.$setIsTyping(!1),this.stageText.$onBlur(),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_OUT,!0)))},i.prototype.onMouseDownHandler=function(t){this.$onFocus()},i.prototype.$onFocus=function(){var e=this;this._text.visible&&(this._isFocus||(this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),t.callLater(function(){e.tempStage.addEventListener(t.TouchEvent.TOUCH_BEGIN,e.onStageDownHandler,e)},this),t.nativeRender&&this.stageText.$setText(this._text.$TextField[13]),this.stageText.$show()))},i.prototype.onStageDownHandler=function(t){t.$target!=this._text&&this.stageText.$hide()},i.prototype.updateTextHandler=function(e){var i,r,n=this._text.$TextField,s=this.stageText.$getText(),a=!1;null!=n[35]&&(i=new RegExp("["+n[35]+"]","g"),s=(r=s.match(i))?r.join(""):"",a=!0),null!=n[36]&&(i=new RegExp("[^"+n[36]+"]","g"),s=(r=s.match(i))?r.join(""):"",a=!0),a&&this.stageText.$getText()!=s&&this.stageText.$setText(s),this.resetText(),this._text.dispatchEvent(new t.Event(t.Event.CHANGE,!0))},i.prototype.resetText=function(){this._text.$setBaseText(this.stageText.$getText())},i.prototype._hideInput=function(){this.stageText.$removeFromStage()},i.prototype.updateInput=function(){!this._text.$visible&&this.stageText&&this._hideInput()},i.prototype._updateProperties=function(){if(this._isFocus)return this.stageText.$resetStageText(),void this.updateInput();this.stageText.$setText(this._text.$TextField[13]),this.stageText.$resetStageText(),this.updateInput()},i}(t.HashObject);t.InputController=e,__reflect(e.prototype,"egret.InputController")}(egret||(egret={})),egret||(egret={}),function(t){var e=new RegExp("(?=[\\u00BF-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![)}\\.\\,\\!\\?\\]\\:])");function i(e,i,n){var s=null==(n=n||{}).italic?i[16]:n.italic,a=null==n.bold?i[15]:n.bold,o=null==n.size?i[0]:n.size,h=n.fontFamily||i[8]||r.default_fontFamily;return t.sys.measureText(e,h,o,a,s)}var r=function(r){function n(){var e=r.call(this)||this;e.$inputEnabled=!1,e.inputUtils=null,e.$graphicsNode=null,e.isFlow=!1,e.textArr=[],e.linesArr=[],e.$isTyping=!1;var i=new t.sys.TextNode;return i.fontFamily=n.default_fontFamily,e.textNode=i,e.$renderNode=i,e.$TextField={0:n.default_size,1:0,2:n.default_textColor,3:NaN,4:NaN,5:0,6:0,7:0,8:n.default_fontFamily,9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:t.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null,37:t.TextFieldInputType.TEXT,38:!1},e}return __extends(n,r),n.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(7)},n.prototype.isInput=function(){return this.$TextField[24]==t.TextFieldType.INPUT},n.prototype.$setTouchEnabled=function(t){r.prototype.$setTouchEnabled.call(this,t),this.isInput()&&(this.$inputEnabled=!0)},Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this.$TextField[8]},set:function(t){this.$setFontFamily(t)},enumerable:!0,configurable:!0}),n.prototype.$setFontFamily=function(e){var i=this.$TextField;return i[8]!=e&&(i[8]=e,this.invalidateFontString(),t.nativeRender&&this.$nativeDisplayObject.setFontFamily(e),!0)},Object.defineProperty(n.prototype,"size",{get:function(){return this.$TextField[0]},set:function(t){this.$setSize(t)},enumerable:!0,configurable:!0}),n.prototype.$setSize=function(e){var i=this.$TextField;return i[0]!=e&&(i[0]=e,this.invalidateFontString(),t.nativeRender&&this.$nativeDisplayObject.setFontSize(e),!0)},Object.defineProperty(n.prototype,"bold",{get:function(){return this.$TextField[15]},set:function(t){this.$setBold(t)},enumerable:!0,configurable:!0}),n.prototype.$setBold=function(e){var i=this.$TextField;return e!=i[15]&&(i[15]=e,this.invalidateFontString(),t.nativeRender&&this.$nativeDisplayObject.setBold(e),!0)},Object.defineProperty(n.prototype,"italic",{get:function(){return this.$TextField[16]},set:function(t){this.$setItalic(t)},enumerable:!0,configurable:!0}),n.prototype.$setItalic=function(e){var i=this.$TextField;return e!=i[16]&&(i[16]=e,this.invalidateFontString(),t.nativeRender&&this.$nativeDisplayObject.setItalic(e),!0)},n.prototype.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},Object.defineProperty(n.prototype,"textAlign",{get:function(){return this.$TextField[9]},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),n.prototype.$setTextAlign=function(e){var i=this.$TextField;return i[9]!=e&&(i[9]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setTextAlign(e),!0)},Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this.$TextField[10]},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),n.prototype.$setVerticalAlign=function(e){var i=this.$TextField;return i[10]!=e&&(i[10]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setVerticalAlign(e),!0)},Object.defineProperty(n.prototype,"lineSpacing",{get:function(){return this.$TextField[1]},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),n.prototype.$setLineSpacing=function(e){var i=this.$TextField;return i[1]!=e&&(i[1]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setLineSpacing(e),!0)},Object.defineProperty(n.prototype,"textColor",{get:function(){return this.$TextField[2]},set:function(t){this.$setTextColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setTextColor=function(e){var i=this.$TextField;return i[2]!=e&&(i[2]=e,this.inputUtils&&this.inputUtils._setColor(this.$TextField[2]),this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setTextColor(e),!0)},Object.defineProperty(n.prototype,"wordWrap",{get:function(){return this.$TextField[19]},set:function(t){this.$setWordWrap(t)},enumerable:!0,configurable:!0}),n.prototype.$setWordWrap=function(e){var i=this.$TextField;e!=i[19]&&(i[20]||(i[19]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setWordWrap(e)))},Object.defineProperty(n.prototype,"type",{get:function(){return this.$TextField[24]},set:function(t){this.$setType(t)},enumerable:!0,configurable:!0}),n.prototype.$setType=function(e){var i=this.$TextField;return i[24]!=e&&(i[24]=e,t.nativeRender&&this.$nativeDisplayObject.setType(e),e==t.TextFieldType.INPUT?(isNaN(i[3])&&this.$setWidth(100),isNaN(i[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this.inputUtils&&(this.inputUtils=new t.InputController),this.inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this.inputUtils._addStageText()):(this.inputUtils&&(this.inputUtils._removeStageText(),this.inputUtils=null),this.$setTouchEnabled(!1)),!0)},Object.defineProperty(n.prototype,"inputType",{get:function(){return this.$TextField[37]},set:function(e){this.$TextField[37]!=e&&(this.$TextField[37]=e,t.nativeRender&&this.$nativeDisplayObject.setInputType(e))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this.$getText()},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),n.prototype.$getText=function(){return this.$TextField[24]==t.TextFieldType.INPUT?this.inputUtils._getText():this.$TextField[13]},n.prototype.$setBaseText=function(e){e=null==e?"":e.toString(),this.isFlow=!1;var i=this.$TextField;if(i[13]!=e){this.$invalidateTextField(),i[13]=e;var r="";return r=i[20]?this.changeToPassText(e):e,t.nativeRender&&this.$nativeDisplayObject.setText(r),this.setMiddleStyle([{text:r}]),!0}return!1},n.prototype.$setText=function(t){null==t&&(t="");var e=this.$setBaseText(t);return this.inputUtils&&this.inputUtils._setText(this.$TextField[13]),e},Object.defineProperty(n.prototype,"displayAsPassword",{get:function(){return this.$TextField[20]},set:function(t){this.$setDisplayAsPassword(t)},enumerable:!0,configurable:!0}),n.prototype.$setDisplayAsPassword=function(e){var i=this.$TextField;if(i[20]!=e){i[20]=e,this.$invalidateTextField();var r="";return r=e?this.changeToPassText(i[13]):i[13],t.nativeRender&&this.$nativeDisplayObject.setText(r),this.setMiddleStyle([{text:r}]),!0}return!1},Object.defineProperty(n.prototype,"strokeColor",{get:function(){return this.$TextField[25]},set:function(t){this.$setStrokeColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setStrokeColor=function(e){var i=this.$TextField;return i[25]!=e&&(this.$invalidateTextField(),i[25]=e,t.nativeRender&&this.$nativeDisplayObject.setStrokeColor(e),i[26]=t.toColorString(e),!0)},Object.defineProperty(n.prototype,"stroke",{get:function(){return this.$TextField[27]},set:function(t){this.$setStroke(t)},enumerable:!0,configurable:!0}),n.prototype.$setStroke=function(e){return this.$TextField[27]!=e&&(this.$invalidateTextField(),this.$TextField[27]=e,t.nativeRender&&this.$nativeDisplayObject.setStroke(e),!0)},Object.defineProperty(n.prototype,"maxChars",{get:function(){return this.$TextField[21]},set:function(t){this.$setMaxChars(t)},enumerable:!0,configurable:!0}),n.prototype.$setMaxChars=function(e){return this.$TextField[21]!=e&&(this.$TextField[21]=e,t.nativeRender&&this.$nativeDisplayObject.setMaxChars(e),!0)},Object.defineProperty(n.prototype,"scrollV",{get:function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},set:function(e){(e=Math.max(e,1))!=this.$TextField[28]&&(this.$TextField[28]=e,t.nativeRender&&this.$nativeDisplayObject.setScrollV(e),this.$invalidateTextField())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxScrollV",{get:function(){return this.$getLinesArr(),Math.max(this.$TextField[29]-t.TextFieldUtils.$getScrollNum(this)+1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),n.prototype.$setSelection=function(t,e){return!1},n.prototype.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},Object.defineProperty(n.prototype,"numLines",{get:function(){return this.$getLinesArr(),this.$TextField[29]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"multiline",{get:function(){return this.$TextField[30]},set:function(t){this.$setMultiline(t)},enumerable:!0,configurable:!0}),n.prototype.$setMultiline=function(e){return this.$TextField[30]!=e&&(this.$TextField[30]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setMultiline(e),!0)},Object.defineProperty(n.prototype,"restrict",{get:function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},set:function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var i=-1;i<t.length&&0!=(i=t.indexOf("^",i))&&i>0&&"\\"==t.charAt(i-1);)i++;0==i?(e[35]=null,e[36]=t.substring(i+1)):i>0?(e[35]=t.substring(0,i),e[36]=t.substring(i+1)):(e[35]=t,e[36]=null)}},enumerable:!0,configurable:!0}),n.prototype.$setWidth=function(e){t.nativeRender&&this.$nativeDisplayObject.setTextFieldWidth(e);var i=this.$TextField;if(isNaN(e)){if(isNaN(i[3]))return!1;i[3]=NaN}else{if(i[3]==e)return!1;i[3]=e}return!((e=+e)<0)&&(this.$invalidateTextField(),!0)},n.prototype.$setHeight=function(e){t.nativeRender&&this.$nativeDisplayObject.setTextFieldHeight(e);var i=this.$TextField;if(isNaN(e)){if(isNaN(i[4]))return!1;i[4]=NaN}else{if(i[4]==e)return!1;i[4]=e}return!((e=+e)<0)&&(this.$invalidateTextField(),!0)},n.prototype.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},n.prototype.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},Object.defineProperty(n.prototype,"border",{get:function(){return this.$TextField[31]},set:function(t){this.$setBorder(t)},enumerable:!0,configurable:!0}),n.prototype.$setBorder=function(e){e=!!e,this.$TextField[31]!=e&&(this.$TextField[31]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setBorder(e))},Object.defineProperty(n.prototype,"borderColor",{get:function(){return this.$TextField[32]},set:function(t){this.$setBorderColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setBorderColor=function(e){e=+e||0,this.$TextField[32]!=e&&(this.$TextField[32]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setBorderColor(e))},Object.defineProperty(n.prototype,"background",{get:function(){return this.$TextField[33]},set:function(t){this.$setBackground(t)},enumerable:!0,configurable:!0}),n.prototype.$setBackground=function(e){this.$TextField[33]!=e&&(this.$TextField[33]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setBackground(e))},Object.defineProperty(n.prototype,"backgroundColor",{get:function(){return this.$TextField[34]},set:function(t){this.$setBackgroundColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setBackgroundColor=function(e){this.$TextField[34]!=e&&(this.$TextField[34]=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setBackgroundColor(e))},n.prototype.fillBackground=function(e){var i=this.$graphicsNode;i&&i.clear();var r=this.$TextField;if(r[33]||r[31]||e&&e.length>0){if(!i)if(i=this.$graphicsNode=new t.sys.GraphicsNode,t.nativeRender)this.$renderNode=this.textNode;else{var n=new t.sys.GroupNode;n.addNode(i),n.addNode(this.textNode),this.$renderNode=n}var s=void 0;if(r[33]&&i.beginFill(r[34]).drawRect(0,0,this.$getWidth(),this.$getHeight()),r[31]&&(s=i.lineStyle(1,r[32])).drawRect(0,0,this.$getWidth()-1,this.$getHeight()-1),e&&e.length>0)for(var a=r[2],o=-1,h=e.length,c=0;c<h;c+=4){var l=e[c],u=e[c+1],p=e[c+2],d=e[c+3]||a;(o<0||o!=d)&&(o=d,s=i.lineStyle(2,d,1,t.CapsStyle.NONE)),s.moveTo(l,u),s.lineTo(l+p,u)}}if(i){var f=this.$getRenderBounds();i.x=f.x,i.y=f.y,i.width=f.width,i.height=f.height,t.Rectangle.release(f)}},n.prototype.setFocus=function(){this.type==t.TextFieldType.INPUT&&this.$stage&&this.inputUtils.$onFocus()},n.prototype.$onRemoveFromStage=function(){r.prototype.$onRemoveFromStage.call(this),this.removeEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._removeStageText(),this.textNode&&(this.textNode.clean(),t.nativeRender&&egret_native.NativeDisplayObject.disposeTextData(this))},n.prototype.$onAddToStage=function(e,i){r.prototype.$onAddToStage.call(this,e,i),this.addEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._addStageText()},n.prototype.$invalidateTextField=function(){if(this.$renderDirty=!0,this.$TextField[18]=!0,this.$TextField[38]=!0,t.nativeRender);else{var e=this.$parent;e&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp());var i=this.$maskedObject;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())}},n.prototype.$getRenderBounds=function(){var e=this.$getContentBounds(),i=t.Rectangle.create();i.copyFrom(e),this.$TextField[31]&&(i.width+=2,i.height+=2);var r=2*this.$TextField[27];return r>0&&(i.width+=2*r,i.height+=2*r),i.x-=r+2,i.y-=r+2,i.width=Math.ceil(i.width)+4,i.height=Math.ceil(i.height)+4,i},n.prototype.$measureContentBounds=function(e){this.$getLinesArr();var i=0,r=0;t.nativeRender?(i=egret_native.nrGetTextFieldWidth(this.$nativeDisplayObject.id),r=egret_native.nrGetTextFieldHeight(this.$nativeDisplayObject.id)):(i=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],r=isNaN(this.$TextField[4])?t.TextFieldUtils.$getTextHeight(this):this.$TextField[4]),e.setTo(0,0,i,r)},n.prototype.$updateRenderNode=function(){if(this.$TextField[24]==t.TextFieldType.INPUT){if(this.inputUtils._updateProperties(),this.$isTyping)return void this.fillBackground()}else if(0==this.$TextField[3]){var e=this.$graphicsNode;return void(e&&e.clear())}var i=this.drawText();this.fillBackground(i);var r=this.$getRenderBounds(),n=this.textNode;n.x=r.x,n.y=r.y,n.width=Math.ceil(r.width),n.height=Math.ceil(r.height),t.Rectangle.release(r)},Object.defineProperty(n.prototype,"textFlow",{get:function(){return this.textArr},set:function(e){this.isFlow=!0;var i="";null==e&&(e=[]);for(var r=0;r<e.length;r++){i+=e[r].text}this.$TextField[20]?this.$setBaseText(i):(this.$TextField[13]=i,this.setMiddleStyle(e),t.nativeRender&&this.$nativeDisplayObject.setTextFlow(e))},enumerable:!0,configurable:!0}),n.prototype.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",i=0,r=t.length;i<r;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},n.prototype.setMiddleStyle=function(t){this.$TextField[18]=!0,this.$TextField[38]=!0,this.textArr=t,this.$invalidateTextField()},Object.defineProperty(n.prototype,"textWidth",{get:function(){return this.$getLinesArr(),t.nativeRender?egret_native.nrGetTextWidth(this.$nativeDisplayObject.id):this.$TextField[5]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textHeight",{get:function(){return this.$getLinesArr(),t.nativeRender?egret_native.nrGetTextHeight(this.$nativeDisplayObject.id):t.TextFieldUtils.$getTextHeight(this)},enumerable:!0,configurable:!0}),n.prototype.appendText=function(t){this.appendElement({text:t})},n.prototype.appendElement=function(e){var i=this.$TextField[13]+e.text;if(t.nativeRender)return this.textArr.push(e),this.$TextField[13]=i,this.$TextField[18]=!0,this.$TextField[38]=!0,void this.$nativeDisplayObject.setTextFlow(this.textArr);this.$TextField[20]?this.$setBaseText(i):(this.$TextField[13]=i,this.textArr.push(e),this.setMiddleStyle(this.textArr))},n.prototype.$getLinesArr=function(){var e=this.$TextField;return t.nativeRender&&e[38]?(egret_native.updateNativeRender(),void(e[38]=!1)):this.$getLinesArr2()},n.prototype.$getLinesArr2=function(){var r=this.$TextField;if(!r[18])return this.linesArr;r[18]=!1;var n=this.textArr;this.linesArr.length=0,r[6]=0,r[5]=0;var s=r[3];if(!isNaN(s)&&0==s)return r[29]=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];for(var a,o=this.linesArr,h=0,c=0,l=0,u=0,p=0,d=n.length;p<d;p++){var f=n[p];if(f.text){f.style=f.style||{};for(var $=f.text.toString().split(/(?:\r\n|\r|\n)/),g=0,y=$.length;g<y;g++){null==o[u]&&(a={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},o[u]=a,h=0,l=0,c=0),l=r[24]==t.TextFieldType.INPUT?r[0]:Math.max(l,f.style.size||r[0]);var v=!0;if(""==$[g])g==y-1&&(v=!1);else{var b=i($[g],r,f.style);if(isNaN(s))h+=b,c+=$[g].length,a.elements.push({width:b,text:$[g],style:f.style}),g==y-1&&(v=!1);else if(h+b<=s)a.elements.push({width:b,text:$[g],style:f.style}),h+=b,c+=$[g].length,g==y-1&&(v=!1);else{for(var m=0,x=0,T=$[g],_=void 0,D=(_=r[19]?T.split(e):T.match(/./g)).length,O=0;m<D;m++){var w=!1;if(1==(P=_[m].length)&&m<D-1){var E=_[m].charCodeAt(0),C=_[m+1].charCodeAt(0);if(E>=55296&&E<=56319&&56320==(64512&C))P=2,w=!0,b=i(_[m]+_[m+1],r,f.style);else b=i(_[m],r,f.style)}else b=i(_[m],r,f.style);if(0!=h&&h+b>s&&h+m!=0)break;if(x+b>s)for(var S=_[m].match(/./g),R=0,F=S.length;R<F;R++){var P,M=!1;if(1==(P=S[R].length)&&R<F-1){E=S[R].charCodeAt(0),C=S[R+1].charCodeAt(0);if(E>=55296&&E<=56319&&56320==(64512&C))P=2,M=!0,b=i(S[R]+S[R+1],r,f.style);else b=i(S[R],r,f.style)}else b=i(S[R],r,f.style);if(R>0&&h+b>s)break;x+=b,h+=b,c+=O+=P,M&&R++}else x+=b,h+=b,c+=O+=P;w&&m++}if(m>0){a.elements.push({width:x,text:T.substring(0,O),style:f.style});var N=T.substring(O),j=void 0,A=N.length;for(j=0;j<A&&" "==N.charAt(j);j++);$[g]=N.substring(j)}""!=$[g]&&(g--,v=!1)}}v&&(c++,a.hasNextLine=!0),g<$.length-1&&(a.width=h,a.height=l,a.charNum=c,r[5]=Math.max(r[5],h),r[6]+=l,u++)}p==n.length-1&&a&&(a.width=h,a.height=l,a.charNum=c,r[5]=Math.max(r[5],h),r[6]+=l)}else a&&(a.width=h,a.height=l,a.charNum=c,r[5]=Math.max(r[5],h),r[6]+=l)}return r[29]=o.length,o},n.prototype.$setIsTyping=function(e){this.$isTyping=e,this.$invalidateTextField(),t.nativeRender&&this.$nativeDisplayObject.setIsTyping(e)},n.prototype.drawText=function(){var e=this.textNode,i=this.$TextField;e.bold=i[15],e.fontFamily=i[8]||n.default_fontFamily,e.italic=i[16],e.size=i[0],e.stroke=i[27],e.strokeColor=i[25],e.textColor=i[2];var r=this.$getLinesArr();if(0==i[5])return[];var s=isNaN(i[3])?i[5]:i[3],a=t.TextFieldUtils.$getTextHeight(this),o=0,h=t.TextFieldUtils.$getStartLine(this),c=i[4];!isNaN(c)&&c>a&&(o+=t.TextFieldUtils.$getValign(this)*(c-a));o=Math.round(o);for(var l=t.TextFieldUtils.$getHalign(this),u=0,p=[],d=h,f=i[29];d<f;d++){var $=r[d],g=$.height;if(o+=g/2,d!=h){if(i[24]==t.TextFieldType.INPUT&&!i[30])break;if(!isNaN(c)&&o>c)break}u=Math.round((s-$.width)*l);for(var y=0,v=$.elements.length;y<v;y++){var b=$.elements[y],m=b.style.size||i[0];e.drawText(u,o+(g-m)/2,b.text,b.style),b.style.underline&&p.push(u,o+g/2,b.width,b.style.textColor),u+=b.width}o+=g/2+i[1]}return p},n.prototype.addEvent=function(){this.addEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},n.prototype.removeEvent=function(){this.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},n.prototype.onTapHandler=function(e){if(this.$TextField[24]!=t.TextFieldType.INPUT){var i=t.TextFieldUtils.$getTextElement(this,e.localX,e.localY);if(null!=i){var r=i.style;if(r&&r.href)if(r.href.match(/^event:/)){var n=r.href.match(/^event:/)[0];t.TextEvent.dispatchTextEvent(this,t.TextEvent.LINK,r.href.substring(n.length))}else open(r.href,r.target||"_blank")}}},n.default_fontFamily="Arial",n.default_size=30,n.default_textColor=16777215,n}(t.DisplayObject);t.TextField=r,__reflect(r.prototype,"egret.TextField")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.TEXT="text",t.TEL="tel",t.PASSWORD="password",t}();t.TextFieldInputType=e,__reflect(e.prototype,"egret.TextFieldInputType")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.DYNAMIC="dynamic",t.INPUT="input",t}();t.TextFieldType=e,__reflect(e.prototype,"egret.TextFieldType")}(egret||(egret={})),function(t){var e=function(){function e(){}return e.$getStartLine=function(t){var i=t.$TextField,r=e.$getTextHeight(t),n=0,s=i[4];return isNaN(s)||(r<s||r>s&&(n=Math.max(i[28]-1,0),n=Math.min(i[29]-1,n)),i[30]||(n=Math.max(i[28]-1,0),i[29]>0&&(n=Math.min(i[29]-1,n)))),n},e.$getHalign=function(e){var i=e.$getLinesArr2(),r=0;return e.$TextField[9]==t.HorizontalAlign.CENTER?r=.5:e.$TextField[9]==t.HorizontalAlign.RIGHT&&(r=1),e.$TextField[24]==t.TextFieldType.INPUT&&!e.$TextField[30]&&i.length>1&&(r=0),r},e.$getTextHeight=function(e){return t.TextFieldType.INPUT!=e.$TextField[24]||e.$TextField[30]?e.$TextField[6]+(e.$TextField[29]-1)*e.$TextField[1]:e.$TextField[0]},e.$getValign=function(i){var r=e.$getTextHeight(i),n=i.$TextField[4];if(!isNaN(n)&&r<n){var s=0;return i.$TextField[10]==t.VerticalAlign.MIDDLE?s=.5:i.$TextField[10]==t.VerticalAlign.BOTTOM&&(s=1),s}return 0},e.$getTextElement=function(t,i,r){var n=e.$getHit(t,i,r),s=t.$getLinesArr2();return n&&s[n.lineIndex]&&s[n.lineIndex].elements[n.textElementIndex]?s[n.lineIndex].elements[n.textElementIndex]:null},e.$getHit=function(t,i,r){var n=t.$getLinesArr2();if(0==t.$TextField[3])return null;var s=0,a=e.$getTextHeight(t),o=0,h=t.$TextField[4];!isNaN(h)&&h>a&&(0!=(o=e.$getValign(t)*(h-a))&&(r-=o));for(var c=0,l=e.$getStartLine(t);l<n.length;l++){var u=n[l];if(c+u.height>=r){c<r&&(s=l+1);break}if((c+=u.height)+t.$TextField[1]>r)return null;c+=t.$TextField[1]}if(0==s)return null;var p=n[s-1],d=t.$TextField[3];isNaN(d)&&(d=t.textWidth),i-=e.$getHalign(t)*(d-p.width);var f=0;for(l=0;l<p.elements.length;l++){var $=p.elements[l];if(f+$.width<=i)f+=$.width;else if(f<i)return{lineIndex:s-1,textElementIndex:l}}return null},e.$getScrollNum=function(t){var e=1;if(t.$TextField[30]){var i=t.height,r=t.size,n=t.lineSpacing;i-(r+n)*(e=Math.floor(i/(r+n)))>r/2&&e++}return e},e}();t.TextFieldUtils=e,__reflect(e.prototype,"egret.TextFieldUtils")}(egret||(egret={})),function(t){t.sys||(t.sys={})}(egret||(egret={})),function(t){var e=function(){function t(){}return t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.VerticalAlign=e,__reflect(e.prototype,"egret.VerticalAlign")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.encode=function(t){for(var e=new Uint8Array(t),i=e.length,r="",n=0;n<i;n+=3)r+=chars[e[n]>>2],r+=chars[(3&e[n])<<4|e[n+1]>>4],r+=chars[(15&e[n+1])<<2|e[n+2]>>6],r+=chars[63&e[n+2]];return i%3==2?r=r.substring(0,r.length-1)+"=":i%3==1&&(r=r.substring(0,r.length-2)+"=="),r},t.decode=function(t){var e=.75*t.length,i=t.length,r=0,n=0,s=0,a=0,o=0;"="===t[t.length-1]&&(e--,"="===t[t.length-2]&&e--);for(var h=new ArrayBuffer(e),c=new Uint8Array(h),l=0;l<i;l+=4)n=lookup[t.charCodeAt(l)],s=lookup[t.charCodeAt(l+1)],a=lookup[t.charCodeAt(l+2)],o=lookup[t.charCodeAt(l+3)],c[r++]=n<<2|s>>4,c[r++]=(15&s)<<4|a>>2,c[r++]=(3&a)<<6|63&o;return h},t}();t.Base64Util=e,__reflect(e.prototype,"egret.Base64Util")}(egret||(egret={}));for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;!function(t){var e=function(){function t(){}return t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t}();t.Endian=e,__reflect(e.prototype,"egret.Endian");var i=function(){function i(t,i){void 0===i&&(i=0),this.bufferExtSize=0,this.EOF_byte=-1,this.EOF_code_point=-1,i<0&&(i=0),this.bufferExtSize=i;var r,n=0;if(t){var s=void 0;if(t instanceof Uint8Array?(s=t,n=t.length):(n=t.byteLength,s=new Uint8Array(t)),0==i)r=new Uint8Array(n);else r=new Uint8Array((1+(n/i|0))*i);r.set(s)}else r=new Uint8Array(i);this.write_position=n,this._position=0,this._bytes=r,this.data=new DataView(r.buffer),this.endian=e.BIG_ENDIAN}return Object.defineProperty(i.prototype,"endian",{get:function(){return 0==this.$endian?e.LITTLE_ENDIAN:e.BIG_ENDIAN},set:function(t){this.$endian=t==e.LITTLE_ENDIAN?0:1},enumerable:!0,configurable:!0}),i.prototype.setArrayBuffer=function(t){},Object.defineProperty(i.prototype,"readAvailable",{get:function(){return this.write_position-this._position},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this.data.buffer.slice(0,this.write_position)},set:function(t){var e,i=t.byteLength,r=new Uint8Array(t),n=this.bufferExtSize;0==n?e=new Uint8Array(i):e=new Uint8Array((1+(i/n|0))*n);e.set(r),this.write_position=i,this._bytes=e,this.data=new DataView(e.buffer)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rawBuffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bytes",{get:function(){return this._bytes},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataView",{get:function(){return this.data},set:function(t){this.buffer=t.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,t>this.write_position&&(this.write_position=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this.write_position},set:function(t){this.write_position=t,this.data.byteLength>t&&(this._position=t),this._validateBuffer(t)},enumerable:!0,configurable:!0}),i.prototype._validateBuffer=function(t){if(this.data.byteLength<t){var e=this.bufferExtSize,i=void 0;if(0==e)i=new Uint8Array(t);else i=new Uint8Array((1+(t/e>>0))*e);i.set(this._bytes),this._bytes=i,this.data=new DataView(i.buffer)}},Object.defineProperty(i.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),i.prototype.clear=function(){var t=new ArrayBuffer(this.bufferExtSize);this.data=new DataView(t),this._bytes=new Uint8Array(t),this._position=0,this.write_position=0},i.prototype.readBoolean=function(){if(this.validate(1))return!!this._bytes[this.position++]},i.prototype.readByte=function(){if(this.validate(1))return this.data.getInt8(this.position++)},i.prototype.readBytes=function(e,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),e){var n=this._position,s=this.write_position-n;if(s<0)t.$error(1025);else{if(0==r)r=s;else if(r>s)return void t.$error(1025);var a=e._position;e._position=0,e.validateBuffer(i+r),e._position=a,e._bytes.set(this._bytes.subarray(n,n+r),i),this.position+=r}}},i.prototype.readDouble=function(){if(this.validate(8)){var t=this.data.getFloat64(this._position,0==this.$endian);return this.position+=8,t}},i.prototype.readFloat=function(){if(this.validate(4)){var t=this.data.getFloat32(this._position,0==this.$endian);return this.position+=4,t}},i.prototype.readInt=function(){if(this.validate(4)){var t=this.data.getInt32(this._position,0==this.$endian);return this.position+=4,t}},i.prototype.readShort=function(){if(this.validate(2)){var t=this.data.getInt16(this._position,0==this.$endian);return this.position+=2,t}},i.prototype.readUnsignedByte=function(){if(this.validate(1))return this._bytes[this.position++]},i.prototype.readUnsignedInt=function(){if(this.validate(4)){var t=this.data.getUint32(this._position,0==this.$endian);return this.position+=4,t}},i.prototype.readUnsignedShort=function(){if(this.validate(2)){var t=this.data.getUint16(this._position,0==this.$endian);return this.position+=2,t}},i.prototype.readUTF=function(){var t=this.readUnsignedShort();return t>0?this.readUTFBytes(t):""},i.prototype.readUTFBytes=function(t){if(this.validate(t)){var e=this.data,i=new Uint8Array(e.buffer,e.byteOffset+this._position,t);return this.position+=t,this.decodeUTF8(i)}},i.prototype.writeBoolean=function(t){this.validateBuffer(1),this._bytes[this.position++]=+t},i.prototype.writeByte=function(t){this.validateBuffer(1),this._bytes[this.position++]=255&t},i.prototype.writeBytes=function(t,e,i){var r;void 0===e&&(e=0),void 0===i&&(i=0),e<0||i<0||(r=0==i?t.length-e:Math.min(t.length-e,i))>0&&(this.validateBuffer(r),this._bytes.set(t._bytes.subarray(e,e+r),this._position),this.position=this._position+r)},i.prototype.writeDouble=function(t){this.validateBuffer(8),this.data.setFloat64(this._position,t,0==this.$endian),this.position+=8},i.prototype.writeFloat=function(t){this.validateBuffer(4),this.data.setFloat32(this._position,t,0==this.$endian),this.position+=4},i.prototype.writeInt=function(t){this.validateBuffer(4),this.data.setInt32(this._position,t,0==this.$endian),this.position+=4},i.prototype.writeShort=function(t){this.validateBuffer(2),this.data.setInt16(this._position,t,0==this.$endian),this.position+=2},i.prototype.writeUnsignedInt=function(t){this.validateBuffer(4),this.data.setUint32(this._position,t,0==this.$endian),this.position+=4},i.prototype.writeUnsignedShort=function(t){this.validateBuffer(2),this.data.setUint16(this._position,t,0==this.$endian),this.position+=2},i.prototype.writeUTF=function(t){var e=this.encodeUTF8(t),i=e.length;this.validateBuffer(2+i),this.data.setUint16(this._position,i,0==this.$endian),this.position+=2,this._writeUint8Array(e,!1)},i.prototype.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},i.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},i.prototype._writeUint8Array=function(t,e){void 0===e&&(e=!0);var i=this._position,r=i+t.length;e&&this.validateBuffer(r),this.bytes.set(t,i),this.position=r},i.prototype.validate=function(e){var i=this._bytes.length;if(i>0&&this._position+e<=i)return!0;t.$error(1025)},i.prototype.validateBuffer=function(t){this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this._validateBuffer(t)},i.prototype.encodeUTF8=function(t){for(var e=0,i=this.stringToCodePoints(t),r=[];i.length>e;){var n=i[e++];if(this.inRange(n,55296,57343))this.encoderError(n);else if(this.inRange(n,0,127))r.push(n);else{var s=void 0,a=void 0;for(this.inRange(n,128,2047)?(s=1,a=192):this.inRange(n,2048,65535)?(s=2,a=224):this.inRange(n,65536,1114111)&&(s=3,a=240),r.push(this.div(n,Math.pow(64,s))+a);s>0;){var o=this.div(n,Math.pow(64,s-1));r.push(128+o%64),s-=1}}}return new Uint8Array(r)},i.prototype.decodeUTF8=function(t){for(var e,i=0,r="",n=0,s=0,a=0,o=0;t.length>i;){var h=t[i++];if(h==this.EOF_byte)e=0!=s?this.decoderError(!1):this.EOF_code_point;else if(0==s)this.inRange(h,0,127)?e=h:(this.inRange(h,194,223)?(s=1,o=128,n=h-192):this.inRange(h,224,239)?(s=2,o=2048,n=h-224):this.inRange(h,240,244)?(s=3,o=65536,n=h-240):this.decoderError(!1),n*=Math.pow(64,s),e=null);else if(this.inRange(h,128,191))if(a+=1,n+=(h-128)*Math.pow(64,s-a),a!==s)e=null;else{var c=n,l=o;n=0,s=0,a=0,o=0,e=this.inRange(c,l,1114111)&&!this.inRange(c,55296,57343)?c:this.decoderError(!1,h)}else n=0,s=0,a=0,o=0,i--,e=this.decoderError(!1,h);null!==e&&e!==this.EOF_code_point&&(e<=65535?e>0&&(r+=String.fromCharCode(e)):(e-=65536,r+=String.fromCharCode(55296+(e>>10&1023)),r+=String.fromCharCode(56320+(1023&e))))}return r},i.prototype.encoderError=function(e){t.$error(1026,e)},i.prototype.decoderError=function(e,i){return e&&t.$error(1027),i||65533},i.prototype.inRange=function(t,e,i){return e<=t&&t<=i},i.prototype.div=function(t,e){return Math.floor(t/e)},i.prototype.stringToCodePoints=function(t){for(var e=[],i=0,r=t.length;i<t.length;){var n=t.charCodeAt(i);if(this.inRange(n,55296,57343))if(this.inRange(n,56320,57343))e.push(65533);else if(i==r-1)e.push(65533);else{var s=t.charCodeAt(i+1);if(this.inRange(s,56320,57343)){var a=1023&n,o=1023&s;i+=1,e.push(65536+(a<<10)+o)}else e.push(65533)}else e.push(n);i+=1}return e},i}();t.ByteArray=i,__reflect(i.prototype,"egret.ByteArray")}(egret||(egret={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(9)},Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(e,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*e+r.c*i+r.tx,s=r.b*e+r.d*i+r.ty,a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(n,s))return null;if(this.$mask&&!this.$mask.$hitTest(e,i))return null;for(var o=this.$children,h=!1,c=null,l=o.length-1;l>=0;l--){var u=o[l];if(!u.$maskedObject&&(c=u.$hitTest(e,i))){if(h=!0,c.$touchEnabled)break;c=null}}return c?this.$touchChildren?c:this:h?this:((c=t.DisplayObject.prototype.$hitTest.call(this,e,i))&&(c=this.$graphics.$hitTest(e,i)),c)},i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.DisplayObjectContainer);t.Sprite=e,__reflect(e.prototype,"egret.Sprite")}(egret||(egret={})),function(t){t.registerClass=function(e,i,r){e||t.$error(1003,"classDefinition"),e.prototype||t.$error(1012,"classDefinition"),void 0===i&&t.$error(1003,"className");var n=e.prototype;Object.defineProperty(n,"__class__",{value:i,enumerable:!1,writable:!0});var s=[i];r&&(s=s.concat(r));var a=n.__types__;if(n.__types__)for(var o=a.length,h=0;h<o;h++){var c=a[h];-1==s.indexOf(c)&&s.push(c)}Object.defineProperty(n,"__types__",{value:s,enumerable:!1,writable:!0})}}(egret||(egret={})),function(t){t.BitmapFillMode={REPEAT:"repeat",SCALE:"scale",CLIP:"clip"}}(egret||(egret={})),function(t){var e=function(){function t(){}return Object.defineProperty(t,"logLevel",{set:function(t){},enumerable:!0,configurable:!0}),t.ALL="all",t.DEBUG="debug",t.INFO="info",t.WARN="warn",t.ERROR="error",t.OFF="off",t}();t.Logger=e,__reflect(e.prototype,"egret.Logger")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.sin=function(e){var i=Math.floor(e),r=i+1,n=t.sinInt(i);return i==e?n:(e-i)*t.sinInt(r)+(r-e)*n},t.sinInt=function(t){return(t%=360)<0&&(t+=360),egret_sin_map[t]},t.cos=function(e){var i=Math.floor(e),r=i+1,n=t.cosInt(i);return i==e?n:(e-i)*t.cosInt(r)+(r-e)*n},t.cosInt=function(t){return(t%=360)<0&&(t+=360),egret_cos_map[t]},t.convertStringToHashCode=function(t){if(0===t.length)return 0;for(var e=0,i=0,r=t.length;i<r;++i){e=(e<<5)-e+t.charCodeAt(i),e|=0}return e},t}();t.NumberUtils=e,__reflect(e.prototype,"egret.NumberUtils")}(egret||(egret={}));for(var egret,egret_sin_map={},egret_cos_map={},DEG_TO_RAD=Math.PI/180,NumberUtils_i=0;NumberUtils_i<360;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*DEG_TO_RAD);egret_sin_map[90]=1,egret_cos_map[90]=0,egret_sin_map[180]=0,egret_cos_map[180]=-1,egret_sin_map[270]=-1,egret_cos_map[270]=0,Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&egret.$error(1029);var e=Array.prototype.slice.call(arguments,1),i=this,r=function(){},n=function(){return i.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,n.prototype=new r,n}),function(t){var e=function(e){function i(t,i){void 0===i&&(i=0);var r=e.call(this)||this;return r._delay=0,r._currentCount=0,r._running=!1,r.updateInterval=1e3,r.lastCount=1e3,r.lastTimeStamp=0,r.delay=t,r.repeatCount=0|+i,r}return __extends(i,e),Object.defineProperty(i.prototype,"delay",{get:function(){return this._delay},set:function(t){t<1&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),i.prototype.reset=function(){this.stop(),this._currentCount=0},i.prototype.start=function(){this._running||(this.lastCount=this.updateInterval,this.lastTimeStamp=t.getTimer(),t.ticker.$startTick(this.$update,this),this._running=!0)},i.prototype.stop=function(){this._running&&(t.stopTick(this.$update,this),this._running=!1)},i.prototype.$update=function(e){if(e-this.lastTimeStamp>=this._delay)this.lastCount=this.updateInterval;else{if(this.lastCount-=1e3,this.lastCount>0)return!1;this.lastCount+=this.updateInterval}this.lastTimeStamp=e,this._currentCount++;var i=this.repeatCount>0&&this._currentCount>=this.repeatCount;return(0==this.repeatCount||this._currentCount<=this.repeatCount)&&t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER),i&&(this.stop(),t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER_COMPLETE)),!1},i}(t.EventDispatcher);t.Timer=e,__reflect(e.prototype,"egret.Timer")}(egret||(egret={})),egret||(egret={}),function(t){t.$callLaterFunctionList=[],t.$callLaterThisList=[],t.$callLaterArgsList=[],t.callLater=function(e,i){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t.$callLaterFunctionList.push(e),t.$callLaterThisList.push(i),t.$callLaterArgsList.push(r)},t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[],t.$callAsync=function(e,i){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t.$callAsyncFunctionList.push(e),t.$callAsyncThisList.push(i),t.$callAsyncArgsList.push(r)}}(egret||(egret={})),function(t){t.superSetter=function(t,e,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];var s,a=t.prototype;t.hasOwnProperty("__sets__")||Object.defineProperty(t,"__sets__",{value:{}});var o=(s=t.__sets__)[i];if(o)return o.apply(e,r);var h=Object.getPrototypeOf(a);if(null!=h){for(;!h.hasOwnProperty(i);)if(null==(h=Object.getPrototypeOf(h)))return;o=Object.getOwnPropertyDescriptor(h,i).set,s[i]=o,o.apply(e,r)}},t.superGetter=function(t,e,i){var r,n=t.prototype;t.hasOwnProperty("__gets__")||Object.defineProperty(t,"__gets__",{value:{}});var s=(r=t.__gets__)[i];if(s)return s.call(e);var a=Object.getPrototypeOf(n);if(null!=a){for(;!a.hasOwnProperty(i);)if(null==(a=Object.getPrototypeOf(a)))return;return s=Object.getOwnPropertyDescriptor(a,i).get,r[i]=s,s.call(e)}}}(egret||(egret={})),function(t){var e={};t.getDefinitionByName=function(t){if(!t)return null;var i=e[t];if(i)return i;var r=t.split("."),n=r.length;i=global;for(var s=0;s<n;s++)if(!(i=i[r[s]]))return null;return e[t]=i,i},t.cleanCache=function(){e={}}}(egret||(egret={})),egret||(egret={}),function(t){t.getQualifiedClassName=function(t){var e=void 0===t?"undefined":_typeof(t);if(!t||"object"!=e&&!t.prototype)return e;var i=t.prototype?t.prototype:Object.getPrototypeOf(t);if(i.hasOwnProperty("__class__"))return i.__class__;var r=i.constructor.toString().trim(),n=r.indexOf("("),s=r.substring(9,n);return Object.defineProperty(i,"__class__",{value:s,enumerable:!1,writable:!0}),s}}(egret||(egret={})),function(t){t.getQualifiedSuperclassName=function(e){if(!e||"object"!=(void 0===e?"undefined":_typeof(e))&&!e.prototype)return null;var i=e.prototype?e.prototype:Object.getPrototypeOf(e),r=Object.getPrototypeOf(i);if(!r)return null;var n=t.getQualifiedClassName(r.constructor);return n||null}}(egret||(egret={})),function(t){t.getTimer=function(){return Date.now()-t.sys.$START_TIME}}(egret||(egret={})),function(t){t.hasDefinition=function(e){return!!t.getDefinitionByName(e)}}(egret||(egret={})),function(t){t.is=function(t,e){if(!t||"object"!=(void 0===t?"undefined":_typeof(t)))return!1;var i=Object.getPrototypeOf(t),r=i?i.__types__:null;return!!r&&-1!==r.indexOf(e)}}(egret||(egret={})),function(t){t.startTick=function(e,i){e||t.$error(1003,"callBack"),t.ticker.$startTick(e,i)}}(egret||(egret={})),function(t){t.stopTick=function(e,i){e||t.$error(1003,"callBack"),t.ticker.$stopTick(e,i)}}(egret||(egret={})),function(t){t.toColorString=function(t){t<0&&(t=0),t>16777215&&(t=16777215);for(var e=t.toString(16).toUpperCase();e.length>6;)e=e.slice(1,e.length);for(;e.length<6;)e="0"+e;return"#"+e}}(egret||(egret={}));